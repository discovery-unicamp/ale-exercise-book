<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>RISC-V ALE Exercise Book v1.0.1</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">RISC-V ALE Exercise Book</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-code-generation-tools.html"><strong aria-hidden="true">1.1.</strong> Code Generation Tools</a></li><li class="chapter-item expanded "><a href="ch01-02-code-generation-tools.html"><strong aria-hidden="true">1.2.</strong> Automating the compilation process with Makefiles</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-getting-started-with-the-simulator.html"><strong aria-hidden="true">2.</strong> Getting Started with the Simulator</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch02-01-running-hello-world.html"><strong aria-hidden="true">2.1.</strong> Running the Hello World program</a></li><li class="chapter-item expanded "><a href="ch02-02-using-assistant.html"><strong aria-hidden="true">2.2.</strong> Using the Assistant to check a Simple Symbol Calculator program</a></li><li class="chapter-item expanded "><a href="ch02-03-debugging-a-program.html"><strong aria-hidden="true">2.3.</strong> Debugging a program</a></li></ol></li><li class="chapter-item expanded "><a href="ch03-00-data-representation.html"><strong aria-hidden="true">3.</strong> Data Representation on Modern Computers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-base-conversion-c.html"><strong aria-hidden="true">3.1.</strong> Number Base Conversion in C</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-assembly-object-executable-files.html"><strong aria-hidden="true">4.</strong> Assembly, object and executable files</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-organization-elf-file.html"><strong aria-hidden="true">4.1.</strong> Organization of an ELF file</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-bit-manipulation-instruction-encoding.html"><strong aria-hidden="true">5.</strong> Bit Manipulation and Instruction Encoding</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-bit-masking-shift-operations.html"><strong aria-hidden="true">5.1.</strong> Bit Masking and Shift Operations</a></li><li class="chapter-item expanded "><a href="ch05-02-riscv-instruction-encoding.html"><strong aria-hidden="true">5.2.</strong> RISC-V Instruction Encoding</a></li></ol></li><li class="chapter-item expanded "><a href="ch06-00-assembly-user-level-programming.html"><strong aria-hidden="true">6.</strong> Assembly User-level Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch06-01-square-root.html"><strong aria-hidden="true">6.1.</strong> Square Root</a></li><li class="chapter-item expanded "><a href="ch06-02-gps.html"><strong aria-hidden="true">6.2.</strong> GPS</a></li><li class="chapter-item expanded "><a href="ch06-03-hamming-code.html"><strong aria-hidden="true">6.3.</strong> Hamming Code</a></li><li class="chapter-item expanded "><a href="ch06-04-image-on-canvas.html"><strong aria-hidden="true">6.4.</strong> Image on Canvas</a></li><li class="chapter-item expanded "><a href="ch06-05-apply-filter.html"><strong aria-hidden="true">6.5.</strong> Applying a Filter to an Image</a></li><li class="chapter-item expanded "><a href="ch06-06-linked-list.html"><strong aria-hidden="true">6.6.</strong> Custom Search on a Linked List</a></li><li class="chapter-item expanded "><a href="ch06-07-abi-linked-list.html"><strong aria-hidden="true">6.7.</strong> ABI-compliant Linked List Custom Search</a></li><li class="chapter-item expanded "><a href="ch06-08-abi-recursive-binary-tree.html"><strong aria-hidden="true">6.8.</strong> ABI-compliant Recursive Binary Tree Search</a></li></ol></li><li class="chapter-item expanded "><a href="ch07-00-assembly-system-level-programming.html"><strong aria-hidden="true">7.</strong> Assembly System-level Programming</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch07-01-peripheral-controlling-the-car.html"><strong aria-hidden="true">7.1.</strong> Accessing Peripherals - Controlling the Car</a></li><li class="chapter-item expanded "><a href="ch07-02-peripheral-using-serial-port.html"><strong aria-hidden="true">7.2.</strong> Accessing Peripherals - Using Serial Port</a></li><li class="chapter-item expanded "><a href="ch07-03-interrupts-midi-player.html"><strong aria-hidden="true">7.3.</strong> External Interrupts - MIDI Player</a></li><li class="chapter-item expanded "><a href="ch07-04-interrupts-controlling-the-car.html"><strong aria-hidden="true">7.4.</strong> Software Interrupts - Controlling the Car</a></li></ol></li><li class="chapter-item expanded "><a href="ch08-00-final-projects.html"><strong aria-hidden="true">8.</strong> Final Projects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch08-01-driving-through-the-city.html"><strong aria-hidden="true">8.1.</strong> Driving Through the City</a></li></ol></li><li class="chapter-item expanded "><a href="appendix.html"><strong aria-hidden="true">9.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix_ale-peripherals-mmio-manual.html"><strong aria-hidden="true">9.1.</strong> ALE Peripherals MMIO Manual</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">RISC-V ALE Exercise Book v1.0.1</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/discovery-unicamp/ale-exercise-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="risc-v-ale-exercise-book"><a class="header" href="#risc-v-ale-exercise-book">RISC-V ALE Exercise Book</a></h1>
<p><em>Complementary exercises for <a href="https://riscv-programming.org/book.html">An Introduction to Assembly Programming with RISC-V</a> textbook</em></p>
<p>Contributors:</p>
<ul>
<li>João Seródio</li>
<li>Edson Borin</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>This book contains a set of exercises to support professors and students in the assembly language learning process.
The book is organized in chapters. Each chapter assumes the student has already learned a given set of concepts covered by the textbook (<a href="https://riscv-programming.org/book.html">An Introduction to Assembly Programming with RISC-V</a>).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>This chapter contains a set of exercises to help students getting started with code generation tools, including the compiler, the assembler, the linker and the disassembler tools.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="step-by-step-compilation-process"><a class="header" href="#step-by-step-compilation-process">Step-by-step compilation process</a></h2>
<p>This exercise is a tutorial that guides the student to generate executable files from source files.
It requires the students to perform, step-by-step, all the code generation steps, including compilation, assembling, and linking.</p>
<h3 id="instructions"><a class="header" href="#instructions">Instructions</a></h3>
<p>Perform the following program compilation process step-by-step, i.e., generating the assembly language code and then the object code for each source file and finally calling the linker to put all the object files together and produce the executable file named prog.x.
You must use the clang-15 compiler and generate code for the RISC-V R32 architecture.</p>
<p>The program is composed of two source files: <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch01-01/file1.c">file1.c</a> and <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch01-01/file2.c">file2.c</a>. The following listings show the file contents.</p>
<pre><code class="language-c">extern void write(int __fd, const void *__buf, int __n);

int main(void) {
  const char str[] = "Hello World!\n";
  write(1, str, 13);
  return 0;
}
</code></pre>
<div style="text-align:center">
<span class="filename">file1.c</span>
</div>
<pre><code class="language-c">extern int main(void);

void exit(int code) {
  __asm__ __volatile__(
    "mv a0, %0           # return code\n"
    "li a7, 93           # syscall exit (64) \n"
    "ecall"
    :             // Output list
    :"r"(code)    // Input list
    : "a0", "a7"
  );
}

void write(int __fd, const void *__buf, int __n){
  __asm__ __volatile__(
    "mv a0, %0           # file descriptor\n"
    "mv a1, %1           # buffer \n"
    "mv a2, %2           # size \n"
    "li a7, 64           # syscall write (64) \n"
    "ecall"
    :   // Output list
    :"r"(__fd), "r"(__buf), "r"(__n)    // Input list
    : "a0", "a1", "a2", "a7"
  );
}

void _start() {
  int ret_code = main();
  exit(ret_code);
}
</code></pre>
<div style="text-align:center">
<span class="filename">file2.c</span>
</div>
<p>To perform this task, you must, first, create these two files (with their respective contents) on your computer.</p>
<p>Once the compilation is complete, you must:</p>
<ul>
<li>Use the disassembler tool to inspect the contents of the object and executable files. You'll notice that it contains the sequence of instructions listed in the function write from file2.c and the names of functions main, _start, and write.</li>
<li>Compare the contents of file1.s assembly file with the output generated by the disassembling tool for the file1.o file.</li>
</ul>
<h3 id="notes-and-tips"><a class="header" href="#notes-and-tips">Notes and Tips</a></h3>
<ul>
<li>Remember to use the RISC-V 32 compilation tools, otherwise you might not be able to correctly compile file2.c (Notice that this file contains assembly instructions for RISC-V processors).</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="automating-the-compilation-process-with-makefiles"><a class="header" href="#automating-the-compilation-process-with-makefiles">Automating the compilation process with Makefiles</a></h2>
<p>This exercise requires students to reason about the compilation process and automate this process with Makefiles.</p>
<h3 id="instructions-1"><a class="header" href="#instructions-1">Instructions</a></h3>
<p>In this exercise, you must produce a Makefile script that automates the compilation process carried out manually in the <a href="ch01-01-code-generation-tools.html">previous exercise</a>, i.e., for a program that contains two source files (file1.c and file2.c). The final file to be produced must be named prog.x. For this, you must create a rule for each intermediate file, until you reach the final file.</p>
<p>You might test your script executing the following commands:</p>
<pre><code class="language-bash">make file1.s
make file2.s
make file1.o
make file2.o
make prog.x
</code></pre>
<p>These commands must generate, respectively: the assembly code for file1.c and file2.c; the object files file1.o and file2.o; and, finally, the executable file named prog.x.</p>
<h3 id="notes-and-tips-1"><a class="header" href="#notes-and-tips-1">Notes and Tips</a></h3>
<ul>
<li><a href="http://www.gnu.org/software/make/manual/make.html#Simple-Makefile">This link</a> provides information about make and Makefiles.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-with-the-simulator"><a class="header" href="#getting-started-with-the-simulator">Getting Started with the Simulator</a></h1>
<p>This chapter contains a set of exercises to help students getting started with the ALE simulator.</p>
<p>All exercises in this chapter assume the student is already familiar with compiling, assembling, and linking code for RISC-V processors, covered by the exercises of the previous chapter.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="running-the-hello-world-program"><a class="header" href="#running-the-hello-world-program">Running the Hello World program</a></h2>
<p>This exercise is a tutorial that guides the student to run executable files on the simulator.</p>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li>Complete <a href="ch01-01-code-generation-tools.html">exercise 1.1</a> to generate the Hello World program (prog.x).</li>
</ul>
<h3 id="ale-simulator-tutorial"><a class="header" href="#ale-simulator-tutorial">ALE Simulator Tutorial</a></h3>
<p>The RISC-V ALE is a simulator that runs on your browser and can be accessed at <a href="https://riscv-programming.org/ale/">ALE Simulator</a>.</p>
<h4 id="loading-files"><a class="header" href="#loading-files">Loading files</a></h4>
<p>The simulator has its own file system that enables storing multiple files. To load files, you need to click on the file button at the top right corner (left of RUN button), and select the files that you wish to load from your computer.</p>
<p>You can load executable files, source files or even data files to be accessed by your programs.</p>
<p>There is no directory structure and existing files with the same name are automatically overwritten, in other words, if you load a file named prog.x more than once, just the last one will be kept.</p>
<h4 id="running"><a class="header" href="#running">Running</a></h4>
<p>Once you have loaded your files, you can start your program execution. To do so, you must click on the RUN button (top right corner).</p>
<p>The simulator will identify the source files and, if necessary, perform the compiling, assembling and linking to get the executable. Finally, the simulator will invoke the executable and show the program's output (if there is any).</p>
<p>Note: The simulator stops the program's execution when (i) the program invokes the system call (syscall) exit, or (ii) when the execution finds invalid instructions. In the last case, the simulator may show error messages like "Error: Failed stop: 64 consecutive illegal instructions: 0". This is expected in programs that do not call the exit syscall, as the processor doesn't know where the program ends and will continue to execute instructions consecutively, until it finds invalid instructions.</p>
<h3 id="instructions-2"><a class="header" href="#instructions-2">Instructions</a></h3>
<p>Load and execute the prog.x file on the ALE simulator and inspect the output produced by the program on the simulator terminal. You should see the string "Hello world!".</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="using-the-assistant-to-check-a-simple-symbol-calculator-program"><a class="header" href="#using-the-assistant-to-check-a-simple-symbol-calculator-program">Using the Assistant to check a Simple Symbol Calculator program</a></h2>
<p>This exercise is a simple program that must be executed on the ALE Simulator and checked using the Assistant's tests.</p>
<h3 id="development-tutorial"><a class="header" href="#development-tutorial">Development Tutorial</a></h3>
<p>Programs written in C are usually linked to the C standard library and with object files that contain support routines to the application's execution. These routines, initialize the C library's data structures, organize the parameters to the main function (_start) and, after returning from the main function, invoke the operating system to signal the end of the application (function exit).</p>
<h4 id="_start-function-and-exit-syscall"><a class="header" href="#_start-function-and-exit-syscall">_start function and exit syscall</a></h4>
<p>Besides linking the code from multiple object files (.o), the linker must register the address of the entry function of the program on the header of the executable file so that the operating system's <em>loader</em> knows where to start the execution of the program once it starts. By default, in C and C++, the program's entry point is defined by the function called <strong>_start</strong>. This is a short function that invokes the function main() and after main returns, it invokes the <strong>exit</strong> syscall. to inform the operating system that the program has finished.</p>
<p>When generating the executable files, C and C++ compilers link an object file that has the implementation of this function. However, the RISC-V compiler used here doesn't link to such file (nor LibC), thi way, it is necessary to include an implementation of the function.</p>
<p>The following code shows possible implementations to the function <strong>exit</strong> and the function <strong>_start</strong>. In this example, the function exit consists of a sequence of instructions in assembly language that copies the value of function parameter (code) to the register a0, puts the value 93 on register a7 and generates a software interrupt (ecall instruction). The software interrupt redirects the execution flow to the operating system, which will use the value on register a7 to determine which syscall was requested and the value on register a0 as a parameter to the call.</p>
<pre><code class="language-c">void exit(int code)
{
  __asm__ __volatile__(
    "mv a0, %0           # return code\n"
    "li a7, 93           # syscall exit (64) \n"
    "ecall"
    :             // Output list
    :"r"(code)    // Input list
    : "a0", "a7"
  );
}

void _start()
{
  int ret_code = main();
  exit(ret_code);
}
</code></pre>
<p>The <strong>_start</strong> function code simply calls the <strong>main</strong> function, which is implemented by the user, and, after main's return, invokes the <strong>exit</strong> function passing the <strong>main</strong> return value as a parameter.</p>
<p>You can copy and paste these two functions on your C programs that will be executed on the ALE simulator. Alternatively, you can put them in a file called start.c and compile/assemble/link the file with your program.</p>
<h4 id="read-and-write-syscalls"><a class="header" href="#read-and-write-syscalls">read and write syscalls</a></h4>
<p>In general, programs that execute in computer systems that have an operating system don't have direct access to the system's peripherals (e.g., monitor, keyboard, mouse, ...), in other words, that can't interact directly with these devices. In this case, all interactions with these devices are done via system calls (<em>syscalls</em>).</p>
<p>The organization of the Linux operating system is strongly based on the concept of files. In this context, each file is identified by a path and a name (e.g., /home/students/john/prog.c). In addition to that, when a file is opened by a program, the operating system associates this file with a file descriptor and returns this file descriptor to the program. The file descriptor is an integer that must be provided by the program every time it requests the operating system to perform an operation with the file (e.g., write or read of data). In short, to write to (or read from) a file, the program must:</p>
<ol>
<li>Invoke the operating system with the <strong>open</strong> syscall to open the file. This syscall will open the file and return an integer that corresponds to the file descriptor of the opened file.</li>
<li>Invoke the <strong>write</strong> or <strong>read</strong> syscall passing as argument the file descriptor of the file and a buffer to write or read data; and, finally</li>
<li>Invoke the operating system with the close syscall to close the file.</li>
</ol>
<p>There are three special file descriptors that are always available and don't have to be opened or closed: STDIN, STDOUT and STDERR. The Values of the file descriptors STDIN, STDOUT and STDERR are 0, 1 e 2, respectively.</p>
<p>These file descriptors correspond to the standard input, standard output and error output of the program. When the program writes to standard output or error output, the operating system shows what was written on the terminal; where the program is being executed. In case the program reads from standard input, the operating system (i) waits until the user types something in the standard input and press ENTER, and (ii) returns to the program what was typed in the terminal.</p>
<p>The following code shows the implementation of a function in C that contains code in RISC-V assembly language to invoke the syscall <strong>read</strong>. This function contains a set of RISC-V instructions that adjust the parameters and invoke the operating system to perform the read operation through the read syscall.</p>
<pre><code class="language-c">/* read
 * Parameters:
 *  __fd:  file descriptor of the file to be read.
 *  __buf: buffer to store the data read.
 *  __n:   maximum amount of bytes to be read.
 * Return:
 *  Number of bytes read.
 */
int read(int __fd, const void *__buf, int __n)
{
    int ret_val;
  __asm__ __volatile__(
    "mv a0, %1           # file descriptor\n"
    "mv a1, %2           # buffer \n"
    "mv a2, %3           # size \n"
    "li a7, 63           # syscall read code (63) \n"
    "ecall               # invoke syscall \n"
    "mv %0, a0           # move return value to ret_val\n"
    : "=r"(ret_val)                   // Output list
    : "r"(__fd), "r"(__buf), "r"(__n) // Input list
    : "a0", "a1", "a2", "a7"
  );
  return ret_val;
}
</code></pre>
<p>As you don't have access to the C standard library, you can use the function above to perform read operations from the standard input. To do so, just call the function <strong>read</strong> to the file descriptor of value 0. To use it, you must allocate a buffer that can be a global variable, like the example below. Note that the global variable (input_buffer) is an array with 10 characters, a 10 byte array. After reading the data, the <strong>read</strong> function writes the read bytes to the provided buffer and returns the amount of bytes read. The last parameter of the <strong>read</strong> function indicates the maximum amount of bytes that must be read. In case the amount of bytes read is greater than this value, the <strong>read</strong> function just writes the maximum amount of bytes (10 in the example below) on the input buffer and returns. The remaining bytes are stored in an internal buffer of the operating system and are returned when the <strong>read</strong> function is called again.</p>
<pre><code class="language-c">/* Buffer to store the data read */
char input_buffer[10];

int main()
{
  /* fd = 0 : reads from standard input (STDIN) */
  int n = read(0, (void*) input_buffer, 10);
  /* … */
  return 0;
}
</code></pre>
<p>The following code shows a possible C implementation of the function write. This C function contains a code in RISC-V assembly language to invoke the system call (syscall) <strong>write</strong>. It invokes the operating system to write <strong>__n</strong> bytes from the buffer <strong>__buf</strong> on the file (or device) indicated by the file descriptor, parameter <strong>__fd</strong>. When <strong>__fd</strong> = 1, this function writes to the standard output (stdout).</p>
<pre><code class="language-c">/* write
 * Parameters:
 *  __fd:  files descriptor where that will be written.
 *  __buf: buffer with data to be written.
 *  __n:   amount of bytes to be written.
 * Return:
 *  Number of bytes effectively written.
 */
void write(int __fd, const void *__buf, int __n)
{
  __asm__ __volatile__(
    "mv a0, %0           # file descriptor\n"
    "mv a1, %1           # buffer \n"
    "mv a2, %2           # size \n"
    "li a7, 64           # syscall write (64) \n"
    "ecall"
    :   // Output list
    :"r"(__fd), "r"(__buf), "r"(__n)    // Input list
    : "a0", "a1", "a2", "a7"
  );
}
</code></pre>
<p>Again, as you don't have access to the C standard library, you can use the function above to write to the standard output of the program, in other words, the terminal where your program was executed. To do so, just call the function write to the file descriptor 1. The code below shows an example where the write function is called to show a string on the output terminal.</p>
<pre><code class="language-c">/* Allocates a global string with 5 bytes.
 *   Note: the break line character, \n is encoded
 *       with a single byte */
char my_string[] = "1969\n";

int main()
{
  /* Prints the first 5 characters from the string on
   * the standard output, in other words, 1, 9, 6, 9 and break line. */
  write(1, my_string, 5);

  return 0;
}
</code></pre>
<p>The ALE simulator expects a break line character ('\n') to print the content written to the standard output on the terminal. This way, you must add a break line at the end of your buffer or call the function <strong>write</strong> again with a string that has the break line character. The example above shows a program that prints a string with 5 characters ending with a break line.</p>
<h3 id="instructions-3"><a class="header" href="#instructions-3">Instructions</a></h3>
<p>You must write a C program that implements a simple calculator. The calculator must read a string from the Standard Input with the following format: <strong>s1 op s2</strong>, where <strong>s1</strong> and <strong>s2</strong> are symbols that have a value associated to them and <strong>op</strong> is the operation to be performed.
The result of the operation must converted to its corresponding symbol and then written to the Standard Output, <em>i.e.</em>, file descriptor 1.</p>
<p>The symbols to be considered are the characters '0', '1', '2', '3', '4', '5', '6', '7', '8', and '9', and the values associated to them are zero, one, two, ..., and nine.</p>
<p>The arithmetic operations are represented by the symbols '+' (addition), '-' (subtraction) and '*' (multiplication).</p>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">2 + 3</td><td style="text-align: center">5</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: center">7 - 7</td><td style="text-align: center">0</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: center">4 * 2</td><td style="text-align: center">8</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-2"><a class="header" href="#notes-and-tips-2">Notes and Tips</a></h3>
<ul>
<li>All inputs are 5-character strings, where the first character represents the first symbol, the second is a space, third determines the operation, fourth is a space, and the fifth character is the second symbol.</li>
<li>The test cases have values between 0 and 9 (just one digit) as outputs, so it is not necessary to implement a complete conversion function from integer to string (itoa).</li>
<li>Your program must be self-contained and cannot use library routines, not even C's standard library.</li>
</ul>
<h3 id="using-the-assistant"><a class="header" href="#using-the-assistant">Using the Assistant</a></h3>
<p>We will be using the assistant from the RISC-V simulator for the first time in this exercise. It can be accessed via this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14QUhwV0FDQVNUQVFIczZwRG9XSmtLUWlnQk1PQUd6N0prc1pCekI5SkFWeG1vQ0FIUmhSZUFvY0FDcVhPQUFsVU1oS2pvNE9BUVNJbHlsT0FHVjZqVWdGOE9BR1owZkdBY09pQUFkS3lxR2xvRXJDS3U0aEVBVnJvZ2VnYjhnaHpBQURKOE5CQXlBRXFvMlg2QndhSGhVVEdhMnF3MGZEQXdxRFNrVUMycDZRRGNlbm8wTWlJY0FLSUFIZ0JNY0pNY3FPT2txRENTQkU0dVl1NWVERXk1QXpBY0hNMHdaSFRxSFFJQUZBQ1V3SG9IQndUcXRuVFgtZnYzcEFBV0pCSHFVQndBWGc0YlFBN2h3ekpack04THVFSm5ZYUNSVUJ4SmhGSmhnT0I0c2xvTVFCUE1BQUl6NE1nNEFHRmlqUk5CQlNBSndsYzN2ZFpLZ2hIUnlrWkFjRFVHQ0NrVlNxekJLODdoOXZnUUlrYzJoMHVzY0lnaDFBUlBoY1dSVTZYc0dld3hqQUlQanNRUWNiUmlqSlZsSU9BUW1Sd3ZraUVNRmtIUUlLRXhEUUFOYUNnNWZINlcxQ1NWQUJXQWV1QVFPaklWWkFnRGE0UUF0R0hRVElvUGp3ZzV3MkdUYVFXY2c0MkVRQVFFQUNBQXpqQURzQURFaTBXU1dtRXlRSUdYOERSSk42d0k5d2dCZE43T3MzQzM1UUNJUVNTU09DTE1nd2tBa2tJSUtERFRvdE5Od1FFQVBseWlxTUVSWlluNWRJNExOSTZqbysxZElyUWJRWU5EZ3pWNFk5UWZlMHBHdXIxOERtQUFXZ01qZ3FIOU1oeDZPVDZsUXZtVk1GYmFzY0h0QWlnY1lQVE5TOWRIZUE0dENFZnNxQ2dhUWdRQVJsYlhjT3k3SHNMd0hBQURBQVZTOE9BQUVtQU9DNEFRZ0JxY2otQXVBQkhMOHlFbEs0T0RESndlMndodzBPSVhndEdmT2ppaWdVZ2NTd3E5c05tY2lPQUFaaDBQUjJJNGJDQUZacEpnV1RnQlBKQVdUZ0FKMUJnQ1VXblJDNElCd2ZFbUlCT2NJQWlaTURHdVFFZ1h4Q3lHREFhNGZ5dVZEMnorRERlemdpNDhJSTRqU0lvcWlPRm8raUp4Z0ppV0k4ZFI4Vmt6aXNYUFZBK09qUVRoTzh2Tm1JNFBNbE5rN0RzeXl1ODFQOWM4dEowMEw5TU00eloyRWV5ckpNMnpxc2NxNW5OY241M083VHpMMjgtQ3lDSWtqTHpJeVJLT291akwwWTlLQUZsTkJpOXN1SVFIaUV2VWZqa3E4N0NBQllPQUFLbVJQSzVJQURtMjFTUjBLelR0TjBtQXlxTWt5elBxNnlBVHF5eUdxYXY4b01DQVFncGdqaC1pQmJOZWcramdBQjVKSitxQktLWTI1bnVnMDBJSFpOQ2JXV1dBcjJ6SEFBRTVmd1pDR2hIeGFIMjFoeVI0WXVSR2tiRENBMXpDY0cyeGF6czJwU256dXI4dnFBdjhGakFNa0thZmhtdWJFb0VvVGx1SWlCLUhFNGo4VjhiYnNONThpaGYyZ3FOT0swN3pvcTB5cXZ1bTY3b2NweXJoY3Ntb2FCR0dwRHhnblViUnpIdGV4M1hLSHhuQmlmcE5HME5hekRscTZvUTZiSWZyQnZTeUxvbzQ2YTR0NGhha3U1anJSZUFQbjBzRjRXWkljUU9JRERDWHc5eUtXaXBPMHFndkt5N0ZkVjJxT0RzcFhHdlYxc0RpMThtUlJ4dldjQWtnMkdTTnd1bDFOaEhTLUxvVUtZODZtSFo2LXlCc0NsaUpwa1ZtUlhaK0xPYVdnUGVmOFRiUTVGM24xcGo1VDhzTzZYRThsT1hVLU03T2JNejY2YzQxaGxoYWVoa2JjN2IwTlNmWmROQ0VJRnB3VnNHMGZYUGxTQ1hHLVF4QVVqajVrVWgwa2JMSEc2ZjdRVDRJSzJHWGU2MDNZa1JmVC12Y0tBQVFncDd3c24xWityOWd6Wm5mZ0FRaStxRFBPOXgzcndEZ2tHS3U3a3Y2UEJmaUtMUU1Ca0JmRFFRY0FJcjBManZVK2h3SkNRTi1yQW1Fci1ENklOZGhrd1pJQXowSEJ5TEcwLWpBNytCRGd4UUdiR1FqZzI4cjRIRTRjQW9LVWlOcTBPekV4VGdGeE1FUVRERWhldUJ4eEZvd1hJSU8rRlFINEgyS0hBS1JUWjJSU0piR1RkNldvK0NWeDBiZmZjZGdxVG5qc1FLTW1HNHR6N0d3Z0FjUnRKNmRFeEVwRytBaUJ3QUFJbndFRU1BNURkZzREaVBnVzV3TGRUc1ZVRUlheFJCdUNFUE1kbzZoUXJYd3FQOUtHbndXUUJBQk1SRUVzQkpEaElpQ1lFb2VSUlFzaWNRQWVYeENrZG9wQnFsNUF1Tlk0eS1nS2tSS2laSUFFNFI1alRCUkhZOElNNExoRENnSTZEZ253N0NvQ3VIOUJJTTRJallWYk52UVVHejNqRnpObUFXQURoSURqRlFjOWR4MjRPQmpTcEo4Q0lBUTVDWEF1VjhhdXl3UWpXVTJoY1E1NlU5bGhXNFNvV0FCc3RsYk5CR01LWU14WEc0QkFFY2IweUJNQ2dENEV3U1VCQm9YZ3BhSkNzaUJBSUNPRXdKK1ZBZUFJVlFHUUtpaUFKSk1Xbkd4VWltQUtLS3doT0pWK0hGeUs4VUVvTE5TMGx1TDhVVmk0RXkybDVMNlVWakdoeXNsRkswVWVENVN5Z2xKZytWTEUxRHhBZ2ZCanh6TWRJU2NZZkxwWFVISUk2UkFmQjRaMkRnQUFOMktGK0ZndVpDekZnTEVTdkE4Tk5Jc2hvbkFXR2FBV0NUSGtpQVc4R1pkUThnTk5DcDFucHRYVE8wTzYzd3ZnZ0E=" target="_blank">link</a>.
When accessing the assistant, a new simulator tab will open with the configured Assistant available in the button below the <em>Debug</em> button.</p>
<p>To test your code, load the file (in this exercise the .c file) on the simulator and click on <em>Run Tests</em> after selecting the Assistant tab.
The name of each one of the tests will be informed, and after some processing time, it will return either <em>Pass</em> or <em>Fail</em>, which can be selected to inform the input, expected output and returned output for the selected test.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="debugging-a-program"><a class="header" href="#debugging-a-program">Debugging a program</a></h2>
<p>This exercise requires students to use the ALE simulator interactive commands to inspect the contents of registers and memory locations of a running program.</p>
<h3 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h3>
<ul>
<li>Get familiar with the concepts of instructions, registers and labels.</li>
</ul>
<h3 id="debugging-tutorial"><a class="header" href="#debugging-tutorial">Debugging Tutorial</a></h3>
<p>The ALE simulator has an interactive interface that allows the user to control the execution of the program and inspect the registers and memory values. This interface is similar to the interface provided by the GDB debugger and allows the user to debug the code execution.</p>
<p>To enable the interactive execution interface, just click on the arrow beside the RUN button and select the "Debug" option. After clicking on this button, the simulator will open an interactive terminal where you can type commands to control the execution and/or inspect the state of the memory and register of the RISC-V processor.</p>
<p>We recommend using the commands listed on the table below, but a complete list of the commands can be obtained using the "help" command on the interactive terminal.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Command</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left">symbols</td><td style="text-align: left">Shows the address of the symbols (e.g., _start, loop, end, result) of the program. The address is shown in the hexadecimal representation (e.g., 0x11180).</td></tr>
<tr><td style="text-align: left">until &lt;address&gt;</td><td style="text-align: left">Executes the instructions until a certain address. The address must be provided in the hexadecimal representation (e.g., 0x11180).</td></tr>
<tr><td style="text-align: left">step [n=1]</td><td style="text-align: left">Executes the next <strong>n</strong> instructions.</td></tr>
<tr><td style="text-align: left">peek r &lt;register&gt;</td><td style="text-align: left">Shows the value stored on the register &lt;register&gt; (e.g., <em>peek r x1</em> or <em>peek r mtval</em>). The value is shown in the hexadecimal representation. The command <em>peek r all</em> shows the values of all the registers.</td></tr>
<tr><td style="text-align: left">peek m &lt;address&gt;</td><td style="text-align: left">Shows the value stored on the memory word associated with the address &lt;address&gt;. The value is shown in the hexadecimal representation.</td></tr>
<tr><td style="text-align: left">poke r &lt;register&gt; &lt;value&gt;</td><td style="text-align: left">Modifies the content of the register &lt;register&gt; with the value &lt;value&gt;. For instance, the command <em>poke r x1 0xff</em> stores the value 0xff in the register x1.</td></tr>
<tr><td style="text-align: left">poke m &lt;address&gt; &lt;value&gt;</td><td style="text-align: left">Modifies the content of the memory position associated with the address &lt;address&gt; with the value &lt;value&gt;. For instance, the command <em>poke m 0x800 0xfe</em> stores the value 0xfe in the memory position associated with the address 0x800.</td></tr>
<tr><td style="text-align: left">run</td><td style="text-align: left">Executes the program continuously until the execution ends due to an exit syscall or execution of invalid instructions.</td></tr>
</tbody></table>
</div>
<h3 id="instructions-4"><a class="header" href="#instructions-4">Instructions</a></h3>
<p>In this exercise, you must modify the code below with your academic record (RA) number, assemble and link the code, and run it step by step in the simulator's interactive mode, as explained in the previous sections.</p>
<pre><code class="language-riscvasm">.globl _start

_start:
  li a0, 134985  #&lt;&lt;&lt;=== Academic Record number (RA)
  li a1, 0
  li a2, 0
  li a3, -1
loop:
  andi t0, a0, 1
  add  a1, a1, t0
  xor  a2, a2, t0
  addi a3, a3, 1
  srli a0, a0, 1
  bnez a0, loop

end:
  la a0, result
  sw a1, 0(a0)
  li a0, 0
  li a7, 93
  ecall

result:
  .word 0
</code></pre>
<p>This program receives as input the value of your RA in register a0 and produces as output the values ​​in registers a1, a2, and a3. Assume the program has received your RA as input and answer the following questions:</p>
<ol>
<li>
<p>What are the values ​​of the following registers in hexadecimal representation when the execution reaches the "end" label?</p>
<ul>
<li>a0:</li>
<li>a1:</li>
<li>a2:</li>
<li>a3:</li>
</ul>
</li>
<li>
<p>What are the values ​​of the following registers in hexadecimal representation when the execution reaches the “loop” label for the fifth time?</p>
<ul>
<li>a0:</li>
<li>a1:</li>
<li>a2:</li>
<li>a3:</li>
</ul>
</li>
<li>
<p>What are the values ​​of the following registers in hexadecimal representation after the simulator executes the first 25 instructions?</p>
<ul>
<li>a0:</li>
<li>a1:</li>
<li>a2:</li>
<li>a3:</li>
</ul>
</li>
<li>
<p>What are the values ​​of the following registers in hexadecimal representation when the execution reaches the “loop” label for the eighth time?</p>
<ul>
<li>a0:</li>
<li>a1:</li>
<li>a2:</li>
<li>a3:</li>
</ul>
</li>
<li>
<p>What are the values ​​of the following registers in hexadecimal representation after the simulator executes the first 30 instructions?</p>
<ul>
<li>a0:</li>
<li>a1:</li>
<li>a2:</li>
<li>a3:</li>
</ul>
</li>
<li>
<p>What are the values ​​of the following registers in hexadecimal representation when the contents of a1 and a2 are different from 0 and have the same value?</p>
<ul>
<li>a0:</li>
<li>a3:</li>
</ul>
</li>
<li>
<p>What value (in hexadecimal representation) is stored at the "result" memory location after the execution of instruction sw a1, 0(a0) (located after the "end" label)?</p>
</li>
</ol>
<h3 id="notes-and-tips-3"><a class="header" href="#notes-and-tips-3">Notes and Tips</a></h3>
<ul>
<li>To see the complete list of commands available in the interactive mode you can execute the "help" command.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-representation-on-modern-computers"><a class="header" href="#data-representation-on-modern-computers">Data Representation on Modern Computers</a></h1>
<p>This chapter contains a set of exercises to help students learn how data is represented on modern computers, including how numbers and text are represented, how data is organized on the main memory, and how computer instructions are encoded.
Students are expected to read chapter 2 of the textbook (<a href="https://riscv-programming.org/book.html">An Introduction to Assembly Programming with RISC-V</a>).</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="number-base-conversion-in-c"><a class="header" href="#number-base-conversion-in-c">Number Base Conversion in C</a></h2>
<h3 id="instructions-5"><a class="header" href="#instructions-5">Instructions</a></h3>
<p>Write a C program that reads a number from the user input in either hexadecimal or decimal format and converts it to binary, decimal, and hexadecimal representations. The program should handle both positive and negative numbers.</p>
<p>Your program must read a series of characters encoded in ASCII format from the standard input (STDIN). These characters will represent a number in either decimal or hexadecimal format. Below, you will find the necessary functions for reading/writing information from/to the standard input/output, along with a concise illustration of how they can be utilized:</p>
<pre><code class="language-c">int read(int __fd, const void *__buf, int __n){
    int ret_val;
  __asm__ __volatile__(
    "mv a0, %1           # file descriptor\n"
    "mv a1, %2           # buffer \n"
    "mv a2, %3           # size \n"
    "li a7, 63           # syscall write code (63) \n"
    "ecall               # invoke syscall \n"
    "mv %0, a0           # move return value to ret_val\n"
    : "=r"(ret_val)  // Output list
    : "r"(__fd), "r"(__buf), "r"(__n)    // Input list
    : "a0", "a1", "a2", "a7"
  );
  return ret_val;
}

void write(int __fd, const void *__buf, int __n)
{
  __asm__ __volatile__(
    "mv a0, %0           # file descriptor\n"
    "mv a1, %1           # buffer \n"
    "mv a2, %2           # size \n"
    "li a7, 64           # syscall write (64) \n"
    "ecall"
    :   // Output list
    :"r"(__fd), "r"(__buf), "r"(__n)    // Input list
    : "a0", "a1", "a2", "a7"
  );
}

void exit(int code)
{
  __asm__ __volatile__(
    "mv a0, %0           # return code\n"
    "li a7, 93           # syscall exit (64) \n"
    "ecall"
    :   // Output list
    :"r"(code)    // Input list
    : "a0", "a7"
  );
}

void _start()
{
  int ret_code = main();
  exit(ret_code);
}

#define STDIN_FD  0
#define STDOUT_FD 1

int main()
{
  char str[20];
  /* Read up to 20 bytes from the standard input into the str buffer */
  int n = read(STDIN_FD, str, 20);
  /* Write n bytes from the str buffer to the standard output */
  write(STDOUT_FD, str, n);
  return 0;
}
</code></pre>
<h3 id="input"><a class="header" href="#input">Input</a></h3>
<ul>
<li>A 32-bit number represented by a string of up to 10 characters, followed by a newline character ("\n").
<ul>
<li>If the string represents a number in the hexadecimal base, it will start with characters "0x".</li>
<li>Otherwise, it will start with a number from 1 to 9 or with the minus sign (-), indicating that the number to be read is negative.</li>
<li>Note: The minus sign (-) will not be used in inputs in hexadecimal representation (e.g., -0x12 is not a valid input).</li>
</ul>
</li>
</ul>
<h3 id="output"><a class="header" href="#output">Output</a></h3>
<p>After reading the 32-bit number, you should print the following information followed by newline characters:</p>
<ul>
<li>The value in binary base preceded by "0b". If the number is negative, you must display the value in two's complement representation (as illustrated in the third example below);</li>
<li>The value in decimal base assuming that the 32-bit number is encoded in two's complement representation (In this case, if the most significant bit is 1, the number is negative);</li>
<li>The value in hexadecimal base preceded by "0x". If the number is negative, you must show the value in two's complement representation (as illustrated in the third example below);</li>
<li>The value in decimal base assuming that the 32-bit number is encoded in unsigned representation and its endianness has been swapped. - For example, assuming the 32-bit number 0x00545648 was entered as input, after the endian swap, the number becomes 0x48565400, and its decimal value is 1213617152.</li>
</ul>
<h3 id="examples-1"><a class="header" href="#examples-1">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: left">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">545648</td><td style="text-align: left">0b10000101001101110000</br>545648</br>0x85370</br>1884489728</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: center">0x545648</td><td style="text-align: left">0b10101000101011001001000</br>5527112</br>0x545648</br>1213617152</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: center">-545648</td><td style="text-align: left">0b11111111111101111010110010010000</br>-545648</br>0xfff7ac90</br>2427254783</td></tr>
<tr><td style="text-align: left">4</td><td style="text-align: center">0x80000000</td><td style="text-align: left">0b10000000000000000000000000000000</br>-2147483648</br>0x80000000</br>128</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-4"><a class="header" href="#notes-and-tips-4">Notes and Tips</a></h3>
<ul>
<li>This exercise challenges you to apply your understanding of number representation and conversion in C language. It's essential to consider edge cases, such as handling negative numbers, when designing and implementing your program.</li>
<li>Note that the code for the write and read functions contains assembly instructions for the RISC-V architecture; as such, it is not possible to compile this code (as it is) for other architectures.</li>
<li>You may assume that all input values will be small enough to be encoded within 32 bits.</li>
<li>For printing the signed number in decimal base, we recommend:
<ul>
<li>Check if the number is negative by examining the most significant bit (MSB).</li>
<li>If it is negative:
<ul>
<li>Print the "-" sign;</li>
<li>Print the negated value of the number (consider the two's complement representation as discussed in the theory class).</li>
</ul>
</li>
</ul>
</li>
<li>The RISC-V simulator stores data written with the write syscall in internal buffers and only displays the content in the terminal after encountering a newline character ("\n").</li>
<li>In debugging mode, the terminal only accepts interactive debug commands. To provide input data to your program, you must use the "Standard IO" feature in the "Operating System" tab or the "write-stdin" command in the terminal.</li>
<li>We have identified two minor issues in the simulator. For now, we have updated the example in the prompt and suggest considering:
<ul>
<li>The input "-1" will not be provided to your program.</li>
<li>When using the read function, request a larger number of bytes than necessary (for this exercise, we suggest using the read function with n = 20, as shown in the example).</li>
</ul>
</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14QUhwV0FDQVVRQThJd0VBRzFRY0E5Z0RNT2hZbVFxa090Qmt3QTZNS0FORjE1d0RnRlVBa25BQVNxUVFsUjBjSEFJSkVTNVNuQURLOVJ2SUMrSGNYVkZnT3lrQUE2VmpCUkFCTUFWMkVDVm1sN09VQ0FLd0lBZ0c1VmRRUk5iUTRBR1ZFYUNFRUFKVlFzclE1UGIxOS1JSkR3cU5RWW1sRVlHRlFhVWloV3BKU1FkSmhWR2tGcGJoNEFaamdBUmc1VUhsSlVHRENDR3p0WlJ4Y2xiVlVPRGhhWU1qb0l6czBBQ2dCS0RtQWQzWVVJOHpvTGdkdU9VZ0FMRWtDSXFBNEFYZzUyZ0IzUFNHRXhtQ3luQUs4Q3cwRWdpY2FCS1lZRGdBT1FpWUFBUmhZT0FBaFFnaUFEQ3JRQWJoWmlLME9MQU9BU0F1ZG5yZGhQSTZHVnNuOEFhaGdmbENpVVdWb25qZGR1OVB2dDJwMXVnZEFnZ0lnUTNxZG1lVlNIU0JSeDJOd1lCQU1jSUZBQlBXaEZRUXJDaGhCU29lVHZFUUlIeklPajhCVGtHZ0FhMlZRb0lrdVpZVlE0bGdxRENjQWdkR1FLMytBRzBBZ0JhTU5Bd1JRREVCS3poc01FVTNNNUJ4Mm9FQkMtQUFNUEFBN0FBeFF1Rm1tNFdvUmtnUU5NQkNBME1KZXNBRUNJQkFDNkExVXl2RUVSZ1lvcE1IUkZpZ05EZ0xRRS1wSXJWT1BDczJzdTF4Z0wxMmpJVVBEWlBFQ3BBWVlBdWdRejBkSXAxWXltVWRBQS1FZVlLeHpvRXZZSUZvOVRLZ3dJdDVMOEFIeXpZUlB5aEsrY0xwY0ViVTJXMWRkTjIzWGNvSDNROWp6UFZSTDJ2S0Jid2hCOHZ4ZmQ5a09mSDlsVjJLQkpGT0FnMTJFR0JrSGVEZ0FFSi1nQUZsbkxEYm1aVWdJam9lZHhDS0pONlJlZHgyMS1GNGwyUU5rczBDTE0yeTRobFRRNE9nMlZEWVNYbFlBQTlMTU1XRExNd3ltWnNBR29BQkpXQndHamRsa3NNVDBVc01BRTQxTTA3U3BOdVdTYzBNb3lJRERjUnJERGZOVEswblNWUmtteVhKbzF0T0lYTHhOQTRVNGx4K2Y1Qk1wRGdBQjRPQW8xSktWVTFUcUlzeGRSTEFGZC1udzRNb0diUUpJRklHaFpUb1RMbXgtUHpzTncxS09BQU1rcTVjaXIrWDUtbFN4VGlxdU55eXNDdEZNUWhES3NzdUJyLWs2ckZIZ0FvcnprUzBxRjE0MVRRc0NBQW1BQldOalNvNHBMS2hvbGFhTG9oajUxNC1xT0NtQVNsbzI0U1hTK0tCQWdnTUpmUVdNaElSQUlrQkFRaUF1bGFOTTREK2Q5Z0hsYkpBbVpXUStUcE1UVFcyMTRQbGROQjJnWUljUndRQkRVRGdHNzkzT0o1M0NzWUJtSVF1QlVIOVFSdFdSRGNJbFFkd1N0dVU3dmd1cTZFYWFmY2FJQ0FBVmFuOXNDZ0JIUW15SEZjNDR4bzA3aUFFWVFzZFpvb0lPMUtuYnJjZ0o1b28rYUFEWUtJQURuUExuVm9DZVNwaXpkV3N6VnRYTmExcVp0ZlZ4WFZFbG1YNWNObUFjemwrYnhsekxNemFtT1c1WW8rV2pOeldhRmZiZHRjRGNuUVlmOWVITzI3RjZZR1JQc255aDRkZkNRQmdDQXBGYS1NNTRTU2NGTUd6b3A2N3FjaEN6NmNaMmFXYlpvUE9hOWl5ZWN5Zm5VRUZ2Y1JjUnpPSnBWbmhqZGw5M0JpTDJ1UUZWeldPLVZyV2RhNzN1RFk5bUI1dm0yYmN6MTJhelp6QnZUWUhxWlpxbWNacGFtVWZoN05wV0pwOXlPLWJnQU9lMkRnRiszRDMzbzlqbWlFNWVKUFFjK2NuTHZUc1dzNUFCbXlBNGNZOCtwam0xNFhFdStmaDh1SWlGMGdxNFozRmlBTU1VOG00Zno4aXJERWVzWUd3SmdUclBXSGRFR2QzMXJiQWVvQ3BhTnduandjUXVEY3cxaU1tZ3dZcWhab1VSSGd0Q2l1WTViakZYaTNVcUc5UnpNbTNsMlhlSWNENkRnam93OGM4NDQ0TGpQcmNDK1pOem8zMUZqVGUrajk1QVVWZnV6Vm9oZHpKK1Mta0lIK0ZkaGFpSnJxVk91Y3NOYmFNVm5ReUJiZG9IYUtNY1lreHBpaUhuakRIUFNoOHNGN1QySWViSGdXampGMnpkclErUjlDOWlieVlUdklPYkN3NGNLUHR3dGFGbCtHN0VFU25hK2xOcTYwd2ZvemVhRURTWXAxNWtvZ1dmOUs1cU9BVG1YTXVDY200TjBlNC1ScXM0SEZKS2FVMkJac3JHNWhzYkxYTTJEc201THlRUE1oUmtLSkdXbHFQZHBianZhZU1ZZjdGaHZqOTcrT2hsNG9KdkR6N0tuQ1ZmWVJVU2dIaU1adExCSnlkUGpKTExpb2dCR1RsWnR4d1EweHB6Y0NrTGlnV1VvNXh5OVptMlV0Z25adXp6ek5OYWUwMmFSbDRrRDBXYmNCaFVjK21CM0ZINGdjd3l1RXh4NGFmQ1pTMGhGcHcyZm9pUkhCYWw2TVNjczB1eWkwbXFPaVpzbk1zMUt5ZTMyUzhRNVNEekdxRElkZ2xGWnNiWVVWbHVNTE1yc3VtclZlVnZIeG56Qm5mTTRWSFVaQUxFNUFvaWRNMitZaXdXTXdWbENwWnJvVmx3di1vQXUrcmRjVm9zeVlZN3VadFJYMk9SYWkreGhMaVdrdkhrOG5sTHllbHZPWVI4MW9YekQ0akwrY0UrT2dMblNzcEJZaXpsVDhqTFBNVWFzK0Y2eXpVYUpBZEs1NXV4RGtuTGRVZ3RXWnluV3FCekRzc0lDeUI0TDFKVnJDaTR4TFVxdlJXcW8rN3pXRzB0MWI4aytJU2pVblJOU0krMUdMWWxQMDlhcTYxQXIwbnBvT1ZzcDFxcVhVR05RWjZnZTBzQTB5cDRONm1BaURYWnRJV3RXLUozVG8yYXRqYUhPbGdUOVZqSUVjbTQxVXo0THFrRUhBUDZVUVh3Y0hlbStWcUZsdnBhRityeVVnb1lRQ0l6SFUwQ2RmUm14c21CV3U4ZHQ0Q0JMV1N2SWEwbDBSQ2hTUFpTWEN1N3FicnNiQWU1cVpGUXJqVktrdWVBaU1neVgxZE9UUGRHNkQyQkVJc1JONGJseEFCU0NxSkVLKzFZby1DaXUrNm1oNjRvSlZuUk5YWXA2UFFjR21sKzFPdjc3MmtBSUVWUzl1dyswdkRRK2V3S3BHT0FBQ3A5cFprdUp3VTRjR3lBRUdVaGZJam0wbDJMb1ZDdXIwSTY0Q2taYkd5VWpRay1KTGsxS0lERWJKNTJrRUNCREN3ejE0WlNmNUhPNEdqRU9BQUFNQURpTm9QVEluVXNBVWo3aEFnY0FBQ0tpRUJEQVFRb2hMb2NHMUtJQmlyeEdaU2E4RDRQd3RnWkFPSGtITURvRVFnNUF3VkpGQ0FIQTNqTW5FTDhQVGdKWUJoRE00RVhReFJjaUJIb05qQllBQjVERWlRT2lrRmk3a1U0WW1NVG5FOEZGOHpsbkxxLUFDSE1TWUIwcE1CRmZLY1lZZzRIUkJZc0tnYzRFVllpdmtDR3A1VXgwMk13R09rQ01ZRldsT2NWd0NBZllYcGtDWUZBS0lKZzRvQ0NUZEc2MGNiY0FLeldFd0FUVkFlQXh0UUdRTXRnZ0VBQ1JyYU9CdGhiTUFsc1ZtTTRkd21tM0Z2YmQyeEFmTWwzanRiWjJ4V2ZRajNydW5kdXhXQUFzdTlrN1oyOXRPRCs4OXU3dWctdUxBMVB6R093NDNnZEFkQmlVUVBBLXZROWtJNlJBb2hZQjNqZ01TSW9oTVdCWktMTVdFYm1QdDdNbVptT2lnYUFXQUxSQUtqRUFBRTlTQ0FOSk51bkhwaVNEaWFDejl3N2dnQQ==" target="_blank">link</a>.
<ul>
<li>Simply select your program, click on the assistant icon (small eye in the top-right corner of the screen), and click "Run Tests."</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assembly-object-and-executable-files"><a class="header" href="#assembly-object-and-executable-files">Assembly, object and executable files</a></h1>
<p>This chapter contains a set of exercises to help students learn about how assembly, object, and executable files are encoded.
Students are expected to read chapter 3 of the textbook (An Introduction to Assembly Programming with RISC-V).</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="organization-of-an-elf-file"><a class="header" href="#organization-of-an-elf-file">Organization of an ELF file</a></h2>
<p>In this activity, you will manually read and interpret an ELF executable file from its hexadecimal byte-by-byte representation (hexdump), as exemplified below.</p>
<pre><code>
00000000  7f 45 4c 46 01 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|
00000010  02 00 f3 00 01 00 00 00  b4 10 01 00 34 00 00 00  |............4...|
00000020  a4 01 00 00 04 00 00 00  34 00 20 00 04 00 28 00  |........4. ...(.|
00000030  06 00 04 00 06 00 00 00  34 00 00 00 34 00 01 00  |........4...4...|
00000040  34 00 01 00 80 00 00 00  80 00 00 00 04 00 00 00  |4...............|
00000050  04 00 00 00 01 00 00 00  00 00 00 00 00 00 01 00  |................|
00000060  00 00 01 00 b4 00 00 00  b4 00 00 00 04 00 00 00  |................|
00000070  00 10 00 00 01 00 00 00  b4 00 00 00 b4 10 01 00  |................|
00000080  b4 10 01 00 48 00 00 00  48 00 00 00 05 00 00 00  |....H...H.......|
00000090  00 10 00 00 51 e5 74 64  00 00 00 00 00 00 00 00  |....Q.td........|
000000a0  00 00 00 00 00 00 00 00  00 00 00 00 06 00 00 00  |................|
000000b0  00 00 00 00 37 15 02 00  13 05 95 f4 93 05 00 00  |....7...........|
000000c0  13 06 00 00 93 06 f0 ff  93 72 15 00 b3 85 55 00  |.........r....U.|
000000d0  33 46 56 00 93 86 16 00  13 55 15 00 e3 16 05 fe  |3FV......U......|
000000e0  17 05 00 00 13 05 85 01  23 20 b5 00 13 05 00 00  |........# ......|
000000f0  93 08 d0 05 73 00 00 00  00 00 00 00 4c 69 6e 6b  |....s.......Link|
00000100  65 72 3a 20 4c 4c 44 20  31 30 2e 30 2e 30 00 00  |er: LLD 10.0.0..|
00000110  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000120  01 00 00 00 e0 10 01 00  00 00 00 00 00 00 01 00  |................|
00000130  05 00 00 00 c8 10 01 00  00 00 00 00 00 00 01 00  |................|
00000140  0a 00 00 00 f8 10 01 00  00 00 00 00 00 00 01 00  |................|
00000150  11 00 00 00 b4 10 01 00  00 00 00 00 10 00 01 00  |................|
00000160  00 2e 74 65 78 74 00 2e  63 6f 6d 6d 65 6e 74 00  |..text..comment.|
00000170  2e 73 79 6d 74 61 62 00  2e 73 68 73 74 72 74 61  |.symtab..shstrta|
00000180  62 00 2e 73 74 72 74 61  62 00 00 65 6e 64 00 6c  |b..strtab..end.l|
00000190  6f 6f 70 00 72 65 73 75  6c 74 00 5f 73 74 61 72  |oop.result._star|
000001a0  74 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |t...............|
000001b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000001c0  00 00 00 00 00 00 00 00  00 00 00 00 01 00 00 00  |................|
000001d0  01 00 00 00 06 00 00 00  b4 10 01 00 b4 00 00 00  |................|
000001e0  48 00 00 00 00 00 00 00  00 00 00 00 04 00 00 00  |H...............|
000001f0  00 00 00 00 07 00 00 00  01 00 00 00 30 00 00 00  |............0...|
00000200  00 00 00 00 fc 00 00 00  13 00 00 00 00 00 00 00  |................|
00000210  00 00 00 00 01 00 00 00  01 00 00 00 10 00 00 00  |................|
00000220  02 00 00 00 00 00 00 00  00 00 00 00 10 01 00 00  |................|
00000230  50 00 00 00 05 00 00 00  04 00 00 00 04 00 00 00  |P...............|
00000240  10 00 00 00 18 00 00 00  03 00 00 00 00 00 00 00  |................|
00000250  00 00 00 00 60 01 00 00  2a 00 00 00 00 00 00 00  |....`...*.......|
00000260  00 00 00 00 01 00 00 00  00 00 00 00 22 00 00 00  |............"...|
00000270  03 00 00 00 00 00 00 00  00 00 00 00 8a 01 00 00  |................|
00000280  18 00 00 00 00 00 00 00  00 00 00 00 01 00 00 00  |................|
00000290  00 00 00 00                                       |....|
00000294
</code></pre>
<p>This is an example of the Hexdump for the executable of exercise Ex. 3.2. In the example, each line contains the following information, separated by spaces:</p>
<ol>
<li>Offset of the first byte in the line (in hexadecimal). The offset is a number indicating the distance of the information (in this case, the first byte of the line) from a reference point (in this case, the beginning of the file).</li>
<li>16 hexadecimal numbers, each representing a byte of the file.</li>
<li>16 ASCII characters enclosed in "|". This is an attempt to decode the bytes into ASCII. The character "." may indicate a value that doesn't represent valid or printable ASCII characters.</li>
</ol>
<p>As a first step, you should carefully read the description of the ELF format (particularly the tables for File Header, Program Header, and Section Header).</p>
<h3 id="notes-and-tips-5"><a class="header" href="#notes-and-tips-5">Notes and Tips</a></h3>
<ul>
<li>All numbers are represented in hexadecimal.</li>
<li>Memory words store numbers in little-endian representation. Therefore, the bytes "34 00 01 00" represent the value 0x10034 in 4 bytes.</li>
<li>Refer to the <a href="http://riscvbook.com/portuguese/">Practical Guide to RISC-V: Atlas of an Open Architecture</a> to decode the instructions. Especially, consult the beginning of Chapter 2 and Figure 2.3.</li>
</ul>
<h3 id="example-solution"><a class="header" href="#example-solution">Example Solution</a></h3>
<p>To make your job easier, we will discuss how to read the ELF file given above. The following listing contains the same file contents, but with color marks to simplify the discussion.</p>
<pre><code>
00000000  7f 45 4c 46 01 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|
00000010  02 00 f3 00 01 00 00 00  b4 10 01 00 34 00 00 00  |............4...|
00000020  <mark style="background:transparent;color: purple">a4 01 00 00</mark> 04 00 00 00  34 00 20 00 04 00 28 00  |........4. ...(.|
00000030  <mark style="background:transparent;color: blue">06 00</mark> <mark style="background:transparent;color: red">04 00</mark> 06 00 00 00  34 00 00 00 34 00 01 00  |........4...4...|
00000040  34 00 01 00 80 00 00 00  80 00 00 00 04 00 00 00  |4...............|
00000050  04 00 00 00 01 00 00 00  00 00 00 00 00 00 01 00  |................|
00000060  00 00 01 00 b4 00 00 00  b4 00 00 00 04 00 00 00  |................|
00000070  00 10 00 00 01 00 00 00  b4 00 00 00 b4 10 01 00  |................|
00000080  b4 10 01 00 48 00 00 00  48 00 00 00 05 00 00 00  |....H...H.......|
00000090  00 10 00 00 51 e5 74 64  00 00 00 00 00 00 00 00  |....Q.td........|
000000a0  00 00 00 00 00 00 00 00  00 00 00 00 06 00 00 00  |................|
000000b0  00 00 00 00 37 15 02 00  13 05 95 f4 93 05 00 00  |....7...........|
000000c0  13 06 00 00 93 06 f0 ff  93 72 15 00 b3 85 55 00  |.........r....U.|
000000d0  33 46 56 00 93 86 16 00  13 55 15 00 e3 16 05 fe  |3FV......U......|
000000e0  17 05 00 00 13 05 85 01  23 20 b5 00 13 05 00 00  |........# ......|
000000f0  93 08 d0 05 73 00 00 00  00 00 00 00 4c 69 6e 6b  |....s.......Link|
00000100  65 72 3a 20 4c 4c 44 20  31 30 2e 30 2e 30 00 00  |er: LLD 10.0.0..|
00000110  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000120  01 00 00 00 e0 10 01 00  00 00 00 00 00 00 01 00  |................|
00000130  05 00 00 00 c8 10 01 00  00 00 00 00 00 00 01 00  |................|
00000140  0a 00 00 00 f8 10 01 00  00 00 00 00 00 00 01 00  |................|
00000150  11 00 00 00 b4 10 01 00  00 00 00 00 10 00 01 00  |................|
00000160  00 2e 74 65 78 74 00 2e  63 6f 6d 6d 65 6e 74 00  |..text..comment.|
00000170  2e 73 79 6d 74 61 62 00  2e 73 68 73 74 72 74 61  |.symtab..shstrta|
00000180  62 00 2e 73 74 72 74 61  62 00 00 65 6e 64 00 6c  |b..strtab..end.l|
00000190  6f 6f 70 00 72 65 73 75  6c 74 00 5f 73 74 61 72  |oop.result._star|
000001a0  74 00 00 00<mark style="background: green"> </mark>00 00 00 00  00 00 00 00 00 00 00 00  |t...............|
000001b0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
000001c0  00 00 00 00 00 00 00 00  00 00 00 00<mark style="background: green"> </mark><mark style="background:transparent;color: lightblue">01 00 00 00</mark>  |................|
000001d0  01 00 00 00 06 00 00 00  b4 10 01 00 b4 00 00 00  |................|
000001e0  48 00 00 00 00 00 00 00  00 00 00 00 04 00 00 00  |H...............|
000001f0  00 00 00 00<mark style="background: green"> </mark>07 00 00 00  01 00 00 00 30 00 00 00  |............0...|
00000200  00 00 00 00 fc 00 00 00  13 00 00 00 00 00 00 00  |................|
00000210  00 00 00 00 01 00 00 00  01 00 00 00<mark style="background: green"> </mark>10 00 00 00  |................|
00000220  02 00 00 00 00 00 00 00  00 00 00 00 10 01 00 00  |................|
00000230  50 00 00 00 05 00 00 00  04 00 00 00 04 00 00 00  |P...............|
00000240  10 00 00 00<mark style="background: green"> </mark><mark style="background:transparent;color: orange">18 00 00 00  03 00 00 00 00 00 00 00</mark>  |................|
00000250  <mark style="background:transparent;color: orange">00 00 00 00 60 01 00 00  2a 00 00 00 00 00 00 00</mark>  |....`...*.......|
00000260  <mark style="background:transparent;color: orange">00 00 00 00 01 00 00 00  00 00 00 00</mark><mark style="background: green"> </mark>22 00 00 00  |............"...|
00000270  03 00 00 00 00 00 00 00  00 00 00 00 8a 01 00 00  |................|
00000280  18 00 00 00 00 00 00 00  00 00 00 00 01 00 00 00  |................|
00000290  00 00 00 00                                       |....|
00000294
</code></pre>
<ol>
<li>
<p>First, we must identify the values of fields e_shoff, e_shnum, and e_shstrndx (see their description on the Wikipedia page related to the ELF format), which are colored in <mark style="background:transparent;color: purple">purple</mark>, <mark style="background:transparent;color:blue">blue</mark>, and <mark style="background:transparent;color:red">red</mark>, respectively.</p>
<ul>
<li>The value of the e_shoff field is 0x000001a4 (recall the little-endian representation), indicating that the Section Headers start at this offset.</li>
</ul>
</li>
<li>
<p>According to the ELF format, we know that each Section Header contains 0x28 bytes. Thus, we marked the beginning of each of them in <mark style="background: green">green</mark>.</p>
</li>
<li>
<p>e_shstrndx contains the value 4, indicating that Section Header number 4 (counting from 0) is the header of shstrtab, which stores the information about the names of the sections. We colored its content in <mark style="background:transparent;color:orange">orange</mark>.</p>
</li>
<li>
<p>The sh_offset field of Section Header 4 (orange number with gray background) stores the address of shstrtab: 0x00000160.</p>
</li>
<li>
<p>The sh_name field of Section Header 4 is the offset (from the beginning of the shstrtab section) to the string representing the section's name. For example, Section Header number 1 has an offset of 0x1 (highlighted in cyan), so its name is the string at position 0x00000160 + 0x1. In other words, this is the Header of the ".text" section, which stores the executable's instructions.</p>
</li>
<li>
<p>Our objective is to find the ".symtab" and ".strtab" sections, which respectively store the addresses and names of the symbols.</p>
</li>
<li>
<p>By checking the name of each section, we identified that Section Headers number 3 and 5 represent the ".symtab" and ".strtab" sections.</p>
</li>
<li>
<p>Evaluating the sh_offset field of each of them, we know that the ".symtab" and ".strtab" sections are located at addresses 0x00000110 and 0x0000018a. Evaluating the sh_size field, we know that their sizes are 0x50 and 0x18 bytes, respectively.</p>
</li>
<li>
<p>In the .symtab section, for each symbol:</p>
<ul>
<li>The first 4 bytes represent the offset of the symbol's name in the ".strtab" section.</li>
<li>The next 4 bytes represent the symbol's address in the program's memory.</li>
<li>The last 8 bytes represent other information about the symbol (not useful to us at this moment).</li>
</ul>
</li>
<li>
<p>Copying the sections here:</p>
<ul>
<li>.symtab: (offsets to .strtab are highlighted in blue, addresses in red)</li>
</ul>
<pre><code>
00000110  <mark style="background: blue">00 00 00 00 00 00 00 00</mark>  <mark style="background: red">00 00 00 00 00 00 00 00</mark>  |................|
00000120  <mark style="background: blue">01 00 00 00 e0 10 01 00</mark>  <mark style="background: red">00 00 00 00 00 00 01 00</mark>  |................|
00000130  <mark style="background: blue">05 00 00 00 c8 10 01 00</mark>  <mark style="background: red">00 00 00 00 00 00 01 00</mark>  |................|
00000140  <mark style="background: blue">0a 00 00 00 f8 10 01 00</mark>  <mark style="background: red">00 00 00 00 00 00 01 00</mark>  |................|
00000150  <mark style="background: blue">11 00 00 00 b4 10 01 00</mark>  <mark style="background: red">00 00 00 00 10 00 01 00</mark>  |................|
</code></pre>
<ul>
<li>.strtab:</li>
</ul>
<pre><code>
0000180  62 00 2e 73 74 72 74 61  62 00 <mark style="background: green">00 65 6e 64 00 6c</mark>  |b..strtab.<mark style="background: green">.end.l</mark>|
00000190  <mark style="background: green">6f 6f 70 00 72 65 73 75  6c 74 00 5f 73 74 61 72</mark>  |<mark style="background: green">oop.result._star</mark>|
000001a0  <mark style="background: green">74 00</mark> 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |<mark style="background: green">t.</mark>..............|
</code></pre>
</li>
<li>
<p>Now we can easily identify the names and addresses of the symbols:</p>
<ul>
<li>The first line of the symtab is null, and we can ignore it.</li>
<li>The second line tells us that the symbol with the name at offset 0x1 is at address 0x000110e0. Consulting the strtab, we see that offset 0x1 is occupied by the name "end" (String defined by the bytes 65 6e 64 00. Notice that the string is terminated with the NULL character, with a value of 00).</li>
<li>The third line tells us that the symbol with the name at offset 0x5 is at address 0x000110c8. Consulting the strtab, we see that offset 0x5 is occupied by the name "loop".</li>
<li>Following this same logic, we can identify the name and address of all symbols.</li>
</ul>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bit-manipulation-and-instruction-encoding"><a class="header" href="#bit-manipulation-and-instruction-encoding">Bit Manipulation and Instruction Encoding</a></h1>
<p>This chapter contains a set of exercises to help students learn about bit manipulation and how 32 bit RISC-V instructions are encoded.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="bit-masking-and-shift-operations"><a class="header" href="#bit-masking-and-shift-operations">Bit Masking and Shift Operations</a></h2>
<h3 id="instructions-6"><a class="header" href="#instructions-6">Instructions</a></h3>
<p>Write a C program that reads 5 numbers from the user input in decimal format and packs its bits to a single 32 bit value that will be written to the standard output as a hexadecimal value. The program should handle both positive and negative numbers.</p>
<p>A function with the signature <strong>void pack(int input, int start_bit, int end_bit, int *val)</strong> might be a good start for this exercise.</p>
<p>The previously presented functions <strong>read</strong> and <strong>write</strong> can be used for reading/writing information from/to the standard input/output. The code snippet below can be used to write the resulting hexadecimal value to STDOUT (note that it uses the <strong>write</strong> function).</p>
<pre><code class="language-c">void hex_code(int val){
    char hex[11];
    unsigned int uval = (unsigned int) val, aux;

    hex[0] = '0';
    hex[1] = 'x';
    hex[10] = '\n';

    for (int i = 9; i &gt; 1; i--){
        aux = uval % 16;
        if (aux &gt;= 10)
            hex[i] = aux - 10 + 'A';
        else
            hex[i] = aux + '0';
        uval = uval / 16;
    }
    write(1, hex, 11);
}
</code></pre>
<h3 id="input-1"><a class="header" href="#input-1">Input</a></h3>
<ul>
<li>5 signed 4-digit decimal numbers separated by spaces (' '), followed by a newline character ('\n'). The whole input takes up 30 bytes.
<ul>
<li>String Format - <strong>"SDDDD SDDDD SDDDD SDDDD SDDDD\n"</strong></li>
<li><strong>S</strong>: sign, can be either '+' for positive numbers and '-' for negative.</li>
<li><strong>D</strong>: a decimal digit, (0-9)</li>
</ul>
</li>
</ul>
<h3 id="output-1"><a class="header" href="#output-1">Output</a></h3>
<p>After reading all 5 numbers, you must pack their least significant bits (LSB) following the rules listed below:</p>
<ul>
<li>1<sup>st</sup> number: 3 LSB =&gt; Bits 0 - 2</li>
<li>2<sup>nd</sup> number: 8 LSB =&gt; Bits 3 - 10</li>
<li>3<sup>rd</sup> number: 5 LSB =&gt; Bits 11 - 15</li>
<li>4<sup>th</sup> number: 5 LSB =&gt; Bits 16 - 20</li>
<li>5<sup>th</sup> number: 11 LSB =&gt; Bits 21 - 31</li>
</ul>
<div style="text-align:center">
<img src="img/ch05_01_01.png" alt="bit masking"/>
<p><span class="caption">Figure 5.1.1: Bit extraction from 5 32-bit inputs to constitute a single 32-bit output</span></p>
</div>
<h3 id="examples-2"><a class="header" href="#examples-2">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">-0001 -0001 -0001 -0001 -0001</td><td style="text-align: center">0xFFFFFFFF</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: center">+0001 +0001 -0001 -0001 -0001</td><td style="text-align: center">0xFFFFF809</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: center">+0003 -0002 +0025 +0030 +1000</td><td style="text-align: center">0x7D1ECFF3</td></tr>
<tr><td style="text-align: left">4</td><td style="text-align: center">+9999 +9999 +9999 +9999 +9999</td><td style="text-align: center">0xE1EF787F</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-6"><a class="header" href="#notes-and-tips-6">Notes and Tips</a></h3>
<ul>
<li>You may use the C operator for bit manipulation (&lt;&lt;, &gt;&gt;, |, &amp;, ^, …) to implement your function. Suggested readings:
<ul>
<li><a href="https://www.cs.cmu.edu/~ab/15-123S09/lectures/Lecture%2017%20-%20%20Bit%20Operations.pdf">Bit Operations</a></li>
<li><a href="https://web.stanford.edu/class/archive/cs/cs107/cs107.1216/lectures/03/Lecture03.pdf">Bitwise Operators</a></li>
</ul>
</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lIZ0tvQkpPQUFsVUFHd1NvNk9IZ0VFaUpjcFRnQmxlbzE0QmZIZ0RNNkhNRHdBNklBSFFCNk1Cd0FtQVZ3bW9DbHdzVElWUzVnRllFekFiaE1ZTms1dVBnQVpEaG9JQ1FBbFZGRFNYUU1qVXd0ck8wZG5TeG9PR0JoVUdsSW9QSjgtRUVDWUlKb0pOeDRBVVFBUEFGWTRBRVllVkViU1ZCaGJBZ1VsRDFVTkJpWStJSjRlWEpneU9uc2lyZ0FLQUVvSm1DbXBnbnRwT2xYS3paNVNBQXNTYzNzb0hnQmVIZ0tBZDBFUmNTa1pKYk1tbVJvU1ZCNW04emFNRHdBRUpRWGdBV1VJQUd0WU1nZUJSYkR3MUtjOUx3QVBLN0NERlBMbEZZSFRaT1hoMEJKY1hnM2U0OFNMUk9MRTdqN1NhYkU1bkdZRklvbFdibUJEMkFqSEpaRXhLNG9MMHFhTWdqbktEbUNDMld4d0hwa040YlE1cEFEQ1JnUVVGcVdLcXVDRm16ZzF3QWZPdEZacytTVHpFU1BMU0JRcmpVVFNQWTZCc1JlWTBBVUdEUTRMbDJPclVETG5LUlZuU2JadGRISWRWTitIcG9CSTRLZ0lIUUpBQlBRR2tlWS1iUTY2MkhIWE9pNFNxVit1WGh0SUFGWDlQQTZTd0FqdlotV3lWbVljTVhuY1IyRTVZeldZcURFNFdBOFdwbVlBTFFBQmxISFJIWTU0RStINDlITTZuYzdhSmtGMnVEMlpBdzhhQURFZDd1ZDh1dFUyMTV0K0Y2a0VTNEhwN0RCV1hsQVVzSURnQUVacks2R2lEbVZOc1ZiWEc1UHo4TUdBUDRac2VEYkJsbURLbktLZWFTdEtzcDlzZVpobG1RUEFBRXc4Tld0WmtQV2piTmxCNWl0Z2c3YW9KMkVqZHIyOHJHZ09JQUFOU0xqd2RHVHRPczVNWXVCNjRjZTFHYm51VzRBQnpEZ0FuT3hxNVVYdzB5cXZHdnBYamVtcjNvK0w0R25DQUhmcStmN0tVQmF3Z2NhWUdIQkJ3cjRUQkJid1pSaXBJZVdBRE1HRTFuV2VRTmlKaW90aUV4R2tlUnhuOW1rakhEcFowN29ZeHFITkF4bzdtY09ERnRIT3dsSHFKWmliZ0E3QUFJbTA5UktqdTVrUmU1cDRTUmUwbTNqQWNuUHErNzdxVCtWeHFWK0drOEZwaW82WnNlbEhBWjRxd1JSeFptU2hBQXNWbFlacWRtUlE1K0dFYzU5aGRxUVBadVp4SGtDUk5Ba01aTlUwMFROMDJUUXRFMXBXTjBXTlBVaVZiakZ2RXhWdUsyaVJsN0NTWmUxNDVYbENsdmtwWlhGYVZnSEFjVzFWVExWZWhjQmhCSThKY056TlA0SDA4QUFQRGNZVS1WQU5FMFdzd0RGdTlkRHdrWXZiWEhWWnl1akltSytzWnRYNldjaGx3ZjZKbkdnQUJzaHZBQUNUQUZBMmg0ejF4cU9XMnZva1lOWkhEVTFZMVRORGZTdy1CQURhdzRBTHFVMVJyTzJPei1vYzIwdlB1UkdaN0hkbHNrWWZKQlZYWGRxazhQKzEwckpWb21QVlZlSlRDQk9iMWVZZWl3REVjQVdvNHBJOEhxbDBRMk5wcmNPYU5La0J6Wmp3U2J6aG0rVTNQdzdtNG91NmJFaWtBUTJ1S3U5eURRN1lQdzNNT1FlSEZBZWdZZDduNytxNzJ6K3dRWE9ld0FoSkg0UGl6dzczd1BCQXczQW52dHU2bjVoT0RBeUFuTG5MMTBHOXFDOEo5RmJBLTl0eTlvSEgyZ3puek9iS0hrby1EUnhmNjZYS2NCeHpVRGM5SGlycTFSLWZoLURTenp6OEFCVUZiRG1zbGdZUVgtb0VJT2JUb3lHN20yMTRKOU95QWhzd01ieTltSjdOekwzaTdudlUrRWdjRSs4TW55NnZUSXowcnVKRUdvazdRT2cySGpBQTRtSFZBZ0lTYkwyME9ZSGdjVU9CM0JnSy1TVVBCRXdjQWRFY2NzSjk5Q0dHTUlvZHdLaGVCZEVLUFlUVS0wSUE4R09FU1BRVndTWjNGZ0lMTzQ1Z0JDeEhDT1llZ2NZZWlvaWZONFFvcEJXSGhDV0MtTithc2VCTU9RUndTVVZ3ekJkRmFHMGUyaVF6RDZpV0RVS0FOQklSVUprS2dGWWYxWEQ2bk1IallzbFZkWUtnRnJBQU1ZQllCeUVnSTBIdWh3Z0dPaDRCQ0U0QnRYN0xCY2NjYzBNTnlwcnlXTFlxY1BBckV3RFdEUklKc0FJS21LbU1jTG9ubzdDb0NXQUFOeGlDc2EyaHgzcjJHU1JJZUdXVDlSNUtqanFkNk1UR2p3ek1NSlNvT282NE55YnZES092MC1vOEY0c0RidWFUZzZOemhQWUVwTnhNa3hCNEFBVWdyQUFObW5ySFdXblNlRDZrQmh2ZHl4VDRacUMtRlhBMmVDbFRISGpDcWNPRDV4bURuWGd4SGdBQnllUWV5T0dyTG9PczFBOGdBd2IxQ1ZveG8wOUpBRUZRRE1yb2N5Rm5JQ1dVWUZaYXo0bWJKS1dFdlp3NGprMEJPV2NpNVN3cm03T0tkUEhwMlR1bFpKNEZ2Tm93eWRTejBjUnNOYVpnSVZkRHhGRW5nU0FORkxGZ0p5VWdjaExSVUNmS0NPUXZScFRrdUpUd0xKcVRDbnRNZ0FRVFJrYzVDY0R1REllR2JRZzVWS1dPOVp1ZFRMZ05LV0ZTdUFOTEFta3ZGYUNhNVBLdTVoSVpXTlpsbWloNjRzUVRJYWVVd09WY3BYamNWQ1FkWjZFcklUd0FBWkRjWlZRZGxYd3l0WDlCcFVxYVZCeU5lYkoxLTA3WGtHNE5LMGdRYzRWbW93Z0FQMlZiVk9GQUFmRzRUcWc2b3JwVEViRmdvRlJJMmhyLU5HUnA4VHRLeVZoZUdITXA2TXQ0QlFBZ25MNjZSeURnS21BUkxTa2dBQ05tNVdvSWk0OENkbU5MbWNoVUppM3JlWk9RWVZtMmlSRm0wTnR6UU8xVVJGb014dFBNK2FIQTVxaGJ0UEJ6S2l4MU56U3ByMStYdE1GYTNCcDMxNVU4RVZhSmZPcUJZVER6T09ZeWdZTEcySHltTzlPRnU3UlQ3c3VXMnVjeDZQcHh5V0FVSGRnTk5haVRQVk9MSm1xbzBTQ3doeUxrUEo2VUdybmZYQmROVEMzMU4rTTBoVnJUalNqS1NURUxDRTlQYVRKNEJ2YURva1BvbHVOYXF2Wk5FOW03UG1Rd0t1Y0h2M09FUXlzRGtrcDVueGdESzFPUS15OW5YTHczc3o5dWg3ay1EUTZKRjEySEJ4NGJDUVJtRVN4QnhwdEk1UGNqU0JiQlVkcExSLVpBTEdQN0pZKzVYTithdmI0VHhaQ1lqQ0hKNXlCcFduU2U2ZHRQVnNReUxYbWNKWmo1dHFqaWxtamRnRzFxZFFSTWlOQUVuRGprUHZSakI0OWx5R2RNVXVKR3lsTXlCV0ZtcW9Db1FLbVBKRTBlUlFaWTI0QkFETVEyeUJNQ2dBNEV3TmtCQUVzeGJ5SEZ1QUpBSUR5RXdLbVdzZUJZdFFHUUZsZ2dFQWxSNWJUSVZqTHhYU3NRRGlwVmdyNldZQ1pleTF1UnJxQnFzdGRxOWxvUUhXdXV0YksyQ2ZyelhCc1FEVUNOb3JKWHNzQ0JHNzBDQUw5ZlFFQTRKNkdKR2lud2NFYUNONWIxQnlBYU1RQndDeE1nNERDWllMRkhpRlc4QVdNdkVTS3NKc0tCb0JZUDVFQTJnOEFFRVRMUUdJRWhVc1lHQUs5a0E0ZEVucU9jQWw3UVlPZ0E=" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="risc-v-instruction-encoding"><a class="header" href="#risc-v-instruction-encoding">RISC-V Instruction Encoding</a></h2>
<h3 id="instructions-7"><a class="header" href="#instructions-7">Instructions</a></h3>
<p>Write a C program that reads a string with a RISC-V instruction from STDIN, parses its content in a way of obtaining its fields, packs the instruction's fields in a 32 bit value and writes the hexadecimal representation of the instruction to STDOUT.</p>
<p>The code snippet below can be used to compare strings as standard C libraries such as string.h are not available in the simulator. It is similar to string.h's strcmp but it has the number of characters to be compared as a parameter.</p>
<pre><code class="language-c">int strcmp_custom(char *str1, char *str2, int n_char){
    for (int i = 0; i &lt; n_char; i++){
        if (str1[i] &lt; str2 [i])
            return -1;
        else if (str1[i] &gt; str2 [i])
            return 1;
    }
    return 0;
}
</code></pre>
<p>The set of instructions that need to be encoded by your program is presented in the table below, alongside its opcode, instruction type and other fields (e.g. funct3 and funct7) if applicable.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Instruction</th><th style="text-align: center">Inst Syntax</th><th style="text-align: center">Inst Type</th><th style="text-align: center">OPCODE</th><th style="text-align: center">FUNCT3</th><th style="text-align: center">FUNCT7</th></tr></thead><tbody>
<tr><td style="text-align: left">lui</td><td style="text-align: center">lui rd, imm</td><td style="text-align: center">U</td><td style="text-align: center">0110111</td><td style="text-align: center">N/A</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">auipc</td><td style="text-align: center">auipc rd, imm</td><td style="text-align: center">U</td><td style="text-align: center">0010111</td><td style="text-align: center">N/A</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">jal</td><td style="text-align: center">jal rd, imm</td><td style="text-align: center">J</td><td style="text-align: center">1101111</td><td style="text-align: center">N/A</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">jalr</td><td style="text-align: center">jalr rd, imm(rs1)</td><td style="text-align: center">I</td><td style="text-align: center">1100111</td><td style="text-align: center">000</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">beq</td><td style="text-align: center">beq rs1, rs2, imm</td><td style="text-align: center">B</td><td style="text-align: center">1100011</td><td style="text-align: center">000</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">bne</td><td style="text-align: center">bne rs1, rs2, imm</td><td style="text-align: center">B</td><td style="text-align: center">1100011</td><td style="text-align: center">001</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">blt</td><td style="text-align: center">blt rs1, rs2, imm</td><td style="text-align: center">B</td><td style="text-align: center">1100011</td><td style="text-align: center">100</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">bge</td><td style="text-align: center">bge rs1, rs2, imm</td><td style="text-align: center">B</td><td style="text-align: center">1100011</td><td style="text-align: center">101</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">bltu</td><td style="text-align: center">bltu rs1, rs2, imm</td><td style="text-align: center">B</td><td style="text-align: center">1100011</td><td style="text-align: center">110</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">bgeu</td><td style="text-align: center">bgeu rs1, rs2, imm</td><td style="text-align: center">B</td><td style="text-align: center">1100011</td><td style="text-align: center">111</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">lb</td><td style="text-align: center">lb rd, imm(rs1)</td><td style="text-align: center">I</td><td style="text-align: center">0000011</td><td style="text-align: center">000</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">lh</td><td style="text-align: center">lh rd, imm(rs1)</td><td style="text-align: center">I</td><td style="text-align: center">0000011</td><td style="text-align: center">001</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">lw</td><td style="text-align: center">lw rd, imm(rs1)</td><td style="text-align: center">I</td><td style="text-align: center">0000011</td><td style="text-align: center">010</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">lbu</td><td style="text-align: center">lbu rd, imm(rs1)</td><td style="text-align: center">I</td><td style="text-align: center">0000011</td><td style="text-align: center">100</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">lhu</td><td style="text-align: center">lhu rd, imm(rs1)</td><td style="text-align: center">I</td><td style="text-align: center">0000011</td><td style="text-align: center">101</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">sb</td><td style="text-align: center">sb rs2, imm(rs1)</td><td style="text-align: center">S</td><td style="text-align: center">0100011</td><td style="text-align: center">000</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">sh</td><td style="text-align: center">sh rs2, imm(rs1)</td><td style="text-align: center">S</td><td style="text-align: center">0100011</td><td style="text-align: center">001</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">sw</td><td style="text-align: center">sw rs2, imm(rs1)</td><td style="text-align: center">S</td><td style="text-align: center">0100011</td><td style="text-align: center">010</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">addi</td><td style="text-align: center">addi rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">000</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">slti</td><td style="text-align: center">slti rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">010</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">sltiu</td><td style="text-align: center">sltiu rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">011</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">xori</td><td style="text-align: center">xori rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">100</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">ori</td><td style="text-align: center">ori rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">110</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">andi</td><td style="text-align: center">andi rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">111</td><td style="text-align: center">N/A</td></tr>
<tr><td style="text-align: left">slli</td><td style="text-align: center">slli rd, rs1, imm**</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">001</td><td style="text-align: center">0000000*</td></tr>
<tr><td style="text-align: left">srli</td><td style="text-align: center">srli rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">101</td><td style="text-align: center">0000000*</td></tr>
<tr><td style="text-align: left">srai</td><td style="text-align: center">srai rd, rs1, imm</td><td style="text-align: center">I</td><td style="text-align: center">0010011</td><td style="text-align: center">101</td><td style="text-align: center">0100000*</td></tr>
<tr><td style="text-align: left">add</td><td style="text-align: center">add rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">000</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">sub</td><td style="text-align: center">sub rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">000</td><td style="text-align: center">0100000</td></tr>
<tr><td style="text-align: left">sll</td><td style="text-align: center">sll rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">001</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">slt</td><td style="text-align: center">slt rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">010</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">sltu</td><td style="text-align: center">sltu rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">011</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">xor</td><td style="text-align: center">xor rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">100</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">srl</td><td style="text-align: center">srl rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">101</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">sra</td><td style="text-align: center">sra rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">101</td><td style="text-align: center">0100000</td></tr>
<tr><td style="text-align: left">or</td><td style="text-align: center">or rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">110</td><td style="text-align: center">0000000</td></tr>
<tr><td style="text-align: left">and</td><td style="text-align: center">and rd, rs1, rs2</td><td style="text-align: center">R</td><td style="text-align: center">0110011</td><td style="text-align: center">111</td><td style="text-align: center">0000000</td></tr>
</tbody></table>
</div>
<p><span class="caption">* slli, srli and srai are type I instructions but its immediate takes up only 5 bits, the remaining 7 bits are filled with a funct7 value.</br>
** The imm field may also appear as shamt, which stands for shift amount.</span></p>
<h3 id="input-2"><a class="header" href="#input-2">Input</a></h3>
<ul>
<li>RV32I assembly instruction string with at most 40 bytes. There will be no pseudo-instructions and the registers will be referenced with their x-name (e.g. x2, x10)</li>
</ul>
<h3 id="output-2"><a class="header" href="#output-2">Output</a></h3>
<ul>
<li>The 32 bit encoded instruction in its Big Endian hexadecimal representation (hex_code() from the previous exercise can be used).</li>
</ul>
<h3 id="examples-3"><a class="header" href="#examples-3">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">lb x10, 4(x9)</td><td style="text-align: center">0x00448503</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: center">and x31, x20, x25</td><td style="text-align: center">0x019A7FB3</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: center">slti x12, x13, -1</td><td style="text-align: center">0xFFF6A613</td></tr>
<tr><td style="text-align: left">4</td><td style="text-align: center">bge x7, x0, 256</td><td style="text-align: center">0x1003D063</td></tr>
<tr><td style="text-align: left">5</td><td style="text-align: center">jalr x1, -32(x9)</td><td style="text-align: center">0xFE0480E7</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-7"><a class="header" href="#notes-and-tips-7">Notes and Tips</a></h3>
<ul>
<li>This exercise depends on some things used in <a href="ch05-01-bit-masking-shift-operations.html">Exercise 5.1</a>, such as hex_code() and pack() functions, so it is recommended to do Exercise 5.1 first.</li>
<li>You can use this <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch05-02/base_code.c">base code</a> as a starting point, or build your solution from scratch if you want.</li>
<li>Refer to the <a href="http://riscvbook.com/portuguese/">Practical Guide to RISC-V: Atlas of an Open Architecture</a> to check how each instruction is encoded. Especially, consult the beginning of Chapter 2 and Figure 2.3.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lIZ0tvQkpPQUFsVUFHd1NvNk9IZ0VFaUpjcFRnQmxlbzE0QmZIZ0RNNkhNRHdBNklBSFFCNk1Cd0FtQVZ3bW9DbHdzVElWUzVnRllFekFiaE1ZTms1dVBnQVpEaG9JQ1FBbFZGRFNYUU1qVXd0ck8wZG5TeG9PR0JoVUdsSW9QSjgtRUVDWUlKb0pOeDRBVVFBUEFGWTRBQ1llVkViU1ZCaGJBZ1VsRDFVTkJpWStJSjRlWEpneU9uc2lyZ0FLQUVvSm1DbXBnbnRwT2xYS3paNVNBQXNTYzNzb0hnQmVIZ0tBZDBFUmNTa1pKYk1tbVJvU1ZCNW04emFNRHhZa0kxQUJoQUMwQURVZUVKWnFSNWtVU2h0NmpCY3JaWU1nekNzRHBzbkx3NkFrdUx3YnZjZUpGb25GQ2R4OXBOTmljempNQ29pOGdSekFoN0FSamtzQ1lsc1VGYVZONmF6WUhNRnNVV2RkMW9jcG1ZSkJjeklDQU5wbU9pMk9Cc01CbU9SbUFSYXRJQUJnQWpJYWpjYXpBQmRIQUN6Wm1DQVhCQTBCVThaVWdWWHFzQ2EzQnBYVmVzejZvMm13MFdxMGJhVm1id3hKMHV0MGF2Vm1BQlNjWkF4c0RRWkFsdXRNcEFFWWtkQ2pLc043ckFjRG9iU1RRaVRLY0RTZjkrdURtYlNBQ05VQUJIZk91d3Vsb3RKZ0JDbFpOLXJOdnBBdGZyb2NPWmtiQlhiZEU3Ylc3dzc3dzZycHByUnJIMHFiRWxJTTduQysxSUNYQjVYUStQLW8zWVpBamJRdTVMODlqaS03dGRQYVJOYVl6NDV0ViszOWx2WFlmQjVIcStBNnJzdUpvWGhPVjVvTCttRE9nV2Q3N21rUUZtQ2VhYkhrT0g2YnJLamEzaHFkN2xtdXo1b1FhNTdwaUdXRWdCSXh5NFI2K0hEaFd3NjFvT3hGK3V1WkVOcktkdzBjV3BZRVl4VEV2bjY0SHNaK1dZU0kyTUZLdkJlRzhmUmhITVpXcEdZWmVWR1NYQkhaRm5SQjRNUWVUR2dXZTc3a1plQkE0YkIwYUZqSlpiRG1vTllnWUpJNUtVWmtHY3R4V2xwRFpqRjJTeERtR1J4SUFFRnhablNiUnNrSGg1dWxlYlpkWWlSUkVDMk9pZjczaDZmRzZRRytra2RGeW5PZHVVQ0pZaFpnNlNSQTcyUUdFRmZnUU9WcWVaQ0VBV2toV3NjVjNtZ1ZsWDZORnd1VkJScC03SlhKLUdOWXBtVk9WKzdWNWJWQlZydjFZR0RYNUZBSloxczQxVDEya1RRcFlHK2FKYVFWUklIVlNWMTg2Y2hBWUE3cjFxV1RhZDhtampGeGwwTnRlVUhVZEtWRmF0QmtYWTVma0VIUTBCM2NjaDNIY3RmWFBhK2JFUlhwWlZabkZ0aDVYUUFETVNheExaWjBaYTkwMGJXWTJ5bWJ0QzFkakRjTUk0RHJIUlNEVEZnNXRFZ1NGRHNQRHZEbm1JdzF5TWsyajI0VTdqTlA0eU93bXBhRFYzWmFRVlh3ZGpsTUh0VEVXMCt6VFY2U2pGRnRYbTgxN2pqVk40K2xLR2taenhQYytWTjNNd3JyTks4bXdNWldyTFZaaDlFQmEwTGl2MlcrVVdHME5XWmNHYmFUQ3dhVmFXeHpCdVhVYmFTelE3WmhPMEpvdkd1TFhNdGRvLUtma0s1eFFPWUVOd0QwWkJ2S2pJQ2drWUNCUUxVNHBWTGdEWndOY0FCOFVxYmp3UEpFdVlCSWVOU2ZJYlZNQks4M1FHd1IyZ0JRTURRY0M1T3dhZW9MSHppa0tzTkliYm8yb2Jmd2VqUUJJY0NvQkFOMEFKNkF2QzlnLUtIbjZWeE80ZW5LeUZ6Ui1GWGZ4MzVBQXEzYzhJYVBEZ2p3NGs4RXNMYnoyUVNJckZxRFlSOFE3Qk9PUGw4eEZBcEJUOXZQY05tSmpZOEkwSm81QUFCWWxpTkFBSnkzMzVGbkt1QnBHaitpQVVBZ0FITTBmVXNNb0cyMDJQd051U0FDUndEMFBZVkVHZEFSTEFnRGdSc2F3cmo1d2dPWWVFYkJWalhCdUkyR2hEQXdEME1YcHVXK1M4Y1NDalhwSFRlYW80N2YwVHZ2TWdQQU9nbjFtdWZTKzNjYjUzdzJnLUVJejlXejJEZmgtTCtDZEM1ZXo2UC1hR2hvNUNORGFQcWZSYlJtZ21IUVQtV0JSb3dIeUFBT3dBREVleG9NemhncVlXQ1U2VDA3dmd3aFNKaUdrUElYbkhnMURhR3NJb1l3NWhkQzFqc09sSnd3NHk4NlM4STNqSFFSR2pMd2lONE5EWStQQUtyRkNrVmZET3Q5b0diZ1VVLVR1eWpWR2YyU1JZeG1PU0FGdEgwWWFhR2Nod1JCbk1UQXYwalE3R2RJQUd6eUM2UTBzeHppTEZ1UFlCNHZCQkRtUXdGOFdRaWhWRHdraElZVHdKaHdTMkVOaGlac09KUEN6aUpLM3BVNFJCOGdHWk92RDhDK2VUWkdGT2xNVWhBU2pYN2JUVWJzelJrNDBELXhzZm9veFlqbWhkSUdYSWg1STRBSCttaGdBRVgxRjBweDN6QzdESndaNDhaUkR6NStKbVlFdVo5Q3JoaE9XWkUxWjFwSzdXZ2p0c2dSM2NVbVFUU2I4VEpPWTZDNUprWGtBcEdETG5YSlViY2lwZUtxblpoaUtTZ0JUVG9adEZBUkFyNTV5S0w2ZzZmVWZVU0Q5VDFCc2R5bHhmQnBqdU53VjRpWlV6LUdVSVJhaWhaU3lXRXJJMm1zcVltTFB4NGlPTjNkVXRoSlJkUDhLWVQ4ZWd1RG54bUtJeFVBQnJWQVU4NUFBRGNZanozTkR3RGdlZ2VBQUhsR3plRUtGNFhvdERuQkxBamlLT2VFeUNBckRXTUFCc09yUHA5Q01GLVNVRGRlZ3lBZ0QwZFJ0cjdVOENkWEtWQUd6NGxiS2pra2hsTUNBQUdoS0FBa3dCQkg2dDBDZkt0bWJ0Q2x2RmRTMHBOejM3MHAzakE2dXMwRTJDTVZQcVQyaHc0MjJEN2QzUlVob2gyWU1sU002VjBLZkd3dW1RRW9KcXJRbUxNUldpbUJHcjFuY0xwSHFxQXRnQURVaDdkMkx5eFFrcU9laFlBeEJMTTRSd3hJZUE1d1ZkR21CeGR1Q2x5cEtRRjBOYXk3M3ZLSzZtNDJLbzQtcnZkdUFndTdEZzZ1UUo5V3dQd2JqNmdnNXNLQUhyZzBYcG9YcTM5WUdCMnVvQUlUd2FqUllxWU9yNENDSUdJQnRESUh0aGdmTUU0R0F5QVRpRWYwT2FwWU9yTGczRU5NYXk0QUFlVzRYOXdNOENnTWVnajNiTmpRYmlqOFE5NUhDM29iSUxlcWpwQUNDS2lnT2FSRGh3b21hTEU3QnlVU3hOTS1BQUZTSDMxR3NTdzU4U1Bkd0lNMC1OYW1MRnZxOExabDBWNllBM3QweGFTVXVtY1FXSjFZMkNRSEEtNDNGcytZUnVxYjAyMmI3cG9tdTlnNjQ4RkxRQWNSZzZnUUVWYmRQYUhNRHdBRkhBN2d3QjgzRkhnVThPQ1JkMWFJMnoraERER0VVTzRGUXZBdWlGSHNCbkhnWEdJQThHT0FTUFFWd3ExM0ZnS091NDVnQkN4SENPWWVnRThlamV0OVVVWHI0UWxqZWQ4eXNYUVhXc3NjRGlsY013WFJXaHRBLVlrTXd1Y2xnMUNnRFFhMVRXWkI1cTQ2NFhPNWhTME5paVdlME1JN1lBOXpBTEFPUWtCR2pDZUhhZ1d1R3dBQ3lhYmpqbUQwRDU1WVgyVGlsMTdmTWd6U3dudVpQdXpBTlloNmVCUTdpVmQya2FBcUFqb1RUbXErU3drQ2tCNkhYT1FvYlk1VDJrQ3NGOWtHM3NDWmdPeVVnanJuWE9FbE1BYlF1NzBmT0ZMa2ZLVHJJYnVVQ1dHODlsK2FBcnZ4b01jYytXT2NmUTVKOUthSUJBZmdBSElZd2VpbHhnQ3h5SHo3NDQtdElCWlV1QkJTKzNadUpud29QUkp0NFJ6bnVieVRSSU9hRFlycFZuTmlTRWw0eDNYNWdOUUc3T0VicFl6VEJYSUl0NVlPcGhtemVlN2FHc0F6YlJWUGs4cDVLVXRqUXEzMjluTm9PUWtlYWQ2N0FLSElJcGJnK05nSkJBYTFpR0pmUzRXcFplWEZqN2VPN1o4RHZvdDNYZUdLUVhJQ3ZOaXJkVENqeDBZdkx2dWYrK0Q3QVVQTnh3OXg5emV6dzBNZWVCZDZ2ZzdqMDJoUUVEK1o2V2JRa0NZQXA0c1duaWVtZUd6WjU0REx2Y0dwODh3UHIwNzluczB5LU45cndKbERLdkNkd1p1Rkxuc1d1N2Z4Nkg4WVJ2Ty1PZmdpQWZxTUJYU3ZmQUtmeS1qb0FleEhCNXQ2Z1MtM2ZyOHQ4UzkwUjc4SzlFRXE5QlVhOVc4S2Rhc3c4STlnQW85ZTk5RXg5MmMyZys4VURyOGs5cDlVOTA4RjhOb2w4VjhFSjdwU0IxOU5FNjhyOVN3Z0NtODVBZWRnOXlDQUNpOGpoRGM3OWpjYUNXOUdNMjlZQ085NERFQys4ZUNLQzBEWThFQ3I4TlFzQ1o4Uk01OE04czlDQWM4NVpvWlNEQzVOOWI5UzlPYzk5ZzhvOE1sbENRRFdDZUJhREZjWUNIMU85aENBRG85a0RqREI4Sjh6Q05DeENjRDU5RU5ZTVI1NzBGZFB4MU1pNDN0SXNOZ2xNRERxZHU5elJhUXJzcGhidFk0T0E0Qkd4WUFsZ2MwNUF3aUZOaWRyUUlzb3NJaVlnZUJjNFVpZUFqTWFFT0ExQmFFNk1saC1jMlE0b3NqSjRlNW9pQ0E1QXBkOVF0ZHpBS3BkdFVCWGNTaUVjdzRwaGVnMFJPNVlnbGdyMUdoVUJiQWZDcjVZalB4NGlOaDhWTmdPaXVqRlEyaFhVR3hZY1ExVkJTQVFpd2lZQkVpVERHbGZodGNlQXBqZUVnalpqUWp3ajY4NUJtaFZqWWNSamJBSjAtQ05wMWl6aE5pNWlkaUtDOUVWakpqOUFvQk9qampCME1VY1FvbG1pN0JPNGhBbGhRMDVBamllam5BK2pTY3F0R2dhQUVnTTR5TjFJdG9Pb0R3UHBicGh3VFlPb1ZOR2lrTVVNdWd3U21Ba1JoUlVRNVJZTUNBZmk0UkkweGRYdDN0ejRMRWppeGpUak5GempzU3FBdGo1akZqQjhOUTlpMWdMRWFTSGNaaXJpRmpkaTdpWUZEakhqUmpKMDJTbUNMak9UdGp1U2JpV1RoU0tTWGoxVlQwNGozQ0VqNzROaXhTR1RDOFBRNUJEUi1jVFZOeDJUTGp4VEdUeDl2ZDlqN2lLU2hTemlSVGFUZ2lEVEVDcFNMU1pTcVNkMS1EYVFQallOMUIyaUJUdWpzMTQ4Z1RjUXlkR0RwaTZTdVREU0U5TlQtY0ZUU1NoakFpUFFxanRvd1N1YzVBYThkVHBROVRWVHJpVERiajlpZUJMQVRNc2l1QWZoWVJSUncxQVJaeEpRNkFDQU9oSkZLRC1NQ0Fnd0xUQXpyUzFTQkM3VGRTSGluaVRqN2lOUll5YWlsZ1hsRDV0VFRUUFRzTlhqblRReFhUTzRld1BTbmlBU0kxaVRUNS1UOWRpOTlTbXlHQ05URDVvWnQwQml5U05vTlJoeUxTdXpxajR6dmRFRURqTFNPU2d5YlRtemVUV3lHejZUMHlMRE16VHl6VEhURGhZY0R5NHphandEK3pUemR6SjFrelh5MnpSalpUWWszamFRWFRVUlBpNEFCQXB5dWlaemZTaU1GeWI4enpsejd6bWRtU3hFak1JeVBEdHpOeFl4NnlWU0x5VnlIeVd5VXpBTG5pWHllQUdpeHlJSzNUNHdZS3ZUZGQ0Sy1UZUFBeUNMR3pVTFF5eEZEUlZpdHlveWtNUFE5enFTQk1ZekR6YWpBRU1MVmlwZzN5Qkt3RUtLQUwzeWV6Yml1VStUa0sweUpTTXlTTFd5SFRWbDVTcWc5S3BnZ3RQcDAxa2xmaXNscEFhQVh0bUxuUk9DcWR2VGZDZ0RrY1N3UWM0QmRjbGdDQnpMc001QjNMQ2dUajgxV000UnhTOGNBcmpndWhkMGJLdzhxMVExZEJJcURDbTFkMCtkU0FCZHo1dkthQmZLNXlwZ2w5ZllGUjlEWk41aWdEeHk0QTJpVXJ1eWp5Vmc0TGJDcERGOFpDNnBzcVlGOGM4cmk4Q3J2alRMaXJSTGNpeXE3TGVpS3E4RE54TXFRQVBKbkRORjZyWUI4cWFMTzQxQTNMektTcmFqLWR5clo5Y0RwREpja0phcWhxQXFHcXp5Q3JKeldxUHoycTVxWUZKQ2VyeGRxcWRRVnJDNWhxTmhHcXhxb0xKckNocHJkck9yQVR1ckZxZmdFeFRyY0sxcVJyTHFXaTRBNkx0cWV6WnFIcUkwbnJyUUFpa05ncXVoSlIya3pBMWllQWNGSmRZUWU1enFxOFZnTWlzaUdBY2pEUkxjTWlCQUVCZGhRUVpEVmg4amJCQ2pxUXZ6eWl0ZGQwdHl2REtjZ3JaTVFyR2dZYXBjQmtwZGtUOUtlQkY0cnRTUW1oVnMrNHc1Y0FRQVpncjFrQk1CUUFPQk1TV1FSYUJhOGdoYjFRQ0FJQjVCTUE1NVVBOEJCYW9Ca0JaYUlCUVJGYjVobGFwYVlBWmFTQUlBQVZ0YjU0VmJwYTFhTmE3RVRiZGJWYjFiRGFoQnJhemI5YUxiRGFQdEhhOWFEYTVhMUIzYmJhTmFCQjNiZWdJQnZOTzRDQVFpQmRDaHJWR3dPQkdoM2JRN3FCeUE5dEVBT0Jic1pBWEthY1dBK1Y3Rk9sT2t0YThBZ2lEQld3bks2TjBBc0FURVFBWTktSXA1YUFZZ0pBQ0FSYUs3WU1IVWFpNjZNQjZkdEJ0QWdB" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assembly-user-level-programming"><a class="header" href="#assembly-user-level-programming">Assembly User-level Programming</a></h1>
<p>This chapter presents exercises to be done using exclusively RISC-V Assembly Language, in order to fixate the concepts addressed on chapters 4, 5, 6 and &amp; from the textbook.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="square-root"><a class="header" href="#square-root">Square Root</a></h2>
<h3 id="instructions-8"><a class="header" href="#instructions-8">Instructions</a></h3>
<p>Write a program in RISC-V assembly language that computes the approximated square root of integers.</p>
<p>To perform read and write of data from/to the terminal, you must use the read and write syscalls (similarly to exercise 4.1, but now in assembly language)</p>
<p><em>read</em> syscall example:</p>
<pre><code class="language-riscvasm">    li a0, 0  # file descriptor = 0 (stdin)
    la a1, input_address #  buffer to write the data
    li a2, 1  # size (reads only 1 byte)
    li a7, 63 # syscall read (63)
    ecall

input_address: .skip 0x10  # buffer
</code></pre>
<p><em>write</em> syscall example:</p>
<pre><code class="language-riscvasm">    li a0, 1            # file descriptor = 1 (stdout)
    la a1, string       # buffer
    li a2, 19           # size
    li a7, 64           # syscall write (64)
    ecall
string:  .asciz "Hello! It works!!!\n"
</code></pre>
<h3 id="input-3"><a class="header" href="#input-3">Input</a></h3>
<ul>
<li>Four 4-digit decimal numbers separated by spaces (' '), followed by a newline character ('\n'). The whole input takes up 20 bytes.
<ul>
<li>String Format - "<strong>DDDD DDDD DDDD DDDD\n</strong>"</li>
<li><strong>D</strong>: a decimal digit, (0-9)</li>
</ul>
</li>
</ul>
<h3 id="output-3"><a class="header" href="#output-3">Output</a></h3>
<p>For each 4-digit number read, you must compute its approximate square root and write its value to STDOUT using 4-digits and each square root must be separated by a space (' ') and the last one is followed by a newline character ('\n'), so the output will also take up 20 bytes.</p>
<ul>
<li>String Format - "<strong>DDDD DDDD DDDD DDDD\n</strong>"</li>
<li><strong>D</strong>: a decimal digit, (0-9)</li>
</ul>
<h3 id="examples-4"><a class="header" href="#examples-4">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">0400 5337 2240 9166</td><td style="text-align: center">0020 0073 0047 0095</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-8"><a class="header" href="#notes-and-tips-8">Notes and Tips</a></h3>
<ul>
<li>
<p>The usage of <a href="https://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Babylonian_method">Babylonian method</a> with 10 iterations is recommended. Considering that we want to compute the square root of a number y, the basic idea of this method is:</p>
<ul>
<li>
<p>Compute an initial guess for the square root:
$$
k=\frac{y}{2}
$$</p>
</li>
<li>
<p>Approximate your estimative, k, to the real value of the square root by applying the following equation:</p>
<p>$$
k'=\frac{k+\frac{y}{k}}{2}
$$</p>
</li>
<li>
<p>Each time the above equation is applied is considered "one iteration". For this exercise, use 10 iterations.</p>
</li>
</ul>
</li>
<li>
<p>For this exercise, approximate solutions are accepted.</p>
<ul>
<li>Solutions with an absolute error smaller than 10 will be considered correct.</li>
</ul>
</li>
<li>
<p>Other methods to square root approximation can be used, as long as:</p>
<ul>
<li>It used only integers. Floating point numbers or the RISC-V square root instruction cannot be used.</li>
<li>The approximation is as or more precise than the suggested method.</li>
</ul>
</li>
<li>
<p>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lIZ0tvQkpPQUFsVUFHd1NvNk9IZ0VFaUpjcFRnQmxlbzE0QmZIZ0RNNkhNRHdBNklBSFFCNk1Cd0FtQVZ3bW9DbHdzVElWUzVnRllFekFiaE1ZTms1dVBnQVpEaG9JQ1FBbFZGRFNYUU1qVXd0ck8wZG5TeG9PR0JoVUdsSW9QSjgtRUVDWUlKb0pOeDRBVVFBUEFEWTRBRVllVkViU1ZCaGJBZ1VsRDFVTkJpWStJSjRlWEpneU9uc2lyZ0FLQUVvSm1DbXBnbnRwT2xYS3paNVNBQXNTYzNzb0hnQmVIZ0tBZDBFUmNTa1pKYk1tbVJvU1ZCNW04emFNRHcxQUJIZXdRT2ctV0ljRGlrTXdyQTZiSnk4Q0dKYTYzVkFQU0xST0lKTGlrZmFUVFluTTR6QXBGRXF6Y3dJZXdFWTVMRkY0K0ZCUWxUWWtFYzVRY3dRV3kyT0E5TWh2RGFITklBWVNNQ0NndFdLZVRNT0JabXpnMXdBZk90aFpzR2R4ekJDUE53Q1VLMVJEU1BZNkJzMmVZMEFVR0RRNExsMkpMVUh6blBpVm5xMWJvNVBLcHZ3OU5BSkhCVU9DSkFCUFFHa2VZLWJUeXBuNjB3eHMwWExrOHgwQ3oxcEFBcVRwNEhTV29LZEZKV3N0VFp1STdDYy10Qk1TZ3BDRHlmeHFhbVpnQURBQVdSdU5uZ0FWZ0F6RjJBT3c4QUJNQTliUEFBbkcxbXMwVE16Y1BXMG0yQisyMjcydXp3MjgzKzIzUngzcDFWWnpIRHZ4YlVnSVhBOVBZWU9TOHFIVHV6aitDSFFSZ1dGSXdlZUFXWTlIRHZIT2R6ZWZ5NnpmTXdNeklRZFpWak5WaXhDTXRVQXJDUXF4ckFEQlRWQnNRRWJQc0IwSE5wdHg0WnNKd0FEa0hjY2R4bk9VMzFRdHRzTFhGdG1tbzVwbTJvN3RkMExjaStIdlU5ejB2YVVZQnZFbHhRZmFobnlTVk1QME9MOGlWdkRsRTMtSjFrT0ZZRE15N0ZqSU1ra3NFQmd1Q0VOck9TMVRNQWN1MGJURDhJN1VkVjJiWWRDSmJmQzJtWS1jVVBuRnROMGJVZE1MYlpvTzJvZ2NiTkl1ZGdIWWgxT0t2SGlqa2stekJPNFY4MVZFelp4TlpTU0V6LWJUVXdVMERtMlU0VW9OTEIxWUxCZURxeVMxaXpEYVh0RzBJMGRyTm80eXFPYmF5U0wzTWo3S2JGc09pM1VkcUpjdWpSMXNocVVMOC1pT0l2SUxlTHZmckh5RXlMaFdpcVpZcENzNEVxVEpEa3BBRURlQjNPeU10VTZEc3MwLUxGc0trQWV4TXRjQnc3VENoMUhCalczUTdxNXlhanNuTGFEejF5YzVvbE5JaURlckN3THVPRzh3d3FmQ0tSS2pCRXBqMExnZUNXSkVlRXVHNW1uOGFHZUFBSGh1TnBHM2hxQUFHb01iV1lCVXlodWdLRnNJeGF6Uk0wTFJrQ0FlbTBtYTRybTM4RnRrdWNBQU1WcDRBQVNZQW9HMEptZXBVczQxSTAzS3RMMit5cGdKdnBpWUFnQnRSc0FGMWVaUThXaWJBV3NwYmFlVzV5OUw3QnArMmFSdllBU0FlRTFqcHJuR2JYM2xIOXpEMFdBWWpnYlZIRjRHNUZTdUZWY2RZalV2RTlxV3pBQSszbkVkOHBaZEorTE9UOWgySkZJQWdRZUZLSGtBSjJ3Zmh1Tkc1eWdQUUlhdDhPQThqZ2daZURnQkNaT2NjMW5nb2ZnQUNCaHVUT25YOTdZYy1NSndZR1FFNFM3QnVnSWFobUdzM1JwSGJscmFQb2F4NHVUYzJlUHVSK0RHcTlEOHdzN3JxT3BhZ1dXWTdkRXV4OFR0RWxqWG40QUNvczBiTlpMQWg4dW5RSUFCYU5vYWMyQ2FEVnhUVnZiTUcyWUR0cmV6R0RtNHQ0Uk9jb1lBSXdrRGh2N1JKN2MwdlFLWlUwOXE2UldxQWpRbWg0RXpBQTRnblZBZ0lPWmIyME9ZSGdBQVJEZ2R3WUItMjVEd0lNSEJqUkhFeko3ZlFoaGpDS0hjQ29YZ1hSQ2oyRzRrakNBUEJqZ1FqMEZjRG1keFlCRXp1T1lBUXNSd2gtUWhKVFZBQUI1YiszaENpa0g0ZUVKWXY5LTRyRjBEdzNCSEJ1UlhETUYwVm9iUXRTMzFoQ0FKVVN3YWhRQm9BQWF4WVRJVkFLeEVhdUNWT1lKbXFZSm9XeUZFcldBK0l3Q3dEa0pBUm93OURpR21OQnNBQXNwVFk0MXMtN0xDQ1NjTFVoTWpDckI0THZKWVhpZUNueDRPNG1BYXdNWXBOZ09KSnhVeC1wQ1NXSTBPUVFZZkdiRWFHaVJvTThHQmdGV09ZQWc2a3F4TEVzTk9BZ0dOTEF6U0RHaUlNbFMyQTFMcVhsUnB6VFdrelRUZ1VodXZSbTdIQjRJWFhDYXctRXdKOUJJQWdxQVk1dHc3bEFoR3ljZTZJMXd1akllcXBoUXpGQWpJUXc3Y2JnUkpDUkFiK0JBQ2tMMkRza29NdHpMNGpKSUFBT1FnQzhwWXh5dUJyQUFENC1NNkhRRTVQQVZTbzFtVkEteCtnWWhMSmp0ZkhnY3pUVGhnUkRrbmc1TUNaVXlRaVVxWW5jWURVaWRta0FJOG9vWkVOSUxpdEVaaHlVeG5sS3N5RzZ5dTVvd1J0czVzdXlNa3JIZHZaS0dBQTNHSUljemd1TW9Fc1JzY2hVWnRrdmxNV0FwTEo1QWpETEFaQVN3dVVTQldGU2JrYWh5QzZtYkhJQUE1STJEVjZTZUFhcjFjdlRZeEtKVTNCVlF3SnVTeHpsYWlJWDBTMXdUYW41UGxTc1oxU3JiQXF2QlBpZFZlcnRXNnYxUnFtRjhwNFU4QVhqaWhodFQ0STBGUUFLdVE1OWZXN2cxWElZMVlhQ0FScWpZS3BKRjhlQVpJMWZHcGV6SWhTdmljZmNCb0xSMmg2bnpiZ0VBTXdiYklFd0tBRGdUQUtRRURyVld2SU5hNEFrQWdQSVRBWVo3Q29Ed05XcUF5QU8wRUFnQ0tIdDRZQjF0cUhTT2lBR0NKMTlxblRBZHRuYUFCaUM3KzJ0dVhUT3p0UWdOMUxwWGFPZ0orNnQySG9nR29FOWc3aDJkb0VDZTNvbHl5d0VBNERhWTRoUVRIZnc0STBFOVQ3cURrRk1ZZ0RncmlaQndIbFgybGdqWkdpOWxYZEI2RDQ2OEN1TFBCQ1lFOXNLQm9CWUNkRUEyZzhBRUNETFFHSWl5NjFZWkFJbkRseGpuQ0VlME5vSUFB" target="_blank">link</a>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="gps"><a class="header" href="#gps">GPS</a></h2>
<h3 id="instructions-9"><a class="header" href="#instructions-9">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that computes your geographical coordinates in a bidimensional plane, based on the current time and messages received from 3 satellites.</p>
<div style="text-align:center">
<img alt="gps" src="img/ch06_02_01.png" />
<p><span class="caption">Figure 6.2.1: Satellites' Positions on the Plane</span></p>
</div>
<p>To simplify the exercise, it is assumed that satellite A is placed at the origin of the cartesian plane (0, 0), while B and C are positioned at (0, Y<sub>B</sub>) and (X<sub>C</sub>, 0), respectively. The satellites continuously send messages with a timestamp via waves that propagate in all directions at a speed of 3 x 10<sup>8</sup> m/s. At a given time T<sub>R</sub>, you receive a message from each satellite containing the timestamps T<sub>A</sub>, T<sub>B</sub> and T<sub>C</sub>. Assuming that all clocks are perfectly synchronized, print your coordinates (x, y) in the cartesian plane. Note that the formulation used in this exercise is not realistic.</p>
<h3 id="input-4"><a class="header" href="#input-4">Input</a></h3>
<ul>
<li><strong>Line 1</strong> - Coordinates Y<sub>B</sub> and X<sub>c</sub>. Values are in meters, represented by 4-digit integers in decimal base and preceded by a sign ('+' or '-').</li>
<li><strong>Line 2</strong> - Times T<sub>A</sub>, T<sub>B</sub>, T<sub>c</sub> and T<sub>R</sub>. Values are in nanoseconds, represented by 4-digit integers in decimal base</li>
</ul>
<h3 id="output-4"><a class="header" href="#output-4">Output</a></h3>
<ul>
<li><strong>Your coordinate</strong> - (x, y). Values are in meters, approximated, represented by 4-digit integers in decimal base and preceded by a sign ('+' or '-').</li>
</ul>
<h3 id="examples-5"><a class="header" href="#examples-5">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: left">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: left">+0700 -0100</br>2000 0000 2240 2300</td><td style="text-align: center">-0088 +0016</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: left">+1042 -2042</br>6823 4756 6047 9913</td><td style="text-align: center">-0902 -0215</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: left">-2168 +0280</br>3207 5791 3638 9550</td><td style="text-align: center">+0989 -1626</td></tr>
<tr><td style="text-align: left">4</td><td style="text-align: left">-2491 +0965</br>2884 7511 2033 9357</td><td style="text-align: center">-0065 -1941</td></tr>
<tr><td style="text-align: left">5</td><td style="text-align: left">-0656 +1337</br>0162 2023 1192 9133</td><td style="text-align: center">+1255 -2381</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-9"><a class="header" href="#notes-and-tips-9">Notes and Tips</a></h3>
<ul>
<li>Multiple values written or read on/from the same line will be separated by a single space.</li>
<li>Each line ends with a newline character '\n'.</li>
<li>For this exercise, approximate solutions are accepted.
<ul>
<li>Solutions with an absolute error smaller than 10 will be considered correct.</li>
</ul>
</li>
<li><strong>The usage of the same method used in <a href="ch06-01-square-root.html">Exercise 6.1</a> with more iterations (e.g. 21 iterations) is recommended</strong>. Other methods to square root approximation can be used, as long as:
<ul>
<li>It used only integers. Floating point numbers or the RISC-V square root instruction cannot be used.</li>
<li>The approximation is as or more precise than the suggested method.</li>
</ul>
</li>
<li>It is best to work with distances in meters and time in nanoseconds, so that the provided input values do not cause overflow when using the proposed method and a good precision might be achieved.</li>
<li>Problem Geometry:
<ul>
<li>There are many ways to solve this exercise. Here, we propose an approach that uses the equation of a circle. Given that d<sub>A</sub>, d<sub>B</sub> and d<sub>C</sub> are the distances between your position and the satellites A, B and C, respectively:
<ul>
<li>x<sup>2</sup> + y<sup>2</sup> = d<sub>A</sub><sup>2</sup> (Eq. 1)</li>
<li>x<sup>2</sup> + (y - Y<sub>B</sub>)<sup>2</sup> = d<sub>B</sub><sup>2</sup> (Eq. 2)</li>
<li>(x - X<sub>C</sub>)<sup>2</sup> + y<sup>2</sup> = d<sub>C</sub><sup>2</sup> (Eq. 3)</li>
</ul>
</li>
<li>Using Equations 1 and 2:
<ul>
<li>y = (d<sub>A</sub><sup>2</sup> + Y<sub>B</sub><sup>2</sup> - d<sub>B</sub><sup>2</sup>) / 2Y<sub>B</sub> (Eq. 4)</li>
<li>x = + sqrt(d<sub>A</sub><sup>2</sup> - y<sup>2</sup>) OR - sqrt(d<sub>A</sub><sup>2</sup> - y<sup>2</sup>) (Eq. 5)</li>
</ul>
</li>
<li>To find the correct x, you can try both possible values in Equation 3 and check which one is closer to satisfying the equation.</li>
</ul>
</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lIZ0tvQkpPQUFsVUFHd1NvNk9IZ0VFaUpjcFRnQmxlbzE0QmZIZ0RNNkhNRHdBNklBSFFCNk1Cd0FtQVZ3bW9DbHdzVElWUzVnRllFekFiaE1ZTms1dVBnQVpEaG9JQ1FBbFZGRFNYUU1qVXd0ck8wZG5TeG9PR0JoVUdsSW9QSjgtRUVDWUlKb0pOeDRBVVFBUEFEWTRBQ1llVkViU1ZCaGJBZ1VsRDFVTkJpWStJSjRlWEpneU9uc2lyZ0FLQUVvSm1DbXBnbnRwT2xYS3paNVNBQXNTYzNzb0hnQmVIZ0tBZDBFUmNTa1pKYk1tbVJvU1ZCNW04emFNRHdBT0lBQlRVWmhXQjAyVGw0ZEFTWEY0TjN1UEVpMFRpOE80KzBtbXhPWnhtQlNLSlZtNWdROWdJeHlXY01Ta0tDMkttdUlJNXlnNWdndGxzY0I2WkRlRzBPYVFBd2tZRUZCYXNVOG1ZY0hUTm5CcmdBK2RhOHpaVWhIbU9FZVRFMG5rS3VHa2V4MERZTTh4b0FvTUdod1hMc1lXb0RuT1VpckxHYXphNk9TU3FiOFBUUUNSd1ZBUU9nU0FDZWdOSTh4KzJrbEdzT2tvTkZ4WmJPdFhKZGFRQUtqYWVBQkdIaExBQ085aHRSSlc0b1RCdUk3Q2NYdXpNU2dwRDljZHRDYW1aZ0ExQUFHQURzVGFiUEFBdEUzVSsyVEVFMnUyTzBPTzIwMmdBV1VjQVpqN3ROd2RiUzNhYkFBNWx6eG16M212MnF2T0hZZCtPYWtIQzRIcDdEQkNYbEE2ZEdZZWZWYUNKbXdxRzl6eDh3N3d6anIweVkrek9iV1gyWXlaa0R3SFJaam1aQjVnV0w1RmlFcGFvT1dFaVZ0V2Y3Y2dxOVlnQTJ2YmpoMG5hRHRoMjdOTXViUlRqdzQ0dGdBck0wdnhObVJQQUFKeDBhbVU3YmxCYUdMazJkRk5qaFhHcHVSTEc3bXhCNkNuZUo1bmhlTUJYbml3bkhnK1Q0Sm0raHdmdlNYN1JxeXY0MnFodktBU21KRmdibWVUNWdKdkl3U1dWcndmWUZaVmpXbWtLbVl1R3BvUjY1Y2N1VGJibE9nNHRqdzVFdG94UEJUczBVNXJuUjVIa2E1YzRTaSs2SE5uUnk1MFYyRGx0RnU0VUxrSjdBaWFlNTZpaEpSeGZyZU1tUGpvOGxobEN5bG5LcHNZb1FtMm5BZU9HYlp2cE1DR1JGQ29tUWdjRUlVaDFrTG5aRTYrZEZ6UjhRT3E2MVJScWJwb09VNGtYUlU3ZWZ4elZvWFo3WURmRmRIanFtYzBwZE0wbFdobDRtU1RlMjNVQVZQRFBncUNtYkVwT1ZsY3lhbGRRQklCQWJ3NUYxZUJXVk5ZV1g3Rm0xWmtkVlpsV1JleEExVVpoazB0dHVtNGRJT3hGcHFtZEVkSXhrMGJRRGphcG0wSVZkc1J5N3JjbEFPcFVlTzFpVmwrM21IbDk3SGFkdkxuVk1sMTZGd0dZd2p3bHczTTAtaU16d0FBOE55OXF6VUFOZzJhekFBbUROMEJRdGhHRFcxeFhZeVJveUJBUFRXWmRwV011VjZueGdEQUFHajA4QUFKTUFVRGFPcjgwdFo5c0UtUlppRi1ScEM1VENMZlRpMytBRGFUWUFMcEcyaHR0aTJBTllPNm1ydlczd3BPaVpsUkxFNEhzbEpQN1ZPVXlWSjIwZzZVYk1ub3NBeEhBcXFPSWlQRFNsY2NxQ3dEU3JjQ3FHS2tBN1poLXFuempwK1V6dVN3bjVobDJuRWlrQVFNZUhBenlBaTdZUHczRTJMZWJGQWVnWnJYOWNWNDNCQk85WEFDRTNjQy03RFB3SCtBdzNFUE5ybDlzby1tRTRNRElDYy11MDNROU9vTHdUTnBqekhPM0RXemVNM3pNOEE0Yzdlc2o4RFpMeXB6TEQydlRjTzFBenU5NGNGTnNmZm5kSlpMQUFUOEFBVkdtSnNheExBWm5uamFBZ25aVXlLMGRBdWZPWGhVRWx4QUVuR0FLY1FGbUdyamNFQlVJRndNd0FFWVNBNENReVdxRERTOUZsdkxWQjlvMkxhbDFCc2RXUUlPNm9FQkxyRUIyaHpBOEFBQ0ljRHVEQWNockllQitnNExxSTRLWlVINkVNTVlSUTdnVkM4QzZJVWV3V1VPWVFCNE1jT0VlZ3JpNnp1TEFNV2R4ekFDRmlPRUVtY0k1YW9BQVBJa084SVVVZ1pqd2hMRElSUWxZdWhqRWlJNEt5SzRaZ3VpdERhSVhSSVpnWlJMQnFGQUdnQUJyYlJNaFVBckhacTRHVTVoMVlKZ3BzK2JFSHRZQzJqQUxBT1FrQkdnMzBPTXd2VVBBQUN5Y3Rqam1EME9RNVlGU1RncWxGa1lWWVBCd0ZMQUtWMkhndVRHcnJpNmJBRDhHU2VSaHdLa3NSb2NnLVJGTTJJMFNXalE2NE1EQUtzY3dCQTJxVmlXSllmc0JBR3lXRXVuNlNXZm81bHNFV2NzaTJheU5sYk11djNVWkc5ZWpiMk9Ed0tlSUUxZ2xJMk82Q1FCQlVBeHozZ2ZJK2tzZTVzM1ppQkhtMTk1UzhobU1CR1FoaDk0M0hxVlVpQUpDQ0NqTS10WFRzNGlrVklNdVNRQUFjaEFURlN3SVZjRFdBQUgwSlowT2drS2VCeWw3RTh3K0xEOUF4SGVUSFArUEJubEhHREZDUVpVdzBCVUU0QVFhZ1FZbGdBRGNZZ3JGem9jZnVHWWhVU0FwZFBCTUxMMVlObDFtb0lNc0JrQ0N1RlNTVmtTcWZTMm5ISElBQTVFMlBWSGoxWXh6bFoyUlZ5cXQ1TEJoU3llRmFxSkFyQldCcTJ3V3JNUzZwNEFhbzFCdDJWeDA1WWZEa2ZLOWlTcEZaS09WRnFHQld1RGM2MTFPcjlXR3VOVDZxb1BJU0Z3cjlPUTRJRkE0QmdFUHNjT3dTd0FBYUlhSFFNeGlkQ3lwY3l4SUZzc0cwR21kTWxnTTJQbjh5NEFLMmlwaUJmekVGaHhTM2xQTFVHU3RTd1lrTmg3UTB2dDU0cTFSTWRkV3k2VEtXVlJNVGRpR2d4eENoUkxnSktxQXRna0pMQUFKcHdCSVhJZk5abzVDSmpnQkFJOXU2ejAwRFBiSUhnWXp4RkZ0Ym9mSGc3SlQxUHZQYSttZ01kbjJTeHRhT21nU3dsakh2M2lpNDlFQVZpZ0tuSllLbG43ZDNmdDdmTU1kQUhVNmRPUFNRc0RFR29PU25aRFFXREk3NE4tc1EwQm5neDZhQm9jZzVBbU9ETnF3Tnd6ait2RC02YldjRHVFc1o5Y2dhMjlJWTBJN2RiNjJNb280MHg5a2U3SGtyRXNFc05vb0NkMm9ZdVFQYTE1YkdQTVpQYXh0WXZIWk9jYW95UFVnaW16NE9YdmJ5RmxyeUdXU20wQlJ4OWpSVjdweHJsK0ZOSkMwMTVDZ0ptN05KdzgxOGZreStuanc2cWx5YlUrLVJUVW1Nd3lZYVhDaEZYbnpNb29tUlNpQlJLU1Uyc0MtUjh0TVhDbWRPaTNhMHoxSEhWckVwWkEwVnVtYVdsUDB4OHd6b2FjdjZqWmRpQ21Nc1JieXhRcE1xWURNUU5uc0U4UnE5eG5lQUhzdlR3Q1RjaGIxK2stUndMTGh3NnRFYmZjUjN1cldMTm5DeVpRSll1RWh5c2FIRWdpVFkzR1FUZHROTjlzczMyeElPbWMtY2JvdHNuK2FxUVVndFpwT21Eald4ak9iY2diWGRLTzlob2RwMm16cmNnVWczWjIybHU3Y20xZGlBalF1T1VKUmZkdVFxM0lHWGZMZGRoYmQyWnNnVG0wZ2hNSUdjTlZNTUdlV3dVMzl0TEpHYzUyOWJHaDNPYjlENTBCVkxMQlRpUVNodUhLcEpGOUdSemE4T0tPNU1ZN1dGamxUVEhka29vNjBKdkhrQ0NkRStPMldocENQeWVkaFIxVDlIblRXdWFmcHcwenp1UDhlRThxRERwRHIzR2w5RDIwbGhGVjNZQ0laZlNoaTlqcTVDOWptekxsOHNPYmlBZDZTQjN1eE9qZElhSFNoczNYUEJ2N3l0MmFmWHY4ZUIzRk9FNERNRThEU0x1WGF1aXNHNnF3LWYzWWV3Ykd1aHZCOEE1MThaanFZNit1aEkrMkFwSU03cTExZ2FMbGlBT0M4cm1EOWp4T3RnQ3AtOVR5d05OMlBIYmhOWktCUDZqMXczR1QzbnI4YWVxQlo1QXpubFBkZi1VTi01U2g1dnRlemoxNkw4UnJ2K2VxRHQ3MklCa3ZRUlVsSm9mYndTUnBCRStTeHI0UDlQbWYrV0ZOMEMzbnZCZU05RjRtYUdjZnBxaXM4RS1qQVJQY2daK0orLXFWb0lnemtSTkVDZmFPT3VBUUF6Q1RzZ1RBb0FPQk1DSkFRTi1UKzhndjdnQ1FCQVBJSmdIMnFnSGdNLWxBTWdBQVFRQkFIeUNBY0dPQVgtcEFkQVJBUHd2QVRtSWdUQVAtb0FRQUdMb0ZnRy01WUhJR0FGQ0Q0R1lIWUV3RmxKa0dFRVVFUUJxRFVFUUZRR0FFQ0RVRzlCd3FsZ0VBY0JtaExyUklrSWNDTkRVR2NGOG9RRFJMcDdaSXlDKzRTQTVnc0JOaU5BdGc0RUtFS0Z3RjREWkluaHdpWmlwd1VCb0FzQm93Z0RhQjRBRUIraTBBeEJ2SnY3NkVnQ2R3Q3FSTE9CbUhhRGFCQUE=" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="hamming-code"><a class="header" href="#hamming-code">Hamming Code</a></h2>
<h3 id="instructions-10"><a class="header" href="#instructions-10">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that performs the encoding and decoding of a <a href="https://en.wikipedia.org/wiki/Hamming%287,4%29">Hamming(7, 4)</a> code.</p>
<h4 id="encoding"><a class="header" href="#encoding">Encoding</a></h4>
<p>For the first part of this exercise, you will receive a sequence of 4 bits, and you have to encode these data bits using the Hamming Code. Assuming that the 4 bit input is given as:
</br>     <strong>d<sub>1</sub>d<sub>2</sub>d<sub>3</sub>d<sub>4</sub></strong></p>
<p>The output will be
</br>     <strong>p<sub>1</sub>p<sub>2</sub>d<sub>1</sub>p<sub>3</sub>d<sub>2</sub>d<sub>3</sub>d<sub>4</sub></strong></p>
<p>The new inserted bits with radical <strong>p</strong> are <strong>parity</strong> bits. Each one of the 3 parity bits is responsible for reflecting the parity of a given subset of bits (subset of 3 elements from the 4 available input bits). A parity bit is <strong>1</strong> if the evaluated set of bits has an <strong>odd</strong> number of <strong>1</strong>s, or <strong>0</strong> otherwise. The following table can be used as reference:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Parity Bit</th><th style="text-align: center">Subset of tested bits</th></tr></thead><tbody>
<tr><td style="text-align: center">p<sub>1</sub></td><td style="text-align: center">d<sub>1</sub>d<sub>2</sub>d<sub>4</sub></td></tr>
<tr><td style="text-align: center">p<sub>2</sub></td><td style="text-align: center">d<sub>1</sub>d<sub>3</sub>d<sub>4</sub></td></tr>
<tr><td style="text-align: center">p<sub>3</sub></td><td style="text-align: center">d<sub>2</sub>d<sub>3</sub>d<sub>4</sub></td></tr>
</tbody></table>
</div>
<h4 id="decoding"><a class="header" href="#decoding">Decoding</a></h4>
<p>On the second part of this exercise, you will receive a sequence of 7 bits that has been encoded. You have to extract the data field from this sequence, and also check if the data contains an error caused by a bit flip (there is no need for correcting the data if an error is detected). For this error checking, you have to verify the parity of each one of the 3 subsets.</p>
<p>The XOR operator can be used for a given subset of bits. For instance, to check the parity for which pd<sub>1</sub> is responsible, p<sub>1</sub> XOR d<sub>1</sub> XOR d<sub>2</sub> XOR d<sub>4</sub> must be equal to 0. Otherwise, there is an error on the encoded data. Do this for the 3 subsets of bits in order to check if you can trust the data encoded with Hamming(7, 4).</p>
<h3 id="input-5"><a class="header" href="#input-5">Input</a></h3>
<ul>
<li><strong>Line 1</strong> - a sequence of 4 bits that must be encoded in a Hamming code using 3 parity bits.</li>
<li><strong>Line 2</strong> - a sequence of 7 bits that is Hamming encoded, and must be decoded and checked.</li>
</ul>
<h3 id="output-5"><a class="header" href="#output-5">Output</a></h3>
<ul>
<li><strong>Line 1</strong> - sequence of 7 bits that has been encoded using Hamming code</li>
<li><strong>Line 2</strong> - sequence of 4 bits that has been decoded from the Hamming code.</li>
<li><strong>Line 3</strong> - 1 if an error was detected when decoding the Hamming code, 0 otherwise.</li>
</ul>
<h3 id="examples-6"><a class="header" href="#examples-6">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: left">Input</th><th style="text-align: left">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: left">1001</br>0011001</td><td style="text-align: left">0011001</br>1001</br>0</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: left">0000</br>0000000</td><td style="text-align: left">0000000</br>0000</br>0</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: left">0001</br>0010001</td><td style="text-align: left">1101001</br>1001</br>1</td></tr>
<tr><td style="text-align: left">4</td><td style="text-align: left">1111</br>1001001</td><td style="text-align: left">1111111</br>0001</br>1</td></tr>
<tr><td style="text-align: left">5</td><td style="text-align: left">1010</br>1011010</td><td style="text-align: left">1011010</br>1010</br>0</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-10"><a class="header" href="#notes-and-tips-10">Notes and Tips</a></h3>
<ul>
<li>Exclusive OR (XOR) is a logic operator that facilitates the computation of parity bits</li>
<li>AND instruction is useful to leave only a given group of bits set (masking).</li>
<li>The decoded data doesn't need to be corrected, in case an error is detected.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14QUhwV0FDQVVRQThJd0VBRzFRY0E5Z0RNT2hZbVFxa090Qmt3QTZNS0FORjE1d0RnRlVBa25BQVNxUVFsUjBjSEFJSkVTNVNuQURLOVJ2SUMrSGNYVkZnT3lrQUE2VmpCUkFCTUFWMkVDVm1sN09VQ0FLd0lBZ0c1VmRRUk5iUUFaVVJvSVFRQWxWQ3l0VDI5ZmZ5Q1E4S2pVR0pwUkdCaFVHbElvWnFTVWtIU1lWUnBCYVc0ZUFEWTRBR1lPVkI1U1ZCZ3dnaHM3V1VjWEpXMVZEZzRtbURJNkNQYk5BQW9BU2c1Z0xlMkZDUE02TTc3cmpsSUFDeEpBaUtnT0FGNE9Wb0IzUFNHRXhtQ3pIQUs4Q3cwRWdpVWFCQ1lZRGhHZmhnV0RJRGdBWVhDcUFDcDBlMTJFOGpvcFd5UHorcUVCZVFLeFJKV2dlVjIycjNldTFhN1U2ZTBDQ0FpQkJleDJKWlZJZU5VRE9lYndJSHlnZ1FnWVRDY0RtWkhCTUNlMndDV0lFVUNHSFdhQVJ3SXUyY0IrQUQ0TG5ycnZ6c29GaWJJNlVLbGNydHNUU0JFNkVxbWVLMEswR0RRNEUxMWNJNVExU0dkNlhhbnA0ckthZE9Kb0lJNEtnSUhSQkFCUFJHa0E0aWR3aTIxUEVWdWlWU21VQmhXbWdJQUZVREhBQWpCeGpnQkhDS0I5bW5IV212UEVBVCsxRDF3cFFVaEpvdEIwMHFrQ1ZnQU1vOHJ5bFU0OHJZNG5VLTZ1Q0gxUm5jOG5xalhDOUhDNWJvZVZPbDlTR0pjSEVFUmdiT2FpT09FQndBQ056dDlqWG1hTnpTTDRmYjRqNmhyMVo3eHhNM3Uyek5udTJiWEhtbndGcks4cURvQjFUbG1RSEFBRXcxdldqYk5NMlM2d1cybVNkdDJnaTl2MjBHS3ZhdzdqdU9XNWtXUk82WVNSSzZVZVIwNVVkTzFHNnJCMndIcCtDYW9DZVo0WGpBVjQzbitqNmlzeXI3dm9lWEUtaHdmNEFmYXdGUEtCakppdm0wcFFZR3hIS21XRlpUSFdEWmtFMnU3MnRoSGJjVjJFUTluMkE0YWZhQVJrZXVNQXpuWkxITGdFczRUak9DNmJodXpsc1JjT3ljY2VwN25scS1FMW9KRDVQc3BMNWtPSkFYZmplMG5uTEp5cnlkY2lraWVLRUdxVlpKWWdQQjhnQUN3b1hwSVVZYXhSbktlMlFpbVhoQkU1YjVybXp2WmE0ZWNLTkVrWTFUV3poUjg3ZVcxNVVrUnhBaGNUeHdYc2dKZDRSUmxnVFJXK1lBZnNOeEpTVEpwcXBVQitKS2U4V1dGa1J1WDVSd0FDc3hWb1RBWld0cFZPRTFlWitHV2J0RFVqdTVua1RtT1k0K2JScm5QWTlHNWZRNWIyRGY1aTNjVUZmRVRVSmtXaVRGODBTVXRDVXJiQmEwY09sNGlhRFdoSWNGOHZ5aktrNk1jQUFQTDhZN1kxQUFEVXhQbkpjc0ZvM1FGQmhPKzBGa25tSG9XQkFjeFdlbG0yWlpLMlYzYlJBQUcrMEFDVEFGQTdpOHdORlh2RlZ1SFhYVlBPMFJ3MU1MSFRnWUFOcWpnQXV1TEpHSzdUODNRU3JsYWE4dTdIUTBEdkVoYURVM1BtSlVOeGN0U1hHNGp5N3BRQnViS1JCNGl3SVVjQldsRThpLUFhd2tVN1I1cGFKYXRLa0NyQVRRVDdEUit6MDZzTSs3a294NzdnaWtBUUczS21qeURVMkVJaS1LT1dkUEZBa2pIT0JLZUJySEJEeDJyaWNBSVNGK1RqdG8tQTBGTEw4RmVCS25jZnArS3dnd01ncnlPOGpkQ282ZzhnWTFXUk40MzhBNloranBQTjc1VHk1OUtJakU1M3lmZDFYYWNaeXJVRHE4WHlySmJSYS01MlN4em55SUFCVVZhanVjbkRIRzNnWUVBQXRKVzdQWEtmeXFoNlE0Y0NpamlBVDJNQnZiWHdDSW5YNDE5OFRMalJyZVFRb2hieGtqLW9FSm0xTldaLXhEQ0hDZXpvbFM4d0FPSjUxUUlpSVcxOTNDQkE0QUFFVkVQOEdBQ0RwUWNDVEtJWjB6d0t4LXk4RDRQd3RnWkFPSGtETU5vRVFRcDR3Z0J3RjR4SnhEZkNGdjhXQXROLWlCRjBFVUhJTTFpUXMxUUFBZVZ2SWtOb3BBRkU1R09QQXhCcHhQQ3lMb2FJYVUzd0FnekhHQk1BQjJRQWlHbU9JTUtBTkFBRFdvaUxDb0ZPTGpXSWhwQWk4MU5NbFYyZHBacXhVQnZiWU9CSUo3VEI0T1lkb3FBd2hrZ2dJRUFnUWhlekhBQU9RTG5TYWNRSW50MDVnbU9MMlZBZmhoSkZMOEkzYW91SjBwVTE3djdhU3lUVWxCa3lhb2JKdVNOUnpIdUlVdVlKVGpSbEk0QlVnSVZTczZPbHdkRTJKY3d3aEpGRUxBREpXU0h5LUQzbE1tWnpTWURaUHhPNFBvVndkYXdDREtpR0FWaElBOEdYazhFWkxvT0FBRmtXWXZGeVFnazRselhpV2hwcjRNNEhBNzdIRU9Sd04rSEE5bm5HSnQ4MkFvRWduYkIyWEtVUWNCYnd6SUFHNkZGLUwyQWdwd0lrT2h3V2M0NDBMQkFjRU5KaWpnRDl1NmlDY0dtTkV4eEVJNUtRR0VmRkNZZ3dRb3psWWRKbzVXa0VId2pRYjhiOHFYd3ZXY0tPMDh3bWo1emdDOEZFaEt3Z3N3Z0Fpa1VhTUVDVmlzQWdSQ2txSmhaM0ZaZlk0Z3J5QjEwK1J3V2wyU09BQUQwYXhLb2dBYlJPWHoxWG5HMVlxb1ZLc0pnR3JWWFMwNDZVcFVLdDFTcXcxMXF0VTZyTlloUzFScVhXbXVWUmExVlJyYlZURitNY2IxZXJEWit1ZFNhaDE3cncwYXNqV2EzMVRyc25wVk9YZ29XNHIzQnBzUWhtNEFEcU5iWm9RQk1iTkRyRFpGcmRlclV0UHJ5MjgzWmYwTzBhQXFDNnNjZGlFVmU0VTBjRjVrTGJscUFWYnV1elYybFdCVnkyZHV4Q3JBNlE3Z0Q5dEdGV3E0UUtkZ3ZEYUM0M2wtTEI1TnZ6aTJwNGFNYUFTcDJOS25Zc3FSUmJzdnYyaldNYmpVMW43ZEd4Tlo3VjNkc0hhZXIxazZQWFdxempRWkNRYisxaHF2UStrZGw2cld4dlBTT3NkOTZUV1B0UFMrd05BSDg3bXFmZittOUE2WVBYdjdVQnI5SUdSMVRyQXlLVXU1N3F3QUI4Y003bzRIaHZkNjdmN0lxVk9reXM2U3M0LXpiZXFtdFZ3Q0FUd3hIeXVnMWdnejdCd0RJbVlPQWFCaU9PZGNVdWhTRmd6QXhRb05NZ1FCNUR4ZUItYzRiYjlqRExJMkp1Z3lTSWkzbjJJUzBjbkhoTkhJNEg4M2pZOC1uN0JVMnBnbEs2dU04R0pwLVBvczYwR3FMWmlhUGNhTkJEYnNFTHU4UStFRUJaMmMwbmQ0SUszemdwbVhtYlpsQmppYWFyS01VNFZnQ3JWTGZkTlB6WUtJVXdITHNwWUxRWXd1VmdpMUZwR0htZlBpbFM2RnF3eEt2T3hiekZ5N0VTNndCN09RTWNWejZVc1BISGM0d0g0Qk1TTWJxaVkxaEE1aFpSVXR5NDhoWU95Q3NjQUFPeGYzcTY1bFdIV3VzQmRJSkEzNEZIc21JdXppVnlxVEdXTnNacTI1anpVMnFVMHVmUUU2WWdoR01PZG9xNTNyakhTRE1ZVE90MXpWaEp2eE9telN5alg4ZjQtelJyQUxrZFNPM0FHYzVtVlFRdFhPLVpnTlcwVlVUbUdrQSsyU0w3cFh6emxiNVpWd2x6bWpFTGlGb3pDZWNCRzIxY0IwTERyZ1BnZXRzVXdmR0FIMnJCZzQrMGZHZHFnZ2tBaEdOWWtNSExjQWdGMko3WkFtQlFDaUNZT3lBZ3JQR2ZOR1ozQUVnRUJyQ1lEVEEyUEFUT29ESUg1d1FDQUdKaGZwakY3emlYVXVJQ1VMbDZMbm5NQStjQzRBR0pxOVFBcnpYU3VCZjZEMXdiclgwdnptbTQxK2JpQVRncmZpOGx3TDNRVnY1Z1FIZ2R4QWdZTGVNTHR2S0lIZ1Z2UGZVSElLNHhBMHpLQVdEZ0dpaHNMQlJ3OENHOXJoUENmWmQ0QkJkNExzUHNLQm9CWUloQTZJQjNCNEFJRW1XZ2hSRHVzLXp5QWZPa0xuRU5ETCs0ZHdRQQ==" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="image-on-canvas"><a class="header" href="#image-on-canvas">Image on Canvas</a></h2>
<h3 id="instructions-11"><a class="header" href="#instructions-11">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that reads an image in <a href="https://davis.lbl.gov/Manuals/NETPBM/doc/pgm.html">PGM format</a> from a file and shows it on screen using the canvas peripheral.</p>
<h3 id="input-6"><a class="header" href="#input-6">Input</a></h3>
<p>Your program must read a file called "image.pgm" that will be in the same directory as the executable file. The <em>syscall</em> open can be used to open the file (an example is shown at the <a href="ch06-04-image-on-canvas.html#notes-and-tips">Notes and Tips</a> section)</p>
<p>Some examples of PGM images can be found on this site: <a href="https://people.sc.fsu.edu/~jburkardt/data/pgmb/pgmb.html">PGMB Files - Binary Portable Gray Map Graphics Files</a></p>
<h3 id="output-6"><a class="header" href="#output-6">Output</a></h3>
<p>Your program must show the image on the screen using <em>syscalls</em> to the Canvas peripheral. The Canvas must be adjusted to have the image size. The available <em>syscalls</em> are:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><em>syscall</em></th><th style="text-align: left">Input</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left">setPixel</td><td style="text-align: left"><strong>a0</strong>:pixel's x coordinate</br><strong>a1</strong>: pixel's y coordinate</br><strong>a2</strong>: concatenated pixel's colors: R|G|B|A <ul><li>a2[31..24]: Red</li><li>a2[23..16]: Green</li><li>a2[15..8]: Blue</li><li>a2[23..16]: Green</li></ul><strong>a7</strong>: 2200 (<em>syscall</em> number)</td><td style="text-align: left">Defines the color of a given canvas' pixel. For gray scale, use the same values for the colors (R = G = B) and alpha = 255.</td></tr>
<tr><td style="text-align: left">setCanvasSize</td><td style="text-align: left"><strong>a0</strong>:canvas width (value between 0 and 512)</br><strong>a1</strong>: canvas height (value between 0 and 512)</br><strong>a7</strong>: 2201 (<em>syscall</em> number)</td><td style="text-align: left">Resets and defines canvas' size.</td></tr>
<tr><td style="text-align: left">setScaling</td><td style="text-align: left"><strong>a0</strong>:horizontal scaling</br><strong>a1</strong>: vertical scaling</br><strong>a7</strong>: 2202 (<em>syscall</em> number)</td><td style="text-align: left">Updates canvas' scaling</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-11"><a class="header" href="#notes-and-tips-11">Notes and Tips</a></h3>
<ul>
<li>To test on the simulator, you have to load your program (.s file) and the image file (name "image.pgm") simultaneously.</li>
<li>When new files are loaded to the simulator, older ones are erased, so you have to load the program and image files together every time.</li>
<li>To use the Canvas, you must enable it on the simulator. To do so, go to the tab “Hardware” -&gt; “External Devices” table -&gt; “+” Icon on the Canvas row. A new tab will appear where the canvas can be seen.</li>
<li>This exercise uses multiple <em>syscall</em> numbers. These values will always be stored on the register a7, and the <em>ecall</em> function has a different behavior for each value. To check the syscall for a specific functionality, the simulator table can be checked (note that the <em>syscalls</em> related to external devices, like Canvas, are not shown in this table if the device is not enabled).</li>
<li>You will not receive images larger than 512x512 (that typically takes up 262159 bytes).</li>
<li>In all images, Maxval will be 255.</li>
<li>The canvas is indexed starting on 0.</li>
<li><strong>You need to resize the canvas (setCanvasSize <em>syscall</em>) according to the file header.</strong></li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15Z1BaS25naVlBRGRDQk43a2kxUUFEMUpVR0dJczV4dFVSYWdhWVlYbGdrbVFmMzhhY1ZjZUFGRk5nRFk0QUJZZUxaMllHd0o1SXAzQ3AxQXdtTUItRHg1Z2RTSFE3SGt1QUFLQUNVRUpnVUtoQkRzVWpvS09tR0o0cEFBRmlRekhZb0R3QUx3OEhJQWR4NFFsRUVoeGlOTUwya05CSXFCNHJ6TUh3d1BFRWtEUVBDeVBBQXdoUkxxWmtkTklSakhMdzJNZzREc3lGU2VJUUFKNHdHZzhPQlVnQjhmSGxCTVZQR1ZHdUpwTFFPVG9EVlFjRG9memdiQlFxRHhwb3hvd2U0MmFXVmhISGEwak00ZzRFQnNjRHBjRjBVRWNpT1ZBRzBBQXdBWFZsWHFoVUYwaUlBaElpSUxUb0x4clZjNGZBZlEwa2NpYTJpQ1FUUzJTb0tHT01oV1NBQUhJY1BSeDdrRUNTNUhZMkdYNCt0UXh0aHR1bUxzOXh3MUFkNVZERGtBWjlGam5oMFZDa096T3ZTUmZ1amdsYVRPYW90UVhpRjR1RWtsWE05VVhSTkRoMlVnSVorSTRCZ0FqSURDbWZqOXpwa0J3Q0NtTEl1aEVnS0FCTXNqNUdBcUJQcVFHQUFNekppaHlaYUt1WTR0T3FtNVl1SXZEVWhjaEJtRzZhQUFDSU5CQVpnMkJSaDRZdG1pS0VWY0pHb09SNUJVUlJvYTdNZ3hJOExtMUpKZ0FqS21BQlVIeW9pZTQ0M2syTFp0Z0FCb0l1cGNKdWVROEtvVUFBRjZvQUtBQWt3Q0NhbU9oOFR3dW1NY1J3b3NSeDFGc1k0TURjVVNXaXlSaDY0VHEyaUx5WXBkREtid2FtYVRwZWxnTWdpWkNZWjFJbVZLUkhNYXhsRldaUk5sMlE1VGxqcHUyNjdybys2b0xSVUxIbXVEWlNZQkNEVUd3WXpWcGwxNmtwT2NEd2ErcENlamxHSVBwMGlMbWhTMUxKaVVGbzhBQVBCYUFWQmFtN1ZRQUExSU55SW1uVkJMMFRoRGlrSW1VQ2lhbXZIOGIxRUdwck42WjF1dWtta3VTTWx1UXBtU2VZT1BBQUFwUUpzRWgrVkFDV2xibDVXdWU1QjFlU2RaMFhjWmVuWFJKR0xKVHU2SnBlSUI2ZmRsWTVBLVczMjdyQ2Rpb0Y2SU5RcENYcm1wdWNRYW5TUEJoQkUwU3hKVXRXM1ZjTFE1SGtCUjdHWXI0RUVTaUtJNVVpVmxWY0NDYmtjc1k1SkdFQjBNZ0FMVW9tcGdBTFNjM1M0aFFBQVJpQmZUYy0yc0tvTWdRdW1BUUNDVXNtbXdBT3dBR0xLOHI0cVN5QTNNa0JBNnNRRFFOaXhwK2RpbVAxWHFOanRFYVJtcU5VbnFZNHFHQWdjWU5JVElFbmdhbExHaHRTV1k5d1pnNGVRM0RZK3VZUG9vMnRyU0tjLXJzTDJxcE9EVnlLQjBlUEN5Q2UxUnBYR2NDb016NGhhZ0tFUGNqRFBCVTJiellXekhaRHRnQUtySFBBQ1VMeXBsNlFSZFNlYk5pVzdIbGZWeEJkY0JRM1RmYlNYcmNOeDM2cUlkM0twVzMzVnd0MjM1ZW1GWDZvZkdQdmUwY1haaWwxYncrOEFBckV2RTl5blZxOE01RVRwT05OR3B1NGFudGZkN25nVTl3SE1nRmJKKzRhUXhRTGRTcTlQMU5lRUVLVjVySVBhSTRHbzJvbm16RHdSRW45WTdQMm1nUUZNQzBqTEpsR2xmTTBXNGFRTnpadFRhU1g5VDQtMDRyWllrbjBHcmdPYWhxQVNBMHVwb0t0ci1DMHcwa0dmU2hBQWlNM0pCb2YyYnMyYkJMOVlGUUJOdU5ERUJjQ1NNS0FkU1JFZ2p1VENScm9nbmdGaHdId0NvWnpBU1ZNc29uanZyZkcrRDhqN2lEZ0tJNDJHcFJGLTFRZnpNTS1NTlFxTE1HSGUwT3dUNXhBVHRmRks2SlpJQUhGQUZhVGVxSXJRWmdlQ2tRNExTR0FZWUl3OEMxRStUb1ZzTnczMVdFWUJRYmhsQzhDMkxrWjhoTXVvUUI0RVNUY3VoS1M2VnBMQUd3M2l6RDhDaUNFTXc5Qk00N0FBUEw4eThJT1BKSVJFU0dJNFB6WkVPaHNrK0w4VFlTa3BndGp2QStMN0crcGhEUU1UNWpRQUExc2s2UXFCa1NkUmNJYU13c2xvYnlteXZLY3hEb25RdW1ZaWlLK0ZocEZFa3prY09nOE5VR2JDdEZKZTBmeFlBMVFFc21XUUVGRUY3TjRGcVE1cEpqazJGT1lpYzVsenJsMVhORnNwaGRCcUN3ZzFMSlk2TzktQzZVMkRvWFNXcGp6K0FnbHZJRk1BWmtmTlFWOG5aeU5VRDBpcnRzSjRpa2RudG1mTG9UbUFBT0dVWmhkaVpDT0lpSkYwaGZsMENwdWFHS0tMNlQ4Rk9maXVRbmtJQmFrUkpzWVNXb3FaRUthcWdscVBBMm9kVzZqRlBCZGtCcTBMR21PR0thMTdsbGdvRTh5Z2lJTG5RcTNsVEF1NXBhbkdPcENqQUFRa1l4RWlZS1V5QjRERlZNc2hnQ2tDMUZJQVVwZ0lBSUFRQU1wMldRTERoQjJLUVRtWkJOd1FEQUtZZEN0RnpTeGpuRHExRlBCRmE5a05WcTgxZlJtTEUyUUw2bGN0Rmc0OEVURUcxQXNoT1ZhbGtHYTBjOHkxeVBPZVdBV0FzaElDYkRvWFZaTkFCWkJvUkl6QzZEREVpYXR4SmZZS3NNQ2lIZzRqRVNscDRKekhnUmIwU0RScnFOUWQtYW5KNXJ6U2pGNG5TOFM0QkFDMFdNeUJNQ2dDQXZrQTRTNjUxWkFYYTZBZ0VBNUNZRHpuZ2VkVUFWUmEzRlB1dUU2YU4wd0MzVnJVaTU3SWFIczNjZTdkRUJGYjNzdlVlazlPN0JEdnNmZGU1OVd0SzItcXZUZW5kcWhnT2ZwZmZ3WUR1d0lDR01kQVFEZ3pRdGxEUDVod1RZd0hFTy1OMW9NeEFIQlRtVXVXT0lTR0xBNVpLeFZvck05ZUJUa3hrM0FBUnlkQlFOQUxCb1VnQzBIZ0FnV3BhQ1JIK2t1OWpJQWpnbkRPQVFkZHBrZkRyb0lHR1pnR0JvV3ZDMFBKclFRQQ==" target="_blank">link</a>.</li>
</ul>
<p><em>setPixel</em> example:</p>
<pre><code class="language-riscvasm">    li a0, 100 # x coordinate = 100
    li a1, 200 # y coordinate = 200
    li a2, 0xFFFFFFFF # white pixel
    li a7, 2200 # syscall setPixel (2200)
    ecall
</code></pre>
<p><a href="https://man7.org/linux/man-pages/man2/open.2.html"><em>open</em></a> example:
The open <em>syscall</em> returns the file descriptor (fd) for the file on a0. This file descriptor must be used on the read <em>syscall</em> to indicate the file from which the operating system must read from to get the contents of the file.</p>
<pre><code class="language-riscvasm">    la a0, input_file    # address for the file path
    li a1, 0             # flags (0: rdonly, 1: wronly, 2: rdwr)
    li a2, 0             # mode
    li a7, 1024          # syscall open
    ecall

input_file: .asciz "image.pgm"
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="applying-a-filter-to-an-image"><a class="header" href="#applying-a-filter-to-an-image">Applying a Filter to an Image</a></h2>
<h3 id="instructions-12"><a class="header" href="#instructions-12">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that reads an image in PGM format from a file, applies an edge detection filter and shows the result on screen using the canvas peripheral.</p>
<p>The first step of this exercise is to read an image in the PGM format and store its content in a matrix (exactly as done in exercise 6.4). After that, you must apply the following filter on the image:</p>
<p>$$
w = \begin{bmatrix}
-1 &amp; -1 &amp; -1 \\\
-1 &amp; 8 &amp; -1 \\\
-1 &amp; -1 &amp; -1
\end{bmatrix}
$$</p>
<p>Assuming w the filter matrix above, Minthe matrix representing the input image and Mout the matrix representing the output image. The basic idea of applying the filter is that each Mout pixel[i, j] is defined as:</p>
<p>$$
M_{out}[i][j] = \sum_{k=0}^{2} \sum_{q=0}^{2} w[k][q] * W_{in}[i+k-1][j + q - 1]
$$</p>
<p>Note that this can lead to the Min matrix to be indexed with invalid indices (negative or out of bounds). In order to avoid these cases, the border pixels of the image Mout must be initialized with black and it is not necessary to compute the filter value for them. You can visualize how this filter works in <a href="https://setosa.io/ev/image-kernels/">Image Kernels explained visually</a> (select the "outline" filter). This filter is also known as the Laplacian operator for edge detection.</p>
<p>Also note that the image <em>pixels</em> must have values between 0 (black) and 255 (white). If the result of the equation presented above is not in this interval, you must use the closest value in the interval (i.e., values lower than 0 become 0, and values greater than 255 become 255).</p>
<h3 id="input-7"><a class="header" href="#input-7">Input</a></h3>
<p>Your program must read a file called "image.pgm" that will be in the same directory as the executable file, as explained in <a href="ch06-04-image-on-canvas.html">Exercise 6.4</a>.</p>
<h3 id="output-7"><a class="header" href="#output-7">Output</a></h3>
<p>Your program must show the result image on the screen, using the Canvas peripheral, as explained in <a href="ch06-04-image-on-canvas.html">Exercise 6.4</a>.</p>
<h3 id="notes-and-tips-12"><a class="header" href="#notes-and-tips-12">Notes and Tips</a></h3>
<ul>
<li><strong>You need to resize the canvas (setCanvasSize syscall) according to the file header.</strong></li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15Z1BaS25naVlBRGRDQk43a2kxUUFEMUpVR0dJczV4dFVSYWdhWVlYbGdrbVFmMzhhY1ZjZUFGRk5nRFk0QUZZZUxaMllHd0o1SXAzQ3AxQXdtTUItRHg1Z2RTSFE3SGt1QUFLQUNVRUpnVUtoQkRzVWpvS09tR0o0cEFBRmlRekhZb0R3QUx3OEhJQWR4NFFsRUVoeGlOTUwya05CSXFCNHJ6TUh3dzhnUUNIRUFFOVlNZ2VCQWVBQXhLRGlIYWRScVM5R0NTQm9Vekk2YVFqR09YaHNaQndIWmtLbVNnZ2ltQTBIaHdLa0FQajQyb0p1cDQrcE54TkphQnlkQWFxRGc0bGdUanhEb3hvd2U0MmFXVmhISGEwak00ZzRFQnNjRHBjRjBjdFFpUDFBRzBBQXdBWFUxUWFoVUYwaUlBaElpSUxUb0x3M1ZjNGZBUXcwa2NpVzJpQ1FUYTJTb0xHT01oV1NBQUhJY1BScG1vU1hJN0d3YS1IdHFHZHVOOTB4RGtlT01lT1BLb0tjZ0F2bzJjOE9pb1VoMk9qbzNTUkFpb0djRXJTRnlWVnFDOFN2Vndra3E3M3FpNkpvY095a0JBLXhIQUdBQkRJQmdwajhCZW5Sa0J3Q0NtTEl1aEVnS0FCTXNqNUdBcURmcVFHQUFNelpyaDJaYUR1czR0TWFCNVl2S0pvWElRWmhzQ2dxQUFDSU5CQVpnMkl4VjRZcDJVRUlOUWJCak0yYkZ6cStQWUdoaGY2a0lHdTRFc1dpS1VWY05Gb0F4NURNWXhzYTdNZ3hJOEtXMUpaZ0FqTG1BQlVBQXNxSzNnSnBMa2tKaUlBQWFDQmFYQUhua1BDcUZBQUJlcUFDZ0FKTUFPbjZRWk9pYVR3bmt5ZFJhcjBjcExHS1k0TUJxVVNXaVdZUmU3enIyVmsyWmtkRDJid1RtdVI1WGxnTWdtYTZZWmZuVW9GRkNYTUZ0RUtVeDRWTVpGMFd4ZkZzNEhrZUo1Nk9lbDYzamVFa1lwK25TSWs2RkxVdG1KVE9qd0FBOHpxNWZsdWJEVkFBRFVzM0l2YVhXU1NXcEVPS1FtWlFJWnVZYVZwazJJYm1tMzVtMmU2bVZjNWtMc2x0bHBST1BBQUFwUUpzRWpaVkFPaUlwNWEzeXB0MjFGUUZPVjVRZFIwRVhGLUh0b2xmYldkZDZYM1k5ejEtYTlQRHZjQW4wYlZ0Qm01cjlubFpvRFVBWThpSU1tUmlUWEhxZWJXZzFDbld6cFQ3YkV5MXNKMktnUWJVMUNrSkJrNkI1eENhZEk4R0VFVFJMRWxUaVIyZ2t0RGtlUUZIc1poLWdRUktJaHpsUU5TK3BJSUFlUnlwamtpWVFIUXlBQXRTbWFtQUF0QWJkSitnQVJyQmZSR3hlc0tvTWdGdW1BUUNDVXRtbXdBT3pTaDdIc0FNTDJ5QVJza0JBdnNRRFFOaXBrQmRpbU5OUWFkdVpDYUprYVltM3FZWHVHQWdjb05CTHNHM3RhbEoyaWRqVUM5d1ppa2VRM0JDM3V0UG9wMkhyU0tjNGJzR21ocE9HSnlMbDllUEN5TGUxUm5uS2NDb0Zyb29DdlQzTE16d2lzeDkyY2ROMlEtWUFDck56dzJrVy1xMCtrT1BnbXh6WThmTjNQQytJY3Z1V3IrdlptVDF2cSs3OGFXRUh3YUNmSCtkcC1ielBwano4YUJuWDBmYkVUMllVOEp4ZnZBZk8tVytXb3VwZjNWcEVPQUtNVFE1eHRQbkltaGRQRHkyNFByRUFDY0lGT0hXc1VIYTFJdjZvSlJnUVVHVHBrQmVpT0NhSWF0NWl5SXh3YzNOQlpGU0FFQnpEdGZ5MlpGcXdNZEllR2txOWRaSzN2bVlYQjZENVJYRnFzU1FtUFZFYjlSTk5wR2FZME9FSjN3YzZlYUxEQ1pRaUlRbWJrczFzRWIyN0h3Mmg5RGNia3k2SVRGUkpEcVNJaU1keVBTaTltRThBc0lqZUFzaURiYVVWaFRXOGlDRUh3T1FXQThRY0F6R1J4TkdZZ2g3RFRaeGxOaWFWeFpnYTVlaDJHZ3VJYmM0SE5YUkpaQUE0c1F0eWYwekZhRE1Ed09pSEJhUXdEakFtSGdJcHZ5S2dYcTQxWVJnRkJ1R1VMd0xZdVFmd1N6R2xLSWtCNWRDVWs4clNXQU5nY2xtSDRGRUVJWmg2RDl4MkFBZVZObDRDY3ZTUWlJaUNSd1UyeUlkQmROeWZrbXdsSlRCYkhlQjhZdThEVEEybWtuNkdnQUJySGdSSnBDb0dSS05Gd05vekNXU1p0cVRxMm9JbmVsOVA2QWdLSllFV0JzU2MxUmRBMmJzTTJCSTdNdnplQWlnQlVDNDUtY2poMEdvTENFMGxrN29BUDhKNVRZT2hQSWlodlA0UkNId0VVd0J1VjFKMFh6SVZjMVFQU2VlMnduaTJVaGYySDh1Z0RZQUE0TlJtRjJKa0k0aUlDWFNHaFhRUldUcHFwRXZwUHdXQXBCYVZ5RFNoQUVVaUpOaDZSRklyWWl2QlRZR2t5SEdUb0dqU1JlaitBS3hFMlljQ1lvK0lyVVJmVjJFRFI0RU5FYTQxcW9xU2lzU0dhQ2lscXptcWtkRTBjcnd5S3JZcVBKMDhBLVE1QzRaMlZWTmgxWGFVMVR3UkN1RmRWY0RFUWEwaFVqeHJ1cGVWYWhhTnIyd3lwNEpzT0FzQkRYZW9vTDZ5Z0dyWkNiRTFBU1c4aWFSUXBvQ0s2UVNQcjFVQnFsY05BdE1JazF3RjlVcTdoeGNNM3FvY1RnUnh3MFdiTFdoSHNZRjlhb0NOdlRXcXJOYmFPMFlocmIybW9MbHVUS3JyQzJyTmxhODFkcUlyV2hWb2JaM051SFdKQU4ycTgyM2oxVTZMd0VhZUJIdkdzUVZ5dzB2RFd0WVJpUk5VQWJELUpNY20xTlBCWm9ucjBzbWh0aTBMSC1MZllpSXRMNjMxZUVsZjJ6bCtpcEwzditlTmJNUEFBQStzSG5RUHA0RGFha1pxaEZFa1dxYkE4RUFEbjZMdFpCckIwSm5VZFZ1WGl3SndUZVU4QUFFTEJNUkptTmxNZ2VEVlZ6TElZQXBBUlJTQUZLWUNBUXA5a1p5eUJZY0lPeFNBR3pJTmhzQXBnQ0pzU2RLbVZjMUp1YXlrY0hSbVpwc1dOOURrcWdLV3lBSlBiallwWEhnbVpaT29CelpLbENna2VQQ2lMUWM2UU9SeENJbXFqbTJRSXBaQ1pqYlR3TnpIbnRLeUI0TFMyUW5tLU5lZmM3cFpFVWRkejNOM09Xck5ZQllDeUVnTG0rTlVKb3ZvbXBBQVdRYUVTQVpxQTVTSWlTNHJPTEpvMHZFak1Mb09NU0k0dUszMDRWakxKV09CSWlxNXVycFlBVVE4QXNUbGlBLXlEWThDUzYreGVMWWV0SlpuT0ZxRUZuUlJ3R3N5ZUNROW5BdTBsa0VTV1FCekZGZFdXSjBHd2lGS1A4c29FS2tWWXJhUjZRdzJ4RDVQQlRaY0VoVUdBOTRiQnFSdU9iR3hidHJFTGZWcElSc2gzYlZzUFo2LVNUcnVrSTJrWUpPZHZVeDZLVGpWcERkaExHSlh1NDIreTkrN0ZJLTFFbmM3MXZTajNJZlhpRElkM1FkZ0xUNUN5T1VuZ3FwYUk4QUFOSTJZa0FDTFl3cG9BYXg0Q2NMRWtSUlNJeUpLUVg4QkFNQWZPdGh3QWdURUNnYkVXQllEVEJ0eHUyZWNNaUlNeTNFT2JGa0ZBV1FYZ3p0SWtOWklrMXh6NGZ5N21uR205UFZFUkh1cFBMMDlQQVB1TDB2ZGV3bWtHVFFVZ3NmU0lEaE5Ec0FIVTVCUkFISUlBY2lTQlRES1lHd2FkTmhvUkhETUlUSjB5eHhBbWxaTjIyMTJsTXdaaVY5KzNYUFdOZmg1MmhZZzVEQ2xFOVpzQ0hzUG4ySS1tOFJrZWpFSVdXczhIajdwUlBiN2sraDRwR24zUEdmbzl2c2NiSHZQbVlEcUY2WXluaWsyZnk5UjZQV25tdjhlc0s1Z2I4WHNQTGV6ZHQ0SkRudVBtWjBhOTZiOFAxdmY2ajFWNUg3WGo0UGVnOFlpTDVQdWYwLU04eDl6LUgxNFMtVHBRbFh5WG5yamlOLVIrejUzek1yczktNzhQMkg5ZmcrWi1ILW4tSDJsMS1aeUxRUTg5MDY0T0gyRWI5OGh3TkxGSGdBQWZrQUsrQUZILTJnMUFKZ3dnTWlGQmxIbEhuMDFXMEcxdUJnSEMyNWhlQTJYTG0xRndCQUJhRlRHUUV3RkFHZ2l4ejJDSUx3S3lBSUpUUTV6a0V3R0hqd0h3S2dBTkFEaTlqb0xoR013b0pnQ29JRGpvallJWmdZTW9LWU9vSWdHbEQ0STRNWU9ZSTUwRURFSUVLNEtFSURoU3hrTTRPNEk1MVVDVUlrT0VQNENVTjJBZ0NDUjlBSUE0R2FCT1VPV08wMkNVSU1PaFdEZ09VUUE0QUZYWlQ5d1poWUJkbmRrOW1sRllMd0FGUlRBUEFBRWNJRUtBMEFXQk1VUUF0QThBelJhQmFjQ0FpQ1FpUUFqZ1RnemhJaU1CUUFnb2ZCeUNDQTR4bUFNQk1WWGd0QWNpdEFnQQ==" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="custom-search-on-a-linked-list"><a class="header" href="#custom-search-on-a-linked-list">Custom Search on a Linked List</a></h2>
<h3 id="instructions-13"><a class="header" href="#instructions-13">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that receives a number via STDIN, goes through a linked list and prints the index of the node where the sum of the two stored values is equal to the number read from STDIN. In case none of the nodes in the linked list fill this requirement, the number -1 must be printed.</p>
<div style="text-align:center">
<img src="img/ch06_06_01.png" alt="linked list"/>
<p><span class="caption">Figure 6.6.1: Linked List</span></p>
</div>
<p>For the linked list above, in case the input was 134, the number 1 (index of the second node on the list) should be printed as 56 + 78 = 134. If the input was a number that is not equal to the sum of any of the nodes (e.g. 8), -1 should be printed.</p>
<h3 id="input-8"><a class="header" href="#input-8">Input</a></h3>
<p>An ASCII encoded decimal number on the interval -10000 and 10000.</p>
<h3 id="output-8"><a class="header" href="#output-8">Output</a></h3>
<p>Index of the node where the sum of the two stored values is equal to the received value, if it exists on the linked list, -1 if it does not exist.</p>
<h3 id="examples-7"><a class="header" href="#examples-7">Examples</a></h3>
<p>Example of data.s file that will be linked to your program:</p>
<pre><code class="language-riscvasm">.globl head_node

.data
head_node:
    .word 10
    .word -4
    .word node_1
.skip 10
node_1:
    .word 56
    .word 78
    .word node_2
.skip 5
node_3:
    .word -100
    .word -43
    .word 0
node_2:
    .word -654
    .word 590
    .word node_3
</code></pre>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">6</td><td style="text-align: center">0</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: center">45</td><td style="text-align: center">-1</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: center">-64</td><td style="text-align: center">2</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-13"><a class="header" href="#notes-and-tips-13">Notes and Tips</a></h3>
<ul>
<li>The head node of the linked list is stored on the address marked by the label head_node (DO NOT use this label on your code).</li>
<li>The fields of the linked list node struct are VAL1, VAL2, and NEXT, in this order. VAL1 and VAL2 are 32-bit <strong>signed</strong> integer values stored on the node and NEXT is the pointer to the next node on the linked list. If there isn't a next node, it will be a NULL pointer.</li>
<li>To check if the received value is on the current node, the comparison VAL1 + VAL2 = received value must be made.</li>
<li>A NULL pointer is represented by the value 0.</li>
<li>The indexing of the list nodes starts at 0 (i.e., the head_node has index 0).</li>
<li>All nodes will have different sum values.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15bUg4YWNWY2VBRkVBRHdBMk9GV2VWR1hTVkJnYkFubEZkeFYxQmlaZ2Z4NGVGckk2T3p5dUFBb0FTa3VZYSt1Q095azZWK25QanhTQUFMRWhtT3hRSGdBWGg0T1FBN2p3aEtJSkw4bnFZVnRJYUNSVUR4Vm1aVmhnZUFCaE94a1hxcVZBUU9nMFlFOExJOENBOEVLd0FEV3FCc1RLVXBoZTAyTXBIOGZPdWpsNGRGaWxXaHNOUUNMQ0VXaVl1NC15dW54QllKYU9UeUJSZ0JETUNGSndLZW9yaVBLVlF0UXZIRXJQWmNBdFpBbEt1MWFCeWRBYXFHdGxwc2JySWNCZ3RpY2lvK24yRlBCc0RRZ2NBQVJ1SU9PR0FjclFkcUlXWUlEWVBic3lHaUE0RFRFVERBZ29QTjhsbFREZ1RaOUNBQlBHQTBIaHdhRUFQajRwY0Joc3FabEY3Z1Z4c3pnT0RvWWpVZkRkdmpTWlRjR2QrME1jQkQ1Q2VGcGdiSTlOdElBRzBBQXdBWFM3UGJqWUpzcUYwRUFjVkYwK2IyRURBT0poRURoMEY0OXJNbVhZcCthdnY5Mit1OThUVWVRVDN2WkJzSEIyS1FBQkNkaTZMbzBnOGlZM2FBcCtVQm1OK3Y3RHYrMGgwS0I0R1FTVTBIdmtDdzdmbkFnR2tMcXBCdnUrOTc0YkF4RndDZTZTa2R1VUM2RWh1NzdvZTRqSHFlTURucWdMdzhLS3BCMkhRSHlrUGNxQ3h0dWZFQ1I4QjdpQVFvbE5wOFdpeU1BQjc1bkFsSjBPSTVhRXNKZGlvRm84bGJwOHBad1NPcVpPQ1I4bW1BQUt1WlBBQUl3OEU4QUNPdWxrSnFMekZ2SmY2Qkk0YWt1WkVVQ2tPV2NCcGhaTUZHU0FxekdBS3VEeWRjcGlydEZNeXhlRjF6VkkrU0NpdFJkaFZvV01DRWs4RUE0T0dQRlFnMkVCbU1KYkN2TkNNTGhwVkRCZ0RWK25oUjUzYUdSK3c2SnNtWm5wcFpJQTJiYUFCTWprdWVaN21lZUYzbnNMNXFEK1JhUVVoZVpHWTRhWUFBc0FDc1NXVGF0SUFBTFIyZHRLVTRlbHVaVXE2dWc1UnFXUUZVVkpYMWd5RFhWYVZkVlBVMVBFdGR1YldBaDF1Rmd0MW82aFN0UGJXYlpBRE1vMnVYbEhuSFQyMDBJTE44MkJjRlFOeFgwZTJyR3RSMGxxbGZSRGRqYU9uZXc1M1pibG1xM2NWcFhsVzlOVlFxOVZYdlYwQm1sbDJwYTZGd2psQnBDTUpyVmhrSUFEd3duWnE1OHdBMUtMUEh2TnVRYmpnQllCTGJhTUwzbzYwZ3VnckpGemd1bm9yblptNWlUdUNid1QxNnZBOXVBQUdnMjhBQUpNQVVCYUdiT000ZkRpTjJBRmkybzdqMXl5NU9vVnJ1dWpzNGJ4RkJ5K3J5NjZ3SEowWlNUbDFremRqbDNWVGowTTdUOU9OYThuMkI5OTc2LVJueGxkZkJKNmNlSVk1T0VlRXExbVZqYmhTMjNCdHZLSzZtS0ZKZmZHeHhUcmtPLTN3VTM3WkhnUSt1bXJ3eURPbnVFb2ktSkRHT1NaM2VsNjNmczhBQWhEQ3E2UzJqUWJ3S0ZoeEstbmxYbWMzdmNJWHN5QWdtajdPZExPWm84Tno5bDh6dy1Pd3VyZmVYK0xLK2V6d1EtSmppb3RiNTNPOWVqM3M5UUhYUDNCU2FOMzRqeGhFOE1CT0lBQlU5bGw0OEFzSTVkZTVrQ0FIVit0Y0RPelo2NTF6aU11VXdoZElod0NnYVlkdU1Jb0c4bkNrR1NNMFlKUTEwOENyWjB1d1M1eERvcDhDU2drZUJtd0FPTEQxUUlTRzJVQ3RCbUI0QUFFUTRIQ0dBVVprdzhITElCVG9vVmVMMXdTTDBCUWJobEM4RzJMa0lDbXBiNk1tQktLWFFVSWJad2xnQUJPRVpoK0JSQkNBK1VVTG9BRHk0WXZDNUZJSllrSVR4cUVsUjBHWXlSSEJreFFsTU5zZFllSTZHbURyRThPWVVBYUFzaDRNQ2FRM0YrWXVEckdZSktBQk5RQ053S0FNaGtod1lNNGlmSFNKQkRpYWNqSWFJNGhCQTBIZ041RGlhM1pFQ0hKc2lCSThBUUFZZCtSaCtaNklNVVk0QUppSnptTmNUWXlrdXdIRk9MeUs0cDR4VCt6UmhlRjR2SlVpYkQrSkFNVXN3eFF3bXhORkM4QkpFQWtsbTFMQm5GcVNvQ0RBakFyb1J3aFU2RE9uTEc4YkNueFQ2Y3d2bGZLa0Z5RDR3Q1ByU1BhMTlMNDhBYkNMUytlMDlxUzJ1WUNXNHZBdkFTZ0FMSU5HQkdZRTVIQm5nUXBCRzJZT2hnYXF3S2VKQ1VXOWtYaFFYa3N1UjVFQnl6TGtBYklQRkJLdkRybElUd1hGNXo4WExqSmNTNmxCTEFGQU1CVjBGbDdDUGdrcXdrcUxRRkRyZ01MVmpVeGNTaHZTK2dJSzhLV2dZTDZOSElNWEgwZTVONS1XMUxMV0FKRmhhcmxrRU5WY3k5OVpyMTlIQUVsRW84SGhWTUxFNU1JcTl3WUNTbVlPRVhBT1RDeXRUYXVnSEk5cFkzOE5hMjFzSTlXSFJpaEhDS2NyWFIyVXRXNngxSElOcFJXRFI2Z0E3QUFEZ2RSNi0xY0I4WSt2Nmdtb2FRYVlEdXFkVHdER0cxWFVacERUd0RhQUJPUktFYXMwSnJCZ1RZMUlBSzNwc3pjNnRWY2FzMHVzcldXamtDYTgwN1UrRUEwc1Fadmp5d0FHNlJGMHJJUnd1Z3FCRHZFTHBIVkY5dGhLRmdNZ09BazdYS0d0V0xJT3lZTTFxeUF4bHU3TmRrMXBneDdkMlc1NTllQlgxNXA4dSswckNIK3NmbEFaK0VyQVFBU3JqaGZ0UzdoMlhrVllpLVlLcW5nSFMxVnE5ZEFIdFZvd25rOE45eTdMdzh3Mm04Tkcxd1dqNUJnTk90R21DRktWTkJJNFJ5YzYzSXZQZlZPcHdaaFlCekRzUEs4RGRoQjBmcXhjQTdEaUhGMlFlMUxxUTVaR0tQNGZRVHdNZEU2UDBkeVZjSFg5LTZBTkFZQTJ4dGUyd3FEK29sQUxPcE1yelZPR3pmWkhnQUIrVGhDYWJiM3JzdmJIZ2hJRXBUSGtnbWtsT285UlBETmlwMjJXZzYwRnB0aHh2RHVsOUp0cDREYkNEWEgzbFdjZzdaLU5IcWJZNUIyREp0elpzYzZsajB3eTdqeXlqbmdWT1lGaTV2MTJXVW9pLWkyUU5HRjNXYWNFZWpCQW9BekcyOXZMWXBUeFl1WE1mVGNMSXRwTWpnTDZHWVpBQTV4QXhNcEI2ZjFWcmlsSFI0QmkzTDNnT0N3RFJDQWJrTTdlREZJbFBDSGdOa2RpTENyTDZQNHBnZ0s2RDJyR2tBTHd6QjdHSzZnY0p2cGZwVUlITDFxVVBCZ0lEaWVNdVlwLXMrQkJTa0ZwLUFDQUVhUklhSnFDdzRSZGlrRDJuY1NrWUJUQmFHV3hmVXBhMkVRQURGVHpiWThYdDB3U3ppaS1WR0FXSm9DRzJnZEFRcjRtclVwcUpmZEtWRnMwa2tlQWVOalBzZ015cktCUERBTEFXUWtCbGd2eXdmeERoOEtvVXdyaFpDNzljc1VXT1Z4M0pySEh3TVYyU3hZMW5nZE9VZHBiNVhzVldUQ2dZSmR3LVItSGtyZURzeHloeWIrUEdmMFktVlR3TUd6M2VDVHRrS1k3WStzd1BDLTJMVkhneTk4dlhFVjhzQ1VCMWdIUHExNThTZHdYMGNrWDQ0QnVCUW5nRTZEaEJobkVUeGVkMFktZHFJalU3U09UcW83c3JZTWtjUkc1MXhLTDladW5oUzZkMGw3VWpnWGtnall5Ym1FWWY2T0V2Mk5zRkxJRHV4Y3hnTVJDVVpzYmFUdDgxMXVrUUZNOHdtejdiSlB5dzgrbG1pNG40aXNoQ0xFUlR5MVZIZldWaEJQK0xnRUFMUVR6SUV3S0FEZ1RCTlFFQjd4M3JJWGU0QWtBZ0hJVEFPbFVCNEU3MUFSZDQraVJUNUVyUGtmOCt4OEVBZ0NJNWZJN2g4d0ZIK1A5N08rWjk3NFA1dndReC1WLTctWCtQc0ZsLVQ4MzgzNm9lLWMrRitiLTRQZnM4a1pYUUVBNE0wV0pVUzRZSEF5dzkrdisxQTVBVVNpQXJXbEEwZ1NXTEFxNHl3a2E3MnlCeUJTK2VBS3ExRW9vVGtZNEZBYUFMQVEwRzBJQWlrSUFCQTVZdEFrUU1rUGV4QmU0QTZrU1RnVkJXZ1dnUUFB" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="abi-compliant-linked-list-custom-search"><a class="header" href="#abi-compliant-linked-list-custom-search">ABI-compliant Linked List Custom Search</a></h2>
<h3 id="instructions-14"><a class="header" href="#instructions-14">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that has a ABI-compliant function <strong>int linked_list_search(Node *head_node, int val)</strong>, similar to the one implemented in <a href="ch06-06-linked-list.html">exercise 6.6</a>. Your code will be linked to a code in C that calls the <strong>linked_list_search</strong> function and expects the return value to be the index of the node where the sum of the values is equal to <strong>val</strong> or -1 in case there isn't such a node on the linked list.</p>
<p>In addition to <strong>linked_list_search</strong>, you will need to implement a few utility functions that will be required for this exercise and future ones.</p>
<ul>
<li>
<p><mark style="background:transparent;color:green">void puts ( const char * str );</mark></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Description</th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://www.cplusplus.com/reference/cstdio/puts/">puts - C++ Reference</a></td><td style="text-align: left">String terminated by \0</td><td style="text-align: left">-</td></tr>
</tbody></table>
</div></li>
<li>
<p><mark style="background:transparent;color:green">char * gets ( char * str );</mark></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Description</th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://www.cplusplus.com/reference/cstdio/gets/">gets - C++ Reference</a></td><td style="text-align: left">Buffer to be filled</td><td style="text-align: left">Check function documentation</td></tr>
</tbody></table>
</div></li>
<li>
<p><mark style="background:transparent;color:green">int atoi (const char * str);</mark></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Description</th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://www.cplusplus.com/reference/cstdlib/atoi/">atoi - C++ Reference</a></td><td style="text-align: left">String terminated by \0</td><td style="text-align: left">Integer represented by the string</td></tr>
</tbody></table>
</div></li>
<li>
<p><mark style="background:transparent;color:green">char * itoa ( int value, char * str, int base );</mark></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Description</th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://www.cplusplus.com/reference/cstdlib/itoa/">itoa - C++ Reference</a></td><td style="text-align: left">Check function documentation. Only bases 10 and 16 will be tested. The tests won't be case-sensitive.</td><td style="text-align: left">-</td></tr>
</tbody></table>
</div></li>
<li>
<p><mark style="background:transparent;color:green">void exit(int code);</mark></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Description</th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th></tr></thead><tbody>
<tr><td style="text-align: left">Calls exit syscall to finish execution.</td><td style="text-align: left">Return code (usually used as error code).</td><td style="text-align: left">-</td></tr>
</tbody></table>
</div></li>
</ul>
<p><strong>lib.h</strong>:</p>
<pre><code class="language-c">typedef struct Node {
    int val1, val2;
    struct Node *next;
} Node;

int linked_list_search(Node *head_node, int val);
void puts ( const char *str );
char *gets ( char *str );
int atoi (const char *str);
char *itoa ( int value, char *str, int base );
void exit(int code);
</code></pre>
<h3 id="input-9"><a class="header" href="#input-9">Input</a></h3>
<p>Test Case index and specific input depending on the test case (check <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch06-07/example.c">example.c</a>).</p>
<h3 id="output-9"><a class="header" href="#output-9">Output</a></h3>
<p>Output according to the test case.</p>
<h3 id="notes-and-tips-14"><a class="header" href="#notes-and-tips-14">Notes and Tips</a></h3>
<ul>
<li>The <strong>linked_list_search</strong> function will receive the address of the head node on register a0 and the value being searched on register a1, and must return on the register a0 the index of the node, if found, or -1 otherwise.</li>
<li>The fields of the linked list node struct are VAL1, VAL2 and NEXT, in this order. VAL1 and VAL2 are the <strong>signed</strong> int values stored on the node and NEXT is the pointer to the next node on the linked list. If there isn't a next node, it will be a NULL pointer.</li>
<li>To check if the received value is on the current node, the comparison VAL1 + VAL2 = received value must be made.</li>
<li>A NULL pointer is represented by the value 0.</li>
<li>The indexing of the list nodes starts at 0 (i.e. the head_node has index 0).</li>
<li>All nodes will have different sum values.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15bUg4YWNWY2VBRkVBRHdBMk9BQjJIbFJsMGxRWUd3SjVSWGNWZFFZbVlIOGVIaGF5T2pzOHJnQUtBRW9ybUJ1Ymdqc3BPamZwbDhlS1FBQllrTXgyS0E4QUM4UEJ5QUhjZUVKUkJJLXM5VEN0cERRU0tnZUtzekJzTVBJQUVLQ0FDMG1YWTRpZ0hoNElWZ0FHdFVEWTZVb2VBQmhPeGtYcXFWQVFPZzBFR21WN1RZeWtmeGltNk9YaDBXS1ZHRncxQ0lzSVJhSnk3Z0E2NWZVSGdsbzVQSUZHQUVNd0lMa2c1Nnl1SWlyVlMxQzhha3dKazJPRFVzZ0tuWEd0QTVPZ05WQXV4bk0tMWtPQXdXeE9UV2ZMN1MyNWh1QUFJM0VIRGpzbXBjZmppYmpnS2pkcmhkakFjZWs3ckJ4cDlCMWdwR2VBRVlBQXkxbkFBVmxyMWV0a1p1SG9oVURNRUJzenIyWkhScmErcG5aaGdRVUhtK1N5cGh3TnEraEFBbmpBYUR3NERDQUh4OFdkQXkyVk15eTl3YWx0QW9HWkd4K2hOSm92Zzd2TzBzMlF4d0d3TkNEUEIxT29Pa0FEYTFZQXVpbUE4NnJwZnBXZjY1dm0waEhzZVVwUUdtRjV4bGV4bzN2NmNZUmxCYmJGbVlaNjZCQURoVUxvNDc3QkFZQzRyQ0VEd3RBdkR0cFNZNk9NMFlhb1doN2FRbVlpYklNODdaa1BlZGlrTVNkaTZMb0VFbENZZzVBa3huYXNleEdHY2RJZEM4ZnhnbkNXaHdJWWF4Y0FjTnhwb1ZwQlVIdHFwc0NhWEErSHBBeFVGUUxva25nbGhPSGlIaEJFd0VScUN2RHdzcWtIWWRDZktRRHlvRm1VRXVXNW56WWVJQkRlVnVYeGFMSXdEWWVPY0I4blE0anprU25sMktnV2loZHBpbmFoaHpGSVgyRmFoYVlBQXFUaThKV1BCa2h5aEM0dFcwNmhSeGdTMGFnQUNPZGlSRkFwRHpuQXVVRGtwcGpWUkt1Q2hUY3ZYR1AxTTRpVjgxVFVmeWZxNkhZUzZUakFSTFBCQU9CeGs1MEliaEFaaWVXd2J3d3JDY2JiUXdZQjdhbDQydkxPTGF6dEdFVEJYQXBXd3UyZDdsczgxYXlBQVRPbDBhY0lvQ1orcmRUajNRcW42bUhJUnJ3dElJMHpMZ2ZSZ3dRRU9kUENiVWdqVVNBMEU0VVBUbjBGRHc1RC1VLXJPWWxkajJuWEZkMXg2RmNWUER2V1ZGWEJUd2xZMWVOZFZVbjZUVXRkUzdXay0yZzA4QUFCb3otZ0FDVEFEOXhCLWMwbFVFUGRuNEEtZFA1YUh6WTFLV0xNRzBRRDB1VnJMbFh5OHJhR1RhTzAyR1hOQnBaRXRLMXJldVBCYlR0SjNyUWRSMjdVNVoxUVJkZzdwVVRPVmstbElCRlc2QURNdFBzcFYxTk16cFVuMVd6eld0VnpYVzg2WTcyWXdONDAzSHpJc3dIbUJaMEtsLWhLN3pCdnNFYnMzellhNXVyZXRtMk8zYiswOElkdHVuV2xsMmlvT25zazNINDJVMjZBQXNRY2gtN1lmSGl6Q0FOZEhuTWRlM1NsOC0zd3ZBQm40SFoxRGVjcC16SXZ0aUNPeDBXZXp4ejFucnc1ekFTOUtRWFNDeXNiSmRtend5M2wxYk52SFh0MElPLVh6dU4rN1BrWmJhdkJ5ejNqMFljOWxDdlI5TDZPWlZZU3cxbkFiK1BBUVlnQUFDTHFUK2xEZWtPUmZDalQ2TEF1dzhELUNJS2NEd0pHb0pVWVFIUnNnNkdzaFRCY1F3VEFCMEdOOGFFeXlwMkwyUE1PNit5cHZXWHU5TXU0RDFFaEhWbU1WUjV0WEh0N1plZk4yRXp4QWVyS1c0RHRaM1M3Z3JRK2FGUkgtWEVWM1NSZnBwRjZ5Z3NmSXVKc0ZwbDB0aHRaU3VvdVNOREFIUlF1c29yNjEyZnVkSnVFb1c2ME9KcjJBUlVGTzY4RldLdzNFOVlPR1pYQkxVWWVVY09aOE81bmxaZXBnUEgrRldFbk5SRk1RQjlXSWZuR01waVpwYU5McGZDMkZkclpWM3ZvLU8rbGpYYldKbUxZOEUyVTI2T0tpWDdYZ1d4eXJCM3BoNDVPNGR2R1J4NGY0Mk9KU25FZ0ZDVEFMdTdUUEZBbE1HU1FXc1RsNGFOUHNYVTJpMFVuWHowYmZKMk5jNjdaSzZDLUlFVjFCeTZDNEpmYU1VSllRQUE0aEpRZ0FEeXdockRzZ0ExRWNweUh3b0xSanZBK1hLQ0V6QmVta0w2UUpyNEFJZmstTzlIODZWMEtGTG9jVWhoazh5azhCRmxBSFFsU1E3MWxrWFU0MFBpUjVOUDRYOHBTLU4ya2l5dWNZM0szNFpHUk44aFFlOHFMaXFmaEFwaTQ4d0FwckRLU1JmSyt1aks1UHhtUmt2ZXZNYmh1eVV1bEYyNzk5SEdtWXZoZXk0ZzREN2x3Z3FWY2Vqem5IaDNOd1BjNm92eW1GeWp5cHd1RmlnLWx1Y3hLVnZLYklFRGZoLUhneUFmUm5nVk5XTlZQQXpLWHlKa3FtVktyMFU4QUFJU3dtYkp1WmUwWjRDNVNPRC1iNTIxaXJTcCtDcWxpK3hrQ2dsNWlzem9yNGN3YklaanNuZ3V5NFNCTlZmcWs1Wno2VWFxMWJpSTVUcjJXZG1OZTYwZ0JCUHhRQi1IcW00TEtvS2F1N0NSUytCYnRVQUNvR2JXb3NKZmUxeFVDQjlNK2ZNOGFJclBETnFnWnl5SWNBUzJvRk1QSzJFWGJtNFhKekhCQlV6YTduN0FlWHNhVmNRVEpmRDh1NWZtQUJ4ZU5SSVJaZHEwR1lIZ3NENFFVSTROMkhnODUxS2RCdWMyaEl2UUZCdUdVTHdIWXVSdUtHbERSQUhnSUpaUzZHaENMSkdCd09Ed2pNUHdLSUlRekQwRDVIc0FBOG5HTHd1UlNBLXBDTThPQ2U4ZUQzbTNZbWJzMEpUQTdIV0JzTVZjUlRCcm1lSE1LQU5BR1NQdWtJNVhaTGcxeG1DaGdBVFhVcmNDZzFzZ29jRGc1K25kZTdRUzRseXJBWkFNWnRXZ2dhRGd3Z1BBM3pNbUJBeGc5YmtlQUlBTUFXb3d1eUgxUHRRQyt0OXNCNFBmdC1mKzJVdm9RTmdieUpCbkRzWVlNNkhnOHhtd3lHUURzWmdNZ2Y5V0huanIxbEs4RWpFQXlOODFuQ3lzNldvYUNHSWZDUzFBNWkxcEN2VlRzS1FlUWhPa1RNQVFZZWJWbmdBSElvYVJkZUdZSXlleC1qUERhcWdJd2VpVXRHRXRYMFlVUUNaUW10NEE3TUxuTW9zeGJpd2w2UXp4a3Q3RFN4dURMRnJZUitCQUs4ZEtjN1BnQmZBOHlid0hCWUFsZjhMRm11eXJQQmVHNnpBWHJNQll0WmkwQU9tb0lJK0s2RWNNdE9nUHA1enZGWlg2dFpnYUZUOG1XNTY4emVEeXFWaERSdVhWK3F5UmtqT2F5bTRkeGVCZUFWQUFXUWFDQ2VMaVlYZ1BkQkh1YkZoZzlybHVTendJNURObXRDVkNwK2JiRUI1eVp0QXFEOEhYZ2Z5OXNnVkR6OE1QWkFJNnpkbTFsT2haeXRldGt0c0hRUEl4VFpzVGNkZXl4TjdlWUFHNlJIZU5kSE1kZ0tmaUFWSFR0Y1RQZFhVOTRNVGhValhwczNIV3dHM2dRYVR0N0o0TnNxTnB5LVBabDREaFpZQ3BhZVJCNEFBVWdacXNQVkJybHAyQ2wydUE1elplYnM5aEtvSGE1bjR1SkhaQ0Nma0k0dDZTOXBqV1A3UEJJdHlFaS0razNkQXplb0RrQldac1RsLXZFNzFSSVlLMnVkZ0tqMXd3QTNQUXdERzlOLVJDMy0zSXZWbnQ0S2NQWjVYZXZXYTlicjNvVVpmMDloTThkUHROSmRPU3JaV0pYb1U3Z2NFY0N4RGdiRjA4TnBWOW5oK1BCbXhpNkJIR2RUREk5VVk4SEhtNXlkcC1LRWVXSk53bkdyeDAra25ZSndDU2dReGhnSUc4TVgwWkdqa0c1YUdNOGpxMlVmYkxQLUdzYjFxYTFseXp3T25EMUlFMWxrUFdWWXNneVNySHJGM0UtNi1zMnM1MzVFR21zSlB4a2d2endEWW16RDhBRTROOVAtOWdUUWMwWWZqR0owN0pRcGp5WlVCQUVoUi00NWc3QktBY1p3RGdGTDZmakg0TXorelA2bjZvR1ZoZHctNXZ3ODdySUtoZHdocGhxejRkb0w1T0RIS2k2aFQzZzJwS1FBRndHUkRKUzNKLXdWaDlKTmdiN3I1YjQ1cjZxNkNYdzBIZ0UxeWRLcllXQlZvQUNLeVVaQWQ2T3dSRXZpc2FMUStRR2NFQlNrSGV1YU9DWUlqZ2w4MEJZaDVtdEI0Z29oWmdzQWN3ZGdpK3p3UEJkQmprRGE2aHNoeUFXaE9ocG9CQTVveGgyaGprZXFqZ3VnWUJKaERCMktMMHpCVFlzZ2JCelllcXUrSm9ab0FhTGhWaGpob1VkTzcwZ1J0aFJoZVlvUnRNemhyaERoekttT1hlODZuNHUrc2dFUnNnNWhzQjhCMSsrTy1lU0VLS2o0ejR6d0dSdCs0Zzcwc2dPOEVFMCtPWWM4NCtpK0RPa1FsWXUyM3FJSWI4ZHFFK3dNcGc2ODNZalIzYUlBditRSU9CbTJCeUJCWUVBeGthVUEwYURlY0lFK1VSNW9mTUpCY0FRS2lzaktZVU4rSkIwc3NBYlV3TStSSXhxeXZPK3FPcUV4RFIyeFpCVk80MEt1Z3U1eDNSQjJWeFNrMnhjQXV4bmdOaFN4NmNFK0VPNjZ1K0NvSXN1KzN4SlFueGkrM3haZ0VSZnh3QUVSZ0p3SlRnb0pPUXV3Q29BQVpEQ1Jtak1TQkZObnpBMmpvRDdyaUhNVGNNOGE4WXNjOEduTFBGOFZtajhTMFJDUUNlU1VDYVNTQ2VTV0NYZmxTWGZ0Q1hTYkNReWZDUVZqd0FBSEw4QWhBaEFsQ1ltdDdPYXpqWFpjWkZwT2FEZ0FERWVoMmgycXBncVlaZ1FvSUEtZVYyanV0Y2MyMGcrS3RZQnhYdzVZWUVXY0VKTlIyY1hPUEFVcFdFc0F1SXZKLUpkZXFwTyszV0xJRHc4QUhBZndEUWhveVdsQVBBTHBqeGFFK3BkT0hCM0pZWWdLd0FIRXMyLUVDMjJ4Y1d3MlBXTlVUV0JPeThLSkx4QVFRMkkyWTJTa3NXaWhRNHk4OE1iVWdvbDgzcGVKeDRBTWRlR0FzYVVFbWtrK2NZbXBkQURhQ0t0Y3plcHBTa3habFlwWnk4U2thQTZhMEcxWnRaQ0tGWlhaOGtOWkhCU2tUZWZJTGVkcFRaSWM3MHJaZFo1WjNFaytiVXU2MjhtYzBnc2dWWkE1UGg3dVE1YUVJNUVBWTUrU001Tkc5TS1zMDVCNVh3ZlpDNUw0RFEzV3p3SFpsWjNacndxNTFaUGhxd2dPWlp4NE81ZTViNXhaWGNKNXA1QStuWmE1QWtnNWI1UUlmWmdGZ2tJRlh3dDUtWlFGUFpLc2M1TUZFRmJaMjVEWjQ1YUV4WjlZdjVwNWRPVzJqUVVBTjVkb2Q1QTVyNXlGczVuWkY1enlqb2dZUUUxQXNVZ296d2lKZlJ6b0pCbVJsT2o1NjVGYUpGZjVOd0g1VzVRMHBGY0c4bTFrcEFXRkI1dkZiNUhlcm1nNFpPRHBLNEI0V2toWitwTHBFNmQ2cEVlRkJGQUY5NUhCVHBha3JwQzB6d3lsUStob1BaMEJidXlSZzRrcFFJMFlUNDVBQ29DSVBBUlV1d2l3UzRZWS13cGczRXVnWklteXdvWmcrd3A0M20tbDIrdzZzSTlseElHWXp3bjRObEVBb0VJWjg0VWdSSXBnRUFDQTRXRVFDMEZnNFFld3BBWkk5d2ZJWUFwZ1dnMitSa1JhOWxBQVlnUkJGWEJLQkpLc1ZCeHBaazFtLUtNQk9FMERJVzBCMEdYdjBRaUlaT1ZVVlMxcWtaOEhCSDN2dWRiQ1RLbUZQcUtWa0c2UDVRcUpaZHFIRmN5UEpqVUVsSGtEeVVHWE1YNlMwYXhaVVhxdmNJOEx3SUdXV3B5Vy1Eb1B0ZklWbVVDUHFTUGgrTFJmeVBSU2RUd0tXa3hRTWJJT3RlSU9sREpWQUN5QldaZkRHRWFKLU9xYVd2Y0R3T2xISHAwS1dyZWQ5U0RmZFlEZWxQcVZlVkNMcHI5YmNQOWZjTURmOVJlZDlTOWNBVWpmeUZEWjVNOVo2WEdDSEc5YkphWlI2Wi1HR09sRE5meFZaVG1GRlhaVXFBNVRzS1FNNWY1VzVTQUI1VjVUNVg1ZlJJRlowVU9obVBUWWlHRlVtQkZWRlRGZTFQRmRqTWxkU0tsWWFPbFVGbGxUbFVSUGxZVlFSSUxUd0dWUXRwK0pWU1FpQUlxY3FlbEkxVmVYUUhSSzBDWG0xWWhzeFVxRjFRdGoxVy1GamdOVnFGSlRjSXdjOEdBTEFMSUpBTXNER29PRmptOWs5dk5od0s5bzlpdmppdDlwZkY3YlRPN1o4UDlwV01udjl0SFlOVnFQY2tQbjZGMURrWm9mQVQ3VFRid0Nzbk5DeUVtcUhTOUJ2djdOdm5UdmpXZUwzck9Dcm5uUWNEWFBYcUZFcHY3ckNIMG5xcFFZV1RoWVhhN1Y0WFdCV2syRmljb1dyYzhCblpZZkFib1V1SEtlR0hUbHhXRk5zRUZMaVkzUWNNM1Y4aVdCNGYtQnZpUGFFY2FJNEh0aUNBMnAzZHNNc0RBWm5TWWFpVXZjc0xxYm1qZnZwTnhOTmY4WkVQdkh6SHpid09wS1FKcEhmY0FFM2NzSS1mYlgxWkFqZmFRTElLLVpwTHFXZEZKZlpTc0doZ0NMZ0NBQzBQaE1nSmdLQUM2UXRBUUlnN0Exa1BBeThRUUJBSElKZ0VsS2dIZ0hBMUFKWVNRQkFPeUhnMTVJUXhnOFExZ3hBTkFoUThBZWd6QUpnNlF5VlF3d1Ewd3l3OWc0SU93MVE4d3pRNlEzZHJ3NXd3STlnNm9NSTBReVE5Zy13TUk0UkJMQVFCd00wT3ZQaG5HQndNc01Jd285UU9RUGhvZ0NOb2xxRVN3TldNc0JzQ1ZhWTZZK1EzZ09XSVpMS0kxRHloUUdnQ3dPOVBXQ0FPRkNBQVFQT0xRSkVFRklnNjQyZUdUbmhrNEQ0MW9Gb0VBQQ==" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="abi-compliant-recursive-binary-tree-search"><a class="header" href="#abi-compliant-recursive-binary-tree-search">ABI-compliant Recursive Binary Tree Search</a></h2>
<h3 id="instructions-15"><a class="header" href="#instructions-15">Instructions</a></h3>
<p>In this activity, you must write a program in RISC-V assembly language that has a ABI-compliant recursive function <strong>int recursive_tree_search(Node *root, int val)</strong>. Your code will be linked to a code in C that calls the <strong>recursive_tree_search</strong> function and expects the return value to be the depth of the value if the searched value is present on the tree, 0 if not.</p>
<div style="text-align:center">
<img src="img/ch06_08_01.png" alt="linked list"/>
<p><span class="caption">Figure 6.8.1: Binary Tree</span></p>
</div>
<p>The image above shows an example of a binary tree. If the value 361 was being searched, 3 would be the return value of the function, as it is the depth of the value in the tree.</p>
<p>Each tree node is a struct that contains a value on its first position, pointers to the left child and right child on the second and third positions, respectively. In case one of the children does not exist, the pointer will be NULL</p>
<p><strong>lib.h</strong>:</p>
<pre><code class="language-c">typedef struct Node {
    int val;
    struct Node *left, *right;
} Node;

int recursive_tree_search(Node *root_node, int val);
void puts ( const char *str );
char *gets ( char *str );
int atoi (const char *str);
char *itoa ( int value, char *str, int base );
void exit(int code);
</code></pre>
<h3 id="input-10"><a class="header" href="#input-10">Input</a></h3>
<p>Your function will receive the address of the root of the tree on register a0 and the value being searched on register a1.</p>
<h3 id="output-10"><a class="header" href="#output-10">Output</a></h3>
<p>Your function must return on the register a0 the depth of the value if the searched value is present on the tree, 0 otherwise.</p>
<h3 id="examples-8"><a class="header" href="#examples-8">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: center">Input</th><th style="text-align: center">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: center">12</td><td style="text-align: center">1</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: center">562</td><td style="text-align: center">3</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: center">-40</td><td style="text-align: center">0</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-15"><a class="header" href="#notes-and-tips-15">Notes and Tips</a></h3>
<ul>
<li>The root node has depth 1.</li>
<li>The fields of the binary tree node struct are VAL, LEFT and RIGHT, in this order. VAL is a signed int value stored on the node and LEFT and RIGHT are pointers to the node's children. If a node doesn't have one of these - children, the respective pointer will be NULL.</li>
<li>To check if the received value is on the current node, the comparison VAL = received value must be made.</li>
<li>A NULL pointer is represented by the value 0.</li>
<li>All nodes will have different values.</li>
<li>The utility functions implemented in exercise <a href="ch06-07-abi-linked-list.html">6.7</a> are necessary in this exercise.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15bUg4YWNWY2VBRkVBRHdBMk9BQU9IbFJsMGxRWUd3SjVSWGNWZFFZbVlIOGVIaGF5T2pzOHJnQUtBRW9ybUJ1Ymdqc3BPamZwbDhlS1FBQllrTXgyS0E4QUM4UEJ5QUhjZUVKUkJJLXM5VEN0cERRU0tnZUtzekJzTVBJQUVLQ0FDMG1YWTRpZ0hoNE1Sb2Rqb3hBQWJyamliQUlIUUFKNDhBQXFkRlF1TlVxRTVOQkJwbGUwMk1wSDgwcHVqbDRBcmlNTGhxRVJZUWkwVmlsUUIxeStvUEJMUnllUUtNQUlaZ1FkZ0lJT2VTc3FrcjE4dFF2QUFSaHp1WEJTQUxjYkNEZWEwRGs2QTFVSEEzVEJPVnpQZDdkWjh2Z3JicllReTd4QndYYkpxUzdReW1YWUQ5V0R6WkN6QkFiRFpQVTVTT2pZMERUQUJoUXdJS0R6ZkpaVXc0UjFmUWhjbUEwSGh3R0VBUGo0N2FCZHU0WmdGN200TWFCUU15TmlUMlpWZnFMSmJnUVlPaGpnTmdhRUdlWVlqVWNGQUcwQUF3QVhRZFZabkdhenFhWCtaWHBZejA1bk4yWDg5MEVBY1ZGMGpmMkVEQUgwZUFnZUZvRjRaZEtRYlJ4bWtURjlYMlhRc1UyUVo1bHpJR3dPRHNVaGlUc1hSZEdrU1VUQ3ZJRUVLZ013a0pRaDgwT2tPaHNOdy1DU2tJMTgzd2ZKQzRBdzBoTFFyUzhtT0JGaU9HUU9CWUU0dUJmM1NPQ1p5Z1hRS1BCRDh2M0VIOC0zRFFEWGg0QVZTRVpUNHZUc1ZCYzFmTlNOTDBTSUNCMDRjdmkwV1JnRS1SczRCRk9oeEM1SWt0TlFMUlRPNHI1MnhJeDh5eklTdFgxTVhseXg0QUJHSGhuZ0FSMjBzaFRWZVZ0VE5Rd0pvTlFDTElpZ1VoSXoySHpUSnVVd2dvQUptTVdWY0N5dm9nb0ttWWlxSXI1cWtnemtRMTBPeHUyYkdBaVdlQ0FjQmRGVG9VSENBekM5TmczaGhXRVhWNmhnd0FHbHpLcGlxODNPWThGQzJMVXNNb3JVei1NQzNMUW9pOHRvdGl5cjRxcEVNa3JzRkswdTg1Ykt1eWtBQUZaVm55d3EyM092b0FHWXlwMm5qcXZyV3FSSWFrMHNoYXRxT29IWUNSdjZ6cWh1QnNhVkltMThwcUJHYmVMbTBpRnRPM3laMVdzZ2VFZWpiSXFhbUtLdmd5aUVvTzVMcVJPcGFVYjhrQXlRQUZoUEY2OGFZZ0FEV24tQVorNjNvVGRoUHZxeHJUVCs5ck91NjhHQnVoTUcrb2hycFhQYlM5WlN2WFF1RkMrTW9WaEttR0toQUFlV0VncFBWV0FHb2RaVWo1WDNqZGQwTEFVNzczQkFOcEdEWkg5dzlMMWozUFdRN2ZTNzBqeUNpOWRMekJHdkxKNHFHWUM5R0FCSmdDZ0xSV2VLdmFFRVM0blV2Uzh0eWFZazNOeVcwOHp6Wm5qVklvVTNUdmQ5UGlwdVlBYW9GTDZlZCswTC1vRm9HeGVGMFhScmVLSE01aHBpNGNianlIMExYOXczRU5jbkctRlUreTZvZEt0SFR4UjZQVXdsdDduNTVPS004TFlMVWlwNG5iOENDOXAxZUdRSU41eFZiWFRNazBMUE9YdnZaN1RuZ0FFSllSUEEzaXZqZUFscU9YME82WDh0cDlYc2o5bVFVRmlybHpwbmtWbFVRVlZZOERWbkNVNmE4ZUJRRDFqZkI2Tnd0N0ZseERySitQdGo0ejFJQVFJOFVBenpyek1zVmVCTzlZVFBId2JpQUFWTUZhK1BBTENoWHZ1V0FnWklncHd4dUkzRWMyb3h6ajFNRjNTSWNCaUdtSG5yQ1loVXBLcnhtVEhlV0VvOHpCV3lESHNYdWNSeEkzSDBuUVQ0RE1BRGkyOVVCRWhEc1FyUVpnZUFBQkVPRHdoZ0NtWXNQQXVRWVU2RXRWU3JEZUE5Q01Bb053eWhlQTdGeUpoVTBJQ0lBOEJCQUtYUTBJUTd3bGdPaGVFWmgrQlJCQ0dZZWdJbzlnQUhrWFJlRnlLUUVKSVE5elpsZURvUUpSaU9ERm1oS1lIWTZ3TmpqbXNhWWZzenc1aFFCb0FBYTA4ZElWQXJ3MVl1SDdHWU1xQUJOREN0d0tEQVhFQVFEZ1BCMG5HSnNMeFhFUzFZRElBVER2VUVEUWVDZ1NPTlNHQTVUVUQ5TWFLWTh4UEFFQUdIZ1VZTldIaXZHb0I4WDRnSkJqZ21oUENRS1lNTVM0bDVFU1NVeE10NE9wcElNUmtySms4dG93R1FPRW9wendRVFZOcWZVc3dETjJ5TndtakxQVWtpYll1MFBLZ040aHM0ek9tQkJ3Y2dQY1lDSmtmdkRjMEp0WUFWaTFpZVdRdVVUelh5OXZHSFlTaGhsd0daSkVTS0twM2E1VmtKZFdRWklBRHNHeGFWVTBlcklSNnF3Z3JVcHVySUFBbkxTdWwzS05qWVBiUEdVbDRodEw0cGhRN0lDd0F0QmV3c0ZRZ0FpdGpOeHY1bGp6SnFGcFBJakpVQWVUZHFZQXdjSzRDSXZuTHdsVVZ3UUR6aVlPS1RBd1ZaQ21GRmFZSWtlVTdVZ0VjTG9HVU5yVEFBREpqVWhsS3JnUG9EQmtBZ2c5VVNiMXZxNEQ1UkFMSzNWeDVUQVJ2OVh3b2NGcllqZnh0VlN2b0RxYlUwcjZHNjBOZlFmWFhPZWdHLVZVQmczNXZEZGNxbXBnWTFYaWxSUEVBRWFvMUp2TlphdE5SSU0zMnNpSTZuZzlMR1c1cDJSV2tBQUE1ZmdJUVFpdGtEV1drTlBiSzN6amdKZEd0WHQ2M3hxTGFhMkVyYlUzV3FKQ3l6TjNhYlhVMTNhWVBOczZSMWpvblNXa0FRYVoyZXJQZU9wZHNiVUFOb2pkV2tBTGJUQnR1M1JqRjFXYWQzc3BkU2UyOW83NzJYdXZVTzRERjdhM0VUMVkyNjVpNjMxbW8tVnVudFI2UUMtcDROZFR0cnJCMm5zTGZPMVlrN1MzbHR3eEd1bEQ2NjB3WWpRUmhERzZrTldwN1ZUSDkrNmlTOG9IZTYwOUVIQ05YdW5lQjg5NUhvTnh0Zy1Pc2pOSGsyZm9ZMHg4UVBiNlVDb0F6aG9EZkhRTThZNDRwcUQwTGVEUndnRFFWQWdGS0N5QVFIQUw4eXhaQUJKMkJLM2dFQlNXTmdnQzZFTWpoTE5PQXBTdElUSVpjcGtrQXhuYXNMbTRDUFhjLUp6ejdsdk8rYkE2OVZHM21xWitmWS1UTHpMNnlRaGVpNEZxamtXUFVCWXVrbCtMcVcraWtlUzZGbUwxeTZWeGVVeUFkc1FxWml5M2x2LUdGU3NlQWJHQWFBeG84S2pWSXQxdnJLRlFKMExEeDRxSzdTQzl4elozUmM4ZWh1TGNXeUV4Yml4aFh3RDdQRzZ6NldFMU5yN1ZIbFR3SlZXMHNqYkdXQUJhT09yWUVKa29MQWNWeFZtRm1VbVdDUndvVkNWUlJlU1NzbFRnekN3RG1IWWVjQkJwczNkZUJOMHp5eGV0b3NvTThMRndFclB6RnMzQWV6ckp6U09CZWFDZWhFM05QYWQwN3dXRWxub0NBN3N5S1VIbUNEZzdGSzYrUkgxbWdjZzl1d1FhT1pTSVVmZEc5RHd6ZGhQdXdoaHpwLVluaENjazNSSlRDVU9ENjBNd2pTSE1PRE4zMFBUbysyNEVic0ROR2JUbWVCdDRtRU02MXRjVkx0VW1iVXpjeXhkUURZYTcwWG9WMU80akNtUU9tVFV3SnA5UXZLY2k2UFByNVllY2swTXp3eUdUbjRjY0U0K1I4RDFIdDNMVFdtZU96NjVWdmtzTXdtN2JtektPSFBtaWR6YVYzODczZGdjOXpnaTcrUXJzemY5MWFHME0zVzd0Z1VaOEk4VXJaQVIrSmRIckhFc3lzM0NSc25NMjI1eUFvVzlPOFlWTUxmVUVFRWdFZUhQQWp4WjV1TC1VS2R4ZUMrc2dacEV2bldad1Y2cjZsQzBzZVhjaDE5ZG8wVktvUTcxdDlXZU13b3JaV0Q4VE5vdk5vLWdEajhUSlB2Tk0tZ0JELUhEeHhmeS01eVQ3QTdLc1Bma3J5MXZiTTMwWlFFLWxYZ0FNVDNiRlR2WTlVQmhyV3Bsck9FRW5JZUF1aHduaE9nN3RjV2xmYkd2dy1GZ0Z4QWd4NEZwaHp5K0daQTRDZ0g2V29ISUNuRkwwcW5SUjRGRlJ3V0hVVEI0QkRqT1hpVE1EbVM1R2V5bFZlRzhCZ0pnQ1p6YkJBRlNSd1ZueWV4NzA4QzhGSU9lQUFISXlvZUltRFVsVElSOEVkR2dvQWlGblJuc3Y4Nkk2QTNzY0ZPSm50VXBNbGJRWEVtUW9CV1J3VnFCYkl4Um5ndlVEVXFCZlZaQlJWWGhuWnY5cEJSdHI0SnRDVUt3OFYtbDJ3cjhnUjR4QzhQRllRRVErUWRoU0JGaHV4RXgtaFRCTUpkQXlRTmdKUXpCOWc1d0lVZkM0WmhGRnhyQzFRZUJpUnN4bmdqeExEMDQrQTBvcEJsY0lBRUFpY0lnbW9MQndnOWhTQXlSN2dSUXdBYTEtQ1lWUklnSWJDQUF4UDhjSWtSRjBLSXA1UzdWNUdnRm5kc1VZSnNKb0ZvTDBEZ2RvYVFNaVRKVXNCRUVTRW8tSXVHSlBULWJNWE1RRldNSkdaOEpBMmNMSWRHSHdsVU13LVVMa0tRRDhEVkI0UElIZ0RBbmVOclNiU2dWQXlJSEJlNFI0WGdOWTBoUE5XUUVoTURMMkhRUTRyMmRzRkFnVUJrR1F1UXFWQlEwVUcwUTRuZ1U0amdRMWRRdHZYZ1RRcjJhQTJBbFpUQ0k0WjRYYktZOS1Ub0VoZTRIZ09HTVVELUVoTkFkQlVLVzRjRXQ0cUV1R0ZBaG9HQXB2U1kzZ1dFaUUrNEdFbEVraENRanhFRWxBK1haRXVFKzRFekxZbDBRZ1hFT0dmNC1wUXc1NEZBdndyMldZN0tLOEN3bmNGVUd3Z0tYWUJ3bnc1d2tBVnc5d3p3N3cyQ2Rrc3ZWMFFJMVVSRVVJMU1jSXlJaXlHSTlSUG9lSXhJaG9VMEZJdklaMERJaDJBQ0hJOHpQUVA4UGs0STRveHdVbzdNQ28xMUotTXdhMU9HZW96RXVnR0NWb0Zvam9kbzRzSTFOVWJvcTAzb3IyZm9zb29ZMS1MT0E0QWJNQVdBV1FTQVpZR0JGaGRTUlJIZ0FBV1FhQkJETUYwQlRCZUJUTkJENnczSEZqSVdlQmpON1I0RWpNK0Vsd1lSVWtsMUxKRE1nSkJXa1RKbFQzV3lKU2p4dXdJRGpQVXowQXdnT0MrMzZ4K3orMGVseUorTWlGa0UtUzlpbXpsZ2FuNlJGbkFQR0puRS1WM2h3UTZ3MktCQzRKUlZ6SnNBR3lHMkd6ME9Hd214MEhoRk8xeEdlSFR4YkxGVnV6djBleWNCZTNFQkVQK1cyRTZWeEdYSjRFVmd4eXB6WE8rd3hWa0J3THlEd05RQUlPTDBGR0lQQnktaEJHTElZUndWWExadzUxRGxmUERrbnpRTk1ubk45RGRpRDB0eGd2bkdXRGdyTUZISk1PNUtxeGdFNGhtSkRtbnpLZ1poTlBZa0l0aEFaaERrLVJjaFprRE9kQU1uUjA0bGtBb3N3aXp3bW1HSnNKV0R5UmpGd0JBQmFGLUdRRXdGQUE0Q1lGTkFJQkVvRXF5Q0VzRWdJQWdEa0V3Q2Nqd0VFckxUa29nQnJDVW9lRlFCVXBrclVwSUFnRjBTMHUwbDBwZ0Zrb01zS09NcDB1a3JNdjB2a3NFQ3N0TXZNdmtxVE1jcHN1Y29nRlVEY3RVb0VnTXY0RGN2LUdUQkRDNldhRStRcVJkQTRHV0RjcEN2Y0FxVVFGSUwyRmRKbXhZQlBHV0RwVUtJeW95czByd0hSUkVnRkRDalhBb0RRQllGeWt1bWpUd0FJQUlNMUU2UkV2TWhUV1pHSjBrb3dCbFMwQzBDQUE=" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assembly-system-level-programming"><a class="header" href="#assembly-system-level-programming">Assembly System-level Programming</a></h1>
<p>This chapter contains exercises related to System-level programming, which is explored in chapters 8, 9 and 10 from the textbook.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="accessing-peripherals---controlling-the-car"><a class="header" href="#accessing-peripherals---controlling-the-car">Accessing Peripherals - Controlling the Car</a></h2>
<h3 id="instructions-16"><a class="header" href="#instructions-16">Instructions</a></h3>
<p>In this activity, you must control a car to move it from a parking lot to the entrance of the Test Track (shown in the picture below) in, at most, 180 seconds. The car is an external device connected to the RISC-V processor and can be controlled by syscalls or MMIO.</p>
<div style="text-align:center">
<img alt="car" src="img/ch07_01_01.png"/>
<p><span class="caption">Figure 7.1.1: Car Simulation</span></p>
</div>
<ul>
<li>In this exercise, you must use only MMIO to control the car. The MMIO specifications for the peripherals of the simulator can be seen in the <a href="appendix_ale-peripherals-mmio-manual.html#self-driving-car">ALE Peripheral MMIO Manual</a>.
<ul>
<li>You only need to use MMIO to control the steering wheel, engine, brakes and get coordinates.</li>
<li>The entrance to the Test Track is placed at:
<ul>
<li>x: 73, y: 1, z: -19</li>
</ul>
</li>
<li>The base address is shown at the table "Memory Map" (see example below)</li>
</ul>
</li>
<li>The car will be considered to have reached its destination when it reaches a point inside a radius of 15 meters from the Test Track entrance. Your code must call the exit syscall to finalize the execution.</li>
</ul>
<h3 id="infrastructure"><a class="header" href="#infrastructure">Infrastructure</a></h3>
<p>In order to use the car, first you must enable the device 'Self-Driving Car' on the RISC-V simulator. This can be done on the tab 'Hardware' and selecting the device ‘Self-Driving Car’ as shown in the picture below.</p>
<p>After adding the device, its base address will be listed on the table:</p>
<div style="text-align:center">
<img alt="peripheral_table" src="img/ch07_01_02.png"/>
<p><span class="caption">Figure 7.1.2: Memory Map Table</span></p>
</div>
<p>The car can be accessed through 'Self-driving car', on the left bar, as shown in the picture below. The car icon can take a while to appear for the first time.</p>
<div style="text-align:center">
<img alt="car menu" src="img/ch07_01_03.png"/>
<p><span class="caption">Figure 7.1.3: Car Menu Tab</span></p>
</div>
<p>Note that, after adding the device, the car will be placed in an arbitrary position. <strong>Use the Assistant</strong> to place the car inside the parking lot.</p>
<p>In addition to that, you can test moving the car manually using the arrow keys or WASD. To do so, enable the option ‘Enable debug controls’ on the simulator, as demonstrated below.</p>
<div style="text-align:center">
<img alt="car debug" src="img/ch07_01_04.png"/>
<p><span class="caption">Figure 7.1.4: Debug Controls</span></p>
</div>
<h3 id="notes-and-tips-16"><a class="header" href="#notes-and-tips-16">Notes and Tips</a></h3>
<ul>
<li>Check the <a href="appendix_ale-peripherals-mmio-manual.html#self-driving-car">ALE Peripheral MMIO Manual</a> for information about the Self Driving Car peripheral.</li>
<li>The starting point and destination are <strong>fixed</strong>. <mark style="background:transparent;color:red">You have to use the assistant to place the car at the starting point (there is a button on the assistant that can be used for that)</mark>.</li>
<li>The steering wheel direction values range from -127 to 127, negative values steer to the left and positive values to the right.</li>
<li>For debugging purposes, you can control the car when the rest fails, using the keys WASD or arrow keys, with the option ‘‘Enable debug controls’’ enabled. However, this option can't be enabled while your code is running on the simulator.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZUNMb0V3eE56QzFRQUQxSlVHR0lzNXh0VUFEY29HaWNMQWdsZE9Cc0dQcGhrT0dxaXZ4aC1HbkZYSGdCUkpvQjJPQUJHSG1iV21Cc0NlVVYzRlhVR0ptQi1IaDVNOXRJNk96eXVBQW9BU211WVc5dUNPeWs2Qjh5dDhmcVFBQllrTXgyS0E4QUM4UEJ5QUhjZUVKUkJJQWE4QUFZQUhqQkFCWUFIenJhUTBFaW9IZ2JNemJERHlHZ0RSUlRIZ0FCV2tqREIwa2l4d0F0RHdBTUpaUjRjY1RpV0RJSGpnOG04aUIwYkVXZkVFN0VBSXpvQkp1UHlWZGxJcEN5NG9BbmxKWWFaRlpydFFzUUR3b0RaRFNCcW5CWUZCRUJ4aW5kbGtScllyU044UFRBdVFnR0pBNkxyVEFUVktncXRMeFJ3TFFGOHBFZUp4aVBrc3JMalZxc3FxUWJjTldudnFSOWFoM1Nhc3FZTFZiVFA4YkJCV2pOcFk3blV0WE83UFR4dmI3LWRLZ3lBQ1FCeE1OM0NNME94ME9odFhnSnFCSm1BcG9zd0RNLUhoS2xWcTI0aFFqaG1yanljMDdFRUpEZlMzVzIyRDRlanV2QjJXN2lnRXpIdllITG5nMmNKMk1DanN4b1VpclJ3dnlnQUlWMWdoc1Y1eXdRU3RxMXRCTlRIZU13c2lXZm9BR3M0UjRPQTRRSlBoWmpzR05kUUFXVnNCeFVETVVORGl3cHdDQlFWQWdKdGFWVEZrVXgzMVVjaFNEc1lwYnkwZTlIMEhiOVBIZlQ5VUU0djhBSW8yMTdUUEVBb0pna1VhQVErRmtOaFZEZ0ZtWVlxSGNWcFhtQUpvYVcyQUFPQUFHTXdBRlpaRjFHa0FDWXpBQU5sa0FBdkdrdVcyYlROTE1iU3RGa05TYVYwN1lOa01teUFHWTlMTXN4TktzdHpISzBGai1IQ3pNZUVVd1JLR2tIcElsZUQ0VUw0ZTliaWdYUlhsbVRjQ25nY1FPR1FNeEhDbWNFZUZRN1RQbFNuNTJPZlY5dUstVWQrTUEwd2p5SEVjVkFnMFN6RmdISTZCRUFBVkxDUWtRZ0FwVlFBSGtBRGt6RElCZ3BuUzNWTXVsTXhzcXlPQTh1UUFCdExLblFuSEsxdnl3cTJtUUVxZVcyQUJkVzlLdFl5TG5KNFBUdFBLdTlJc2NYZ2VqRExoRUkyczdnWG5GNmVCSE9KRUtSSGd3Z2lhSllrcUlGNzNCU0Y3aHlQSWNvSVphbUxCVjRBY3FTN0lwaHBHLVZRYnBkRmdQRzRHbFpCam5oRGJUQzVMa2tSRlJWcVBxS25GSkhaQjZkTVhkWVcwellBREVlWjUzbFdaQUttU0FnQVdJQm9Hd0NiQVA1VEcrNkdJU1I2RXpBZ0d3YkRnVm95Q0F5TGJsTWZsMkNnWlpKMm95cVpMa3lyYm5SN2d6QkhkeHVDaHJXZmhIUmk2RnplVzN6YVZrYUJtUXdFSDExQTFhY1VnUGp0K2RiaDBHajdlQVBSb0hFT0JVR2xjUWpQRko1eVd1K2RNZm5iR29TZ0pXVmY5alhUQ1phVTRORkVHT0Y0YlVlRDZnT1M3NnVneGJnK25DRjFHQWFEMERDRVoxSkt2aEQtczZHbXNOcUFZOGpYSjRMVGRJTW5oRTlNaXllR3NuaGJQc2tLWFBVbmgzTTh5ZWZMOGdLZ3RYa0wwNUQ3YkV6MjliUHRsKzIzdTFHcHliUG52MHRlQUJDVjRJRVJhQnk5ZHA1NEdJTUFIQ3JONTNuLTd1UGR4U3UwVnV0Q2lFMG93RTBjRkZDUXVSV2cyRWdqOUlCbWN3R21BZ1hvWDJNREhCNUR4b2dzMi0wd3hEbStMb1RrcUFrSHptdXBWZTRCQWhUNFZRU0FBQVZFdzVoTENvajhBbWhOUVFFMXV3c040Y3d2QkN4N2JVUExpVFBzOElSNGJHOG1ZUEVlbHZKZVZIbVlieUd3ekthUzBqdld5QUJPTXdHd05IYVQwbmlWT0lkZEFmVmVIOVhnOEp0SWxIRkF1SGcza3pLV1BGQUFha2NlOEZLOXRiam9Vd2poTkkrRkNJMkdJa1FNaWdrcUs0SHFIUkJpVEVCRkFKNE0tVit3RElRRUVjTEVWNDkxSHI0T29iUXdxK1VLSjhKWVpOVllsZEJCWVZXS29QcXF3bVM1TjRjWWNLb2x5RWh6dm9mWGFxMTFxSFdLbUNVcXE4S3J1SitCZkQ2OEk1RERnZ0xxTXcraERDTFQ3aXRYSytWM2o0TU1iZlhRUEJYaTlMN2tWWTY3U3lxdU1BZEU0UjhZblNJV1dSdFpaclMxbnoxSGpmYUpkeE9pOEJzRW9SQ1dFcXhnbW1nQVIxdHE4Y2dkQjN4bUNhS2NoTVh6M2hNT01qd1J4aXozbWZOMUQ4cDBaaGRULUlZWUM0RmJ6UkdlRXNoQ3BHbGtZWEdSbWQwanhuUk1sZ014SlV2a0VaSmt4UExyQ0FBSk1BYlFOSlhnVXQrVTBXNnRMSVc2Z1pjQVg1bGxRcG1CNEFBRVNVQlFBWXRRakNncjdGV1JaRktoV2VIcGJJTVZpS29Vc3ZGV1lkbDd3YVFVcHVXUVZpLWdieDFQbWE4VlZ2QnNUd20ySHBMcEZ6UVN1ekFiTVRJd29TREgybVZxNUJacnNtTk1uUHRaQSs4VFdaeklCd0JBMUEyQS0wdnNIRTFCQ25hNW1UbmFpaHN5cnBVSnhZNExKeUFja3NNcm13VkFIQk5ROEJpR0xka05nZUNWS2lTSEZCanFscVdwRkIwS1pycTdYNXJqVTZtMVpiS29ldTFONnIrZnEtNTJzZGtRcU80aGhoMUswR1lSVXNCQUxZMy1rOURPSURzNEV4Z0pFT0Exc0hEbUtRaWhMWkRzSWFXd3RxUUNtSUIxWlVDbmVJVWd4UXpxSVV6b3JkZGs2bkRUb0lIYXUrOTk5M1owUFp1N2RHMXRJWFNEVzJ2d3BSS3AtV1FIWGJvaUZMR1ZXTVRVVXhmWVlRR3FzVENiRThTRlpYb0RrZXY0VzZrYXJQQk1CNXhtejhIdnVWdVNSeDhKTDFtR3ZjZW1ERzBvQm5RWVhaTzFjeUYxeEN0b3VsZHBneDBUcFE5MEdXaUZhTmtOZlgyUlVlVkZTSVdYVzdIcVZZLWJMb0RmT1Z0enNlQ1ltN0IrMUF5cmdDTWU3ZHlqZ2lJWUI1V1ZwUEZOTlIxMEVNQnFNb3dDZzNES0Y0TTBYSW1vY29MZ2dEd01FSTVkRGt1QUlpUHRzbXpEOENpQ0VNdzlBNDZ0REdvcUx3Y0M3TWhGZUt4amdpcDNnNkVmSEpoVFpZUUROQzJOc2NqY1JneVpRa2doZGtJNTNpeWdnQVNNd21KN3lHT3VwUXdSd04xamhidHJnRzBXUUNiSUV3S0FMMWs0Q0NsY0t6QVlyZHBTSnlFd0k4T3dxQThEM0ZxOExYa2pYazZ0YUsxQWFZd3N1VmRlYXoxbXJmVzZzUUM1a05scjFYMnVrVUVGTmticzJJQllRV3pOc2J3dFZDcmJhK3QwaS1CVnR0QWdLeHYyTkNaanNra29xRGdUUlZzbmZjSkpSMHNCV2gwRGdQRmNReldXQ2N3Mkx6UG1CV0h0d0gwS2dKNWs2S0JvQllNWlBTSUJuSWdBSUxxV2drUU8ybGNoOTBQbzlJcXZESEVLTWNZVUJKalRGbUQ0VkhlVm1BWURCMlpMUXBPdEJBQQ==" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="accessing-peripherals---using-serial-port"><a class="header" href="#accessing-peripherals---using-serial-port">Accessing Peripherals - Using Serial Port</a></h2>
<h3 id="instructions-17"><a class="header" href="#instructions-17">Instructions</a></h3>
<p>In this activity, you will communicate with the Serial Port device via MMIO. You will need to read a stream of bytes from the Serial Port and then perform an operation on top of the data read.</p>
<p>Interactions with Serial Port can be done through two memory addresses:</p>
<ul>
<li>base+0x00: storing the value 1 triggers a write, writing the byte that is stored at base+0x01. The byte at base+0x00 is set to 0 when write is complete.</li>
<li>base+0x02: storing the value 1 triggers a read, reading one byte and storing it at base+0x03. The byte at base+0x02 is set to 0 when read is complete.</li>
</ul>
<p>There will be 4 different sets of operations to perform:</p>
<ul>
<li><strong>Operation</strong> 1: read a string and write it back to Serial Port
<ul>
<li><strong>Input</strong>: 1\n{string with variable size}\n</li>
<li><strong>Output</strong>: {string with variable size}\n</li>
</ul>
</li>
<li><strong>Operation 2</strong>: read a string and write it back to Serial Port reversed
<ul>
<li><strong>Input</strong>: 2\n{string with variable size}\n</li>
<li><strong>Outpu</strong>t: {string with variable size reversed}\n</li>
</ul>
</li>
<li><strong>Operation 3</strong>: read a number in decimal representation and write it back in hexadecimal representation.
<ul>
<li><strong>Input</strong>: 3\n{decimal number with variable size}\n</li>
<li><strong>Output</strong>: {number in hexadecimal}\n</li>
</ul>
</li>
<li><strong>Operation 4</strong>: read a string that represents an algebraic expression, compute the expression and write the result to Serial Port.
<ul>
<li><strong>Input</strong>: 4\n{number with variable size} {operator} {number with variable size}\n</li>
<li><strong>Output</strong>: {operation result in decimal representation}\n</li>
<li>Operator can be <strong>+</strong> (add) , <strong>-</strong> (sub), <strong>*</strong> (mul) or <strong>/</strong> (div)</li>
</ul>
</li>
</ul>
<h3 id="examples-9"><a class="header" href="#examples-9">Examples</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Test Case</th><th style="text-align: left">Input</th><th style="text-align: left">Output</th></tr></thead><tbody>
<tr><td style="text-align: left">1</td><td style="text-align: left">1</br>Random String</td><td style="text-align: left">Random String</td></tr>
<tr><td style="text-align: left">2</td><td style="text-align: left">2</br>Random String</td><td style="text-align: left">gnirtS desreveR</td></tr>
<tr><td style="text-align: left">3</td><td style="text-align: left">3</br>1876</td><td style="text-align: left">754</td></tr>
<tr><td style="text-align: left">4</td><td style="text-align: left">4</br>244 + 67</td><td style="text-align: left">311</td></tr>
<tr><td style="text-align: left">5</td><td style="text-align: left">4</br>2340 / 50</td><td style="text-align: left">46</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-17"><a class="header" href="#notes-and-tips-17">Notes and Tips</a></h3>
<ul>
<li>Check the <a href="appendix_ale-peripherals-mmio-manual.html#serial-port">ALE Peripheral MMIO Manual</a> for information about the Serial Port peripheral.</li>
<li>You can debug your program reading from STDIN and writing to STDOUT. Before testing with the Assistant, the functions responsible for IO need to be changed in order to interact with the Serial Port.</li>
<li>The final version of your program can't use syscalls except for the exit syscall.</li>
<li>You can use the program stack to store strings with variable sizes.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZUFta29TTVJLaE1NVGN3dFVBQTlTVkJoaUxPY2JWQUEzS0JvbkMycUdPcmlpdnhoLUduRlhIZ0JSTm9CMk9BQW1IbmJPbUJzQ2VVVjNGWFVHSm1CLUhoNU03dEk2T3p5dUFBb0FTZ3VZSzZ1Q095azZWN0tQcDlTQUFMRWhtT3hRSGdBWGg0T1FBN2p3aEtJSkw4bnFZVnRJYUNSVUR4Vm1ZTmhoNURRUm9vWU1nZUFBRkdvSVlIU1NJSEFDMGlPSVpKNHFocWtVcGxWTUx3QnhsSS1uNVYwY3ZEb3NRYU1QaFBEQ0VXaTR1NC0wdVFOQkJETU54eWVRSzNUTUNEc0JHQlR6RmNWNVN1RnFGNG1YNmNBQVJ1SU9OYlpPSW9OYWJYYnJRRFBqd1FXQ0lXWUlEWWJIQk9tUTBZRFBhWUFNS0dCQlFCYjVMS21IQ216NXdhRUFQajR5YzlSc3FaakY3Z1ZKckRucDRZdElkam9IMjlxclFPUVlORGdtWFlzZFFRYWNwRmVpdUxWeDBzaXpmRDAwSEVjRlFFRG80Z0Fub1M3blljVnBrMFhrOVh3VkEtUUcyeUgrNllBQ3J0bmdBUmg0VHdBanJPeUZxWG9uKzh2aU94SENQVDVFb0tRSnh1Ty0ycnFaOThaLUZFS0RZbWxVTzVZR1FIOVpsd0Q5bWotUFpBT0Fza3dLdmJ0UG1BYTVvekhWdGREc0dCTlN5UWtuZ2dIQnJSZWRNZUFnTXhnTEFWNW9SaGExeUlZU2ppUG5KREwyTFJkaTJYWDEtVURZTjN5UW5jOXkyRTh6M2pHQkx3Z3BDYjBDZTlVRWZKMFh6ZlVNUzArVXdOakFtSUJta2FvYkRaT0RRTUZjU2xNLUVCa0FDYmhWQjRmb0NERkRTb2dRZ3pESlFwc2tERk9CTU93a1M4SUlvaVNMSWlpcUtoR2k2TFlLaW1LVWxqUFRZejBPTlhMaUZLM0VCZHpJSGdBR1lqMVBkc0wwUXBUSkx2VnNaTHNKOTVKNHhURE5NWkt3UDNBQU9WWUFEWTdLVEpDak5XQUJXQUFXZXJJTWN0Q1hMY25DWUU4d2ppS2hETmZQby16QXI4eGorM0N6NUl1VkgwWXZYWXI0c1MzaFdyUzRUTXZzcUtWVE1XOEVHazJUbjFmWmJHdWFkci1BMlZyMW9BYWg0R3JWZzZzNnl2M2I5OUlhd3lCeWM5RFhLd3ZxQnU4NGJTS0NoanFKNFdqSnA0VUtTeG1xNDVxdWFLMTI0OXNTdkRCSzkyYWphTXF5TVNQcExIS0RyeW82aXBSeURUQXVtQU5tUzFxQUFZZUFzSGhtcHBwN1B2SnVyM3M2MUQyQiszcVBLUEx5aHBHa0h4dkI0V3B1WWhjUFUrRVZTMWlVY3FESUJoV1JoQUJ0VXdva0VWUUl3WkFBMVJObWprT2dhRkJUbzhnclZCOWRNQkFER1FPZ0lEQU1BUU5NQUJkWk1aYnR2WTRGZ1FORHhoWmNQWnNXQU94cDJRTm1JcGRkczRwYlNiNDlHa3JxN2I1dFZmYkRvS3VTVHBqejZBQU0zcGdBQVNZQWpYbDZoZEpWZ092YzktZG5mbmZ3czd4cFNzNExvdUlBVjB2eSs5dUFxNXJtQTY4NTc2ZXIrdm44TUdueXhiQmlHeHZGc0xKY0ZZc1pldFFoVzBWa0RvUjROV1FDQWlBYUFBYXk1SVBwRXRrQUZHcU1CYlFuUStuTHNUbzZCNGEyT0Z0KzNIZmdrQlhibjgxWlkwdWhxaExwWHlWVjB3eXdCQTRCU0hnMjhJaWtGVUlmQ2M0aHJSZ0NjQVFPUWg4VEpzRWdIUVpBWEFFQ3kzTEFnYXdOQVhadTNmdTNUMld3LWE3UURrSEo0SWNlQmh4TU94U09pMWthYmxqcXRYRVdWOGE3UlRrVE5PeDA0cG5TenFwZndCY0Y3ZjJYbVNNdS00SzZCZzJOWE1DdmMrRk4wR0pwSmViY0pFZDJrZDNPUm4wdXJjd0h1NUxVQU5CYkEwaGdGVVdrTm9ZUlJuck1OK29wVkVxRjlsNk1oLTRLRU1uM0RUTnhzaFhGdVBEblFoYVNOZUZLWDRrbFNxYkNkcGdrNFErYmhKTW1IWjNLb0l3dXRpcUQ3ZzBmWEVzamRnRExscEcwUnN0aFVDR2dTWjNGNHlTKzdkUXdvUGZSLU1SNUExR3NGSWFFMUo1UTJtcFl6ME1zT0MtQmJsd0E0LThRQTNVUGd5UStBQXFRK0ZnWFpTek5EWXoyclRPNnIzOWs0eWdUd1hGdUtvWjRtbVJabW1FSWtaTWtoRGl3VGtMbVFzOXhCNUZtck9sb1F1QWt6N0V6TDJCUXFoeVZqa0kzb1g0MDZBUzQ2OEFBSndoS1RudEtTWERDb1oyaVlaTE9GTW00YklRSjNIUUJkV2wwbElCMHN1WnpRVmR4NE1DaVpvS05oRlBrZWszYTdSclp3QUdKRVBKeUxPNnlITHBzb2xjS0Nsb3EwVnpaeXBTOUc0UXFZRElXeGk2azFJYVJMVmlmSnJHbGhCWEFWS3BDZG16STdQc3BaUnpSazhIZHR5OWFmTFZTN01GY3NqeElxQ0dpakpWc3k1Z2M1azNMdWRzMVVVZEdHOFdlU3cxeEh6N2xoTytSRTM1LWlBVkF2aVFTNUs0TGdDUXJ0dENyK3NMTm5WMFJkYXdNa3pXb1VvQlFYWmNXSzZBNHJ4Y1MwRnlVaVVTdEpac3dwc2lVbWVtMGRTMzZ0TCtyMHNNZFUwR0ppSjRzdk1iTkpweWtmSGF0WExvV0FkUjh3T0Y0RENWTVFOM2hLUnpOd1BNOHBTRHJ4NG5BVXQ0aFNERkdkdE1oNXpiVzN0dEZXTW5nRDkraXJ4cHYybmdVQmRCSGtSajJwd1phQ0FxeHBwMmdBaERDRlptWXpveTNnRHhUcFdxVnprWGJDMjJkYmJWU09ESkNDU0N1Z3VCSGhscENHRSs0U2pqcDRBQUhsaEcrQWdENm9BM1J1c1JhdG4xQjEyMkhUZEtWZTZaM2ZHUFNyS0F6c3gwOWtna09uRU1Jbmh3WjRQMHc1eEVHWlBDM2UyQWdMak5Vd2FRcld6d0JIMTVGcGdIVU9ETHRWNXdZNVVwZWVicFY0RWJNTFdLRnJZQ05kaHJlYUNzSHdzNEFIRUFPb0VKQVhPRFdnekE4QUFDSWNEaERBTzAtb2VBVGc0QldMMGU0Q09OQ01NZkpRSGh0aHRGeUZmTFV6NklBOEdCR0tYUVVJQzV3bTloSnN3LUFvZ2hEVkdLRnVxQUFEeTFvdkM1RklGWmtJVHhiVDJrS1JaQ1RVbU9EK2loS1lkbzZ3TmoxcmlLWU5NVHg1akRGM3JTTVVMd24wdURUR1lMT3lab1pNVm5sY0dWVHduNnlFZ0cwSDl5WXl5Y1o0QUFXUmJzQ013dWc3VFBBcXlDUE0tNURCVVJRN2xpQWJRZUJNaWZqd082KzRYakVUdWstS1dtWEFRQnFEZUlKNHJUOXl5RmFSc0diYlNuVnZHVExpbSsrWVIyaW9JR1owZ3hzandPdmFYUUpiU0VJalZCNERUREFrRTFzd2ltejFuZ3Mzb1BnenM5dk1keDJjVDduTzJkUzd0MkVDSGlaSGR5QzFwSHZQY1h0UTk3bjFQdlhaUTM5czZBUFJ4UGY3QzlsS29QREtmZnExVm1jMkZKdmZmcGw5c085MlljUURoOFdiTkpYS3l5M2ZVcUViVnhNblpQNkU4WEY0aER0ck40SFllbnE5NmRwZzU2T3hWQm4yaXJ6OEtVTExueEwwM3llRGU5Ymo2WDJWUS1WK3huSllaWVFEc0IxbUVMUE9RQUZJRHcxVEhSTy1taXVlQnBqdlNzeUNtVFY1QVYtdFZ4SUVaZ1JqaWpMVGhYSFdtU3VKdXdBY2prRTd0VVZ1NkEyOVFISVlPLVdidVpMSFJJYW9SdmVjd2xOeUJjM2hoTGZXNXlmaFhYZDBuYzB6ZDhiR1AtUWZlVUw5M2RBUC1ZVmZpRlhxanVpZjBuaTUreC11R3F1SHgyVHVMNnpreEt6ZjFLWHg0VHBTMmJpY2NkSjlud0VXaHFPMEpHMUtGWW9XdXk0QkFEY0l0eUJNQ2dGYVNKQWc0LWg5WkZIMTdBZ0VBNUNZQm5LZ1BBSStvRElBWHhBQ01LLTdocjluekFlZkpBSUNpYjM3T2RmYy1OLWI0QUdMbjRQeHZyZkotQkQzOHYwZjYtSit5dXY4UDhmeGZxaHYrUDdiNzhEZjVkQVFDMmhMd2NDTmkwZzd6V2djQnREZjRFQ1FIdUE3ejFEN3lCcjA2emdzQTB4ckEzNjRHNEc3NTRCQnl1UmlqSGd0b1VCb0FzQWJETlFnQmFCNEFFQVRpMENSRGlEVDRZREFDMEVnRDlCREFrZ3o3akMxRERoVEErQThGMmpNQVlCVUUxUmFBU0ZhQkFB" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="external-interrupts---midi-player"><a class="header" href="#external-interrupts---midi-player">External Interrupts - MIDI Player</a></h2>
<h3 id="instructions-18"><a class="header" href="#instructions-18">Instructions</a></h3>
<p>In this activity, you must implement a library that will be used by a <a href="https://en.wikipedia.org/wiki/MIDI">MIDI</a> audio player. The peripherals used in this activity are the MIDI Synthesizer and General Purpose Timer (GPT), and their description can be found in the <a href="appendix_ale-peripherals-mmio-manual.html">ALE Peripheral MMIO Manual</a>.
Your library will have three main functionalities:</p>
<ol>
<li>Implement a <em>_start</em> function, that initializes the program's stack (see Notes and Tips for more information on how to do that), sets interrupts, and calls the <em>main</em> function (using the jal instruction), available in the provided application.
<ul>
<li>Note that the jal instruction will be used, as it won't be necessary to change execution mode. In future exercises, this may be necessary (and mret will be used instead of jal).</li>
</ul>
</li>
<li>Program and handle external interrupts of a timer device (GPT).
<ul>
<li>The GPT interrupt handler must simply increment a global time counter (<em>_system_time</em>), that needs to be initialized as zero and must store the system time in milliseconds. (System time is the time that has elapsed since the system has been booted).</li>
<li>We suggest programming GPT to generate interrupts every 100 ms, which is the value that must be incremented in <em>_system_time</em>.</li>
</ul>
</li>
<li>Provide a function “<em>play_note</em>” to access the MIDI Synthesizer peripheral through MMIO.
<ul>
<li>The function prototype is <strong>void play_note(int ch, int inst, int note, int vel, int dur)</strong>;</li>
<li>The parameters are:
<ul>
<li>ch: channel;</li>
<li>inst: instrument ID;</li>
<li>note: musical note;</li>
<li>vel: note velocity;</li>
<li>dur: note duration.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="notes-and-tips-18"><a class="header" href="#notes-and-tips-18">Notes and Tips</a></h3>
<ul>
<li>Check the <a href="appendix_ale-peripherals-mmio-manual.html#midi-synthesizer">ALE Peripheral MMIO Manual</a> for information about the MIDI Synthesizer and General Purpose Timer peripherals.</li>
<li>To allocate the stacks, you can declare two arrays in your program. When initializing the stack pointer (SP), remember that RISC-V stacks are full-descending.</li>
<li>You must implement all the functions in a single file lib.s, in RISC-V assembly language.</li>
<li>We provide our application in the file <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch07-03/midi-player.c">midi-player.c</a>, that uses your library and mustn't be changed. This file must be uploaded with the .s library file.</li>
<li>All functions must follow the ABI.</li>
<li>All functions must be <a href="https://en.wikipedia.org/wiki/Thread_safety"><em>thread-safe</em></a>. Right now, you <strong>don't</strong> need to understand this concept. Just ensure that your code <strong>doesn't</strong> use global variables (the only exceptions are the variables _system_time, the program and ISR stacks). Use only local variables, allocated on the stack or on registers.</li>
<li><strong>Simulator configuration</strong>:
<ul>
<li>To receive external interrupts, set the “Bus Controller Frequency Scaling” on the "Hardware" tab to 1/2<sup>7</sup>.</li>
<li>Also on the "Hardware" tab, add the GPT, and after that, the Sound Synthesizer (MIDI), <strong>in this order</strong>.</li>
</ul>
</li>
<li>Before beginning to test the MIDI Synthesizer, check the volume of your browser and computer.</li>
<li>You must access the peripherals through MMIO, just like Exercises <a href="ch07-01-peripheral-controlling-the-car.html">7.1</a> and <a href="ch07-02-peripheral-using-serial-port.html">7.2</a>.</li>
<li>Each device's base_addr can be seen on the table “Memory Map” in the "Hardware" tab.</li>
<li>You can test your code using this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk0yenhvSHNZQXpLWlRVZGt5aWNDLUVCMjY4NEpDQUVGTXBPZ0ZkVWJUajJUU0NFQU1JTGxxOGVxa3lBSXZwVnJKbW1RREVMaGlScTBRQWtnNnZPWkFXUTlIckxnREtmazRtMmdDcWZxZ3dFQUJHQURhbzFPeHdOQUFXcURRQTFySHNBQjZZWEJEeEJJWUVLV1FRMllqc3NLU29kSEFBYnNVcUxBQU1lUURzdHIyOWVuaDFjRngwcUFDT2NIUVVhQ3dBVEFDc0lBQytlQVFBbnJURkpmd3JJQUFtcUUxUU5LaWlHS0JvTUEzRmlFcDBDT3lsY0tSUVlBMEFkQUJXWjZBRThlek1EQUxBQnN1ekFVRDJVR29hMG9HV0lBQzhQdDh4SDhBWmd1c0NBQnhMSEZMSUE=" target="_blank">simulator setup</a>, but there isn't an assistant for this exercise.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="software-interrupts---controlling-the-car"><a class="header" href="#software-interrupts---controlling-the-car">Software Interrupts - Controlling the Car</a></h2>
<h3 id="instructions-19"><a class="header" href="#instructions-19">Instructions</a></h3>
<p>In this exercise, you will do the <strong>same</strong> activity as <a href="ch07-01-peripheral-controlling-the-car.html">Exercise 7.1</a>: you must control a car to move it from a parking lot to the entrance of the Test Track. However, you can no longer access the MMIO addresses directly on user code, i.e., the high-level code with the control logic. You must implement a set of syscalls to control the car and use them in your control logic, that has to be executed in user mode.</p>
<p><u>Separating the control code</u></p>
<p>The following code is suggested as a starting point for your solution. You can change it however you want.</p>
<pre><code class="language-riscvasm">.text
.align 4

int_handler:
  ###### Syscall and Interrupts handler ######

  # &lt;= Implement your syscall handler here

  csrr t0, mepc  # load return address (address of
                 # the instruction that invoked the syscall)
  addi t0, t0, 4 # adds 4 to the return address (to return after ecall)
  csrw mepc, t0  # stores the return address back on mepc
  mret           # Recover remaining context (pc &lt;- mepc)


.globl _start
_start:

  la t0, int_handler  # Load the address of the routine that will handle interrupts
  csrw mtvec, t0      # (and syscalls) on the register MTVEC to set
                      # the interrupt array.

# Write here the code to change to user mode and call the function
# user_main (defined in another file). Remember to initialize
# the user stack so that your program can use it.

.globl control_logic
control_logic:
  # implement your control logic here, using only the defined syscalls
</code></pre>
<p>You must create a second file, <strong>called main.s</strong>, that contains only the code below. This code can't be changed and will be used by the assistant to check your solution.</p>
<pre><code class="language-riscvasm">.text
.globl user_main
user_main:
  jal control_logic
infinite_loop:
  j infinite_loop
</code></pre>
<p><u><em>Syscalls</em></u></p>
<p>You <strong>can</strong> implement the system calls listed below. In case your code doesn't use some of them, it is not necessary to implement it. For this exercise, you mustn't implement any additional system calls.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><em>syscall</em></th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left">syscall_set_engine_and_steering</br>Code: 10</td><td style="text-align: left"><strong>a0</strong>: Movement direction</br><strong>a1</strong>: Steering wheel angle</td><td style="text-align: left">0 if successful and -1 if failed (invalid parameters)</td><td style="text-align: left">Start the engine to move the car.</br>a0's value can be -1 (go backward), 0 (off) or 1 (go forward).</br>a1's value can range from -127 to +127, where negative values turn the steering wheel to the left and positive values to the right.</td></tr>
<tr><td style="text-align: left">syscall_set_hand_brake</br>Code: 11</td><td style="text-align: left"><strong>a0</strong>: value stating if the hand brakes must be used</td><td style="text-align: left">-</td><td style="text-align: left">a0 must be 1 to use hand brakes.</td></tr>
<tr><td style="text-align: left">syscall_read_sensors</br>Code: 12</td><td style="text-align: left"><strong>a0</strong>: address of an array with 256 elements that will store the values read by the luminosity sensor.</td><td style="text-align: left">-</td><td style="text-align: left">Read values from the luminosity sensor.</td></tr>
<tr><td style="text-align: left">syscall_get_position</br>Code: 15</td><td style="text-align: left"><strong>a0</strong>: address of the variable that will store the value of x position.</br><strong>a1</strong>: address of the variable that will store the value of y position.</br><strong>a2</strong>: address of the variable that will store the value of z position.</td><td style="text-align: left">-</td><td style="text-align: left">Read the car's approximate position using the GPS device.</td></tr>
</tbody></table>
</div>
<h3 id="notes-and-tips-19"><a class="header" href="#notes-and-tips-19">Notes and Tips</a></h3>
<ul>
<li>Check the <a href="appendix_ale-peripherals-mmio-manual.html#self-driving-car">ALE Peripheral MMIO Manual</a> for information about the Self Driving Car peripheral.</li>
<li>If you are not using the assistant, you must configure the simulator in a similar way as done for <a href="ch07-01-peripheral-controlling-the-car.html">Exercise 7.1</a>. However, with a small difference: the option “<em>Enable Operating System</em>” must stay disabled.</li>
<li>You mustn't call the exit <em>syscall</em> (as there isn't an operating system, it doesn't exist).</li>
<li>The <em>syscall</em> operation code must be passed via register a7, as done in previous exercises.</li>
<li>You can test your code using the simulator's assistant from this <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15Z1BaS25nak9ucVQrMUFBUFVsUVlZaXpuRzFRQU55Z2FZWUlKWFRnYkJrT1laR2FJQ1o4LUdIOGFjVmNlQUZGVmdIWTRBQlllR3NOakFiQVI1SXAzQ3AxQXdtTUItRHg1anRTSFE3SGt1QUFLQUNVY0pnQ0lSQkRzVWpvV09tZUo0cEFBRmlRekhZb0R3QUx3OEhJQWR4NFFsRUVpSjZJQUJnQWVDbC1BQjhYMmtOQklxQjQzek1md3dQRlVIRjBwR1o5d2xna28waFJUREJBRm9lQUJoTExJamp0V0RJY2tVaVY2KzY4aXdDd1c4Z0JHZEVGOEx4anJzcEVhdU5JQUU4cFBUVEE2UFY3VER3b0RZQXlBRm5CWUZCRUJ4aXZNM2tSSXc3U0xpMHpCdFFnR0pBNkQ3VElMVktoZUF0eVJ3d3dGOHBFZUp4aVBrc2phZzU2c2k3Y1c3bTE3eVg3VUtuZzFsUStISTRTYkExVUhjNlBIRTY5WEtuMHp4TTluYy1jQ3lCQlFCeEV2emU3ek94ME9pYlhoMXFBTm1CTi1zd050a3gzTzEwSWtLRVVzNzQrbjJXOGdoSVhGRDB6Um1oN2c4cUhXaFkyaCtGQ0N0eW1MVEhlUEEyT0VkaGdJZVpob0tRSHlPQWhsQUFFSStvSU5qb3FZSTVqaE9VNm1KaVpoWks4UndBTllNandjQU1vS2ZBTERTVlkrZ0Fzb01qaG1NV0lLc1U0QkFvS2dlRlJ2Y3BpeUtZeUdxT1FwQjJNVWtGYU5Cc0YtdWhuaklhaHFES1ZoT0ZDZEdzYkVTQXBIa2VJVkUwWFI5SU1jQVRHbkZRN2diT2l3Q3JMS0FDTUFBY0FBTVpnQUt5eUQ2c29BRXhtQUFiTElBQmVzcmFvNXJuT1dZcmxhTEk5bXl1NWpuZk41WVVBTXdlUUZaak9TRkNYUlZvY24rSVY3YjRpV2FvYkhRK3lST2lXTDBYdzBFSWxBdWpva3hMNEZQQTRnY01nWmlPRGNsSThBeHJuWXZWZUtLZkJpR3FXaGg2YWJoUDczTTAtNkhucHBHd0RrZEFpQUFLcXhJUTBRQVVxb0FEeUFCeVpoa0F3TnlOVDZ6WDNHWXJWWkhBSFhJQUEyaTFDWW5tMTkyZGQxbXpJSDF1cU9RQXVwQnczeWNWWFN5QjVybURWQm9PT0x3R3hrSEFxUVNveWhBK2pBTkMwYlZPTERaUzFJUURZTmpOTFlnbmNzTlpnYk9zWlBJQjFEcmlEd01uU0lqMERQS0RDSU01T2tDd0JndzBJa1o1S09iSXJtckFBWXFMd3V1UkZyazh6d2ZNUU1sUEFBSnhLd3J3MXdHc3h4TU85OE9rTnpyTjRnUURya3E1Z3ZvcVFqbVl0TFhnMWkwUnJpQjl5QkhNTnNDNkxHR3dmUndDQzYyU1pKZUpXTHRWdU9IVWU5eVluZ016SjBrZERPTlVnUVpoN0xvRUFPRlFMczlSQUNFMFJBeW9udWExS1pPd1VDT0VUZXdrdEgxSzB0MW5XbXpISjJrTEJIb1lYWXVpNk5Ja0VtSHJ1T3grWEQxVjlTWkI3UHVEZE55M0pSdDk3T2V4dzljQWNCNkNBZWlYN2ZWNVBzQ3o4bkJkT1BQWStOZWlBQ0VIZHg2Z0NkSjNBS2ViR25xQ1lqd0I3U1hRdUlKK0lwelEyUGxrbHRRVW1DZkZQQXVlNVhrOEQ1UEQrVUZIZ29VZURoVWlubE9LRGtlQ0pYbG4tYlU2Vk1yWlNBYmxHS1FNOVl2WHJPOUI2TkZIci1WSk43UGVPWlVEeDFnRVF1QTl4a0Jna1pJOVV3MnB0U3dIS2hBUElVQjlpb0ZFbjBXaEpBSUJzTk1Jd213THN3QUVsTUxncDJUVnQ3b2t6dEFPRzFjVVR3RkdHOGNZV0pNUkRUMWdpUGVYZEs2bUVPaFdFK05RSkM1QTJEWVNPMHM5N2QwMGRvdGV1akhCNUNJVVlsUmw4U3g3bHZwRUIrd01pcGoxaGpVSDBZQUhUR2tvVHdDUjJjOTdJV29GNG54OThON2V3Q1ZJNmtNaVl6cWpvSXctSUxEbWhnRnd0eU93bEFDNVFOV0FBRW1BQVFVSnZqcUVnRFZxc0RXcDQ0RGF5RWVURGdra3pySUhSSTVBS21JdEFRVHdXU0R4Q0FhQndBZEFmTGd5TWVEb2lRSFFVNFpWeEZaMmliSFdKOURwQ0pPWWVPR2dxU2hKU0ZRTlJMcEpFbEh0THhGRThlWmhwbnhMbWNreFphU3lDeERhY05UcDNTSUNLbWtEUklaOXhSbVVIR1pJM1oreUdGTUtPVXMwd0t5MWswQTJhZ2tSUXlyazNNNkxxTHBQUytrSGdaSXlQNHlpeDZxT3J1b2hwcGdEU3RHTkRMVHFSeEVSN0RER0NHQUhCZUN3SHBxY1RvU016Q1IxSHZDa3hHaVFDb3R0aGloMkdOTWc0cElFeUFsbFppVzNMSlJTNHgxY3lBZTJvR3dNWUdKVUh3dnNkZkp4OTlVQmJJUkNETWVlOStVSUVGWFVlUklxWlc3TW50UFVnSzhJbGtpdm80OGtLSnBYUVJCdEJEeDJzSndHQXpnVTlHbU16SjFRWG5qQW1SY1NiUzNKa0NOMTFNT0MwMDVSelptMHQyWk15NXRMQkVWczZZMnphUGJSMmRqbmF1MERod0Qyc3BMWit6amU3QkF3MXBZaHo2SnpHQUVkOUp1UHdkWGVPaWR4Q3IxVHVuRkdFemRsNXdRR3ZGMXVxOFJxS2dCWEJwQ3JhNWFzSHMzT2dyZFM2ZDJiZDNOdC1jNkNkdUhwU3NrMUxiaGFwMWFLd3QxSWw0d0JYc2ZOZUJBRzBOVkVYdll0UjhUNHdEUGhmZlZOODlET09OU3pKKzEwckt2ekhIWlNCWDlQSXBYLW9GSEtJQ0lwUlJpaEEzS1NVNzF3SXlsbFI5N2tVSHF2UVc5TzZXQ3FIQ01kYkhRaHhDY2lFM0lYNDRwSEQrTGNQd0RRUGhiQkJFZ0RBNXZVUnp6QW5TSXljcTRWeElsRndxcFlpLXROS3RGNkFzYWNLeEJqYkZpb25VSlNqT2lhUDZKc2ZwZFZDSjkyU3BjWHJPVjNzV2hrSEpPUXJjaklQN2ZGU3RLRHlxVTcyT1RNS2xiNEFWbkl1VWZlRkJXWmh2Z0sxY2g1UDQtR3lTNkM0SU04MU5GWElqMTRMeVQrYmt6TUFHcHJNWHh4R0twaUdTVHhzUTRxZ0xpbXdiQzhTSUFKYlNJbGNCOUFrbEpHUzlINFU3SVZZNFdJalRJWlEybG9KNDA3blRFZ0FBRlNwYlMrbG82SHdlRHJVRUt4RDRxaDFvZkFBQXJwZEsybDJ4Y1drUzFnVERSUURGU0hyUFd1cmRkcW4wZW8tUXBDQXorbUg0V0NkNERZSlFORldJTkFwQ2RBQWp0d2FxNUE2RElUTUtzVHJkWlp1WWxTNzVIZzFuQmxUWm16NmViQ1l6QStpVzhsbGJhM1RZaWM4TUZiYnNkZ3I3ZDhoYk94OFhPTGQyNUdWMUwrcG55dlZQUDR1RzlJOG5hRmxPaVBKQzNWaXhSNFA5bmJQb2djZzR1LWxNd1BBQUFpU2dLREhBU0wwRGJXNEdpRE8reWQyYjRQZ0FvODhHRDJRR1Bwc2xqTU1GZktzbzhuOWJJSzBtZFdIMFNVLU00eVh5ZzBITmlvMVpYSmltUVRUYkJhOGdHbnBHNTNzNmEyOXpCblUrZnlyNVkwSlZjaUdocXBEZUtnMXlJN0RIckZYcHZFcXVFVzkwbHdSMVZSSDFVVHFualBPZVl2NWNIcnZyeHNrcXZvSm1xM0FlT0lORVdROERDQkVhSXNSS2dOcjNpMEhJVENkZzNSa2hTZEV0dktoODRJUWVLRHBEWVBZSm9YUWc1SHpXRUJhajV3cER2RCtIb2JBOUJKdFpoOGFFMjFuaFBXcGgrQWtwNEVqY2tUaFNDaVZWbGphV2dmdUI3TkwtY1VncTY4VGNaTHdqSkdqZWdmRFdBQW5BdWF0N2ppRC1vcjFBK1V0a1o2ejVVMHZRa3JTZEFqZWloNldLcWtCWXRRc0F3QUtUMk5ySTJZZjJrUTRBSGdKS1dreWxlOWJWODhNZjRwRnJkOUoyS1A5R2lHZno5T0V2K3FqeHlBRWs0c1pLWjRhQm5Pam9nOFhTTi1JODZRV2EzNmw0NzczNmxvVHpmU1VqLTYyYjJiU3pQNzR3U2pXYU1oQUVJd1g1Z0dQUlFELVRKWWVUcXJxNzJKeEMxNXhERkpiNTJ4d0Y3QkNJMFNrSEhvWEpiaTB6ZW8wVEg1SVNiQ3pKdXpINk43TjdjanJndjZvRGs3QUNVRmFEUTR3NGNETWd3QWRUNHktelR5ZERheDRGekJMRGdodURLQzhCckM1QWVodFE4QzhnUUE4QVVnSGk2QmZiQURNaXdDd1RNaG1EOEJSQWhCbUQwQ29Camo3UU9oZUQ2SW1FaERvaTBFT2d0SXdSQ0VpRWNENHlSaHJDLUItQUVHVkNGak5SR1EwRFVRV2dIaVlnMmdRQ0NobUNreWd6OGFtcnRoajdNcUNSSkd5QTdvSVFrYTh4YmlqamtEMjZvQ3NqclJBZ2ZEb3pFekVqNFNrQzZEYWpPUWtSbUNiQkpITlRFeDg0ZUpPRzVHc2dZUTB6b2lQVFpFUUQtUnhTK2hTQkpyNEFJQUlCQkVOQnRRV0RoQWJDa0RhaW5TV0ZnQ21ERDdXNjhBNktNZ083Q3hyd2RGT0U5Rk1pN3BiTFM3akJFeG9ydERTQVZ6NHh3QXNoTHFPRG9nbnd6cnhGY1lVRDlaUEpnQ3dDeUNRQ3JBd0dnek41RGFVaWI1QnpFaGZFallKSWdpR0ExVEphREt2R2RaUEV3QVh4cmFRazNIK0R4RU81ZkErSHp5NEJSaFpBdXpJQ1lDZ0FleW5nRUJZbG9rd0FZa3hqOFJ5Q1lDRDU0QXRCRW1jSjZoa2xHb1Vub2xRQzNDY0l3NjBsSzcwbUVtTW5Fa1FEQ3lzbW9Ec2xVbjhTQ0M4bjhtY21jS3NUQ2tFa0NrUUNxQVNtVW1pbjhUOEFTbW55MHpqZ0VBY0ROQVdqQkUrS3JDWUJtNThrZ0Jxa1hyQkh4Z3pLVGlWVGlCSzRzQkN6ZkJpeWl3MGw0RDBMSHdIaWpZNzRVQm9Bc0MrUWVRZ0N4UUdrK2kwQ1JEM3hZaytsN0NIREhCNGtZQ2dBMGJuQ1hETUttZ1RoRkQ0a0VBZFRNQVlDZWtCUmFBWmxhQkFB" target="_blank">link</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="final-projects"><a class="header" href="#final-projects">Final Projects</a></h1>
<p>The last chapter contains a set of projects that encapsulates all concepts worked on previous chapters.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="driving-through-the-city"><a class="header" href="#driving-through-the-city">Driving Through the City</a></h2>
<p>In this project you will develop the software layers responsible for the control of an autonomous car. The layers are illustrated in the picture below.</p>
<div style="text-align:center">
<img src="img/ch08_01_01.png" alt="layers"/>
<p><span class="caption">Figure 8.1.1: Software Layers</span></p>
</div>
<p>The <strong>ACOS</strong> layer is responsible for managing the <em>hardware</em>. It must provide a set of services for the <strong>CoLib</strong> layer through <em>syscalls</em>. The <strong>ACOS</strong> layer also contains the code that will be executed in machine mode and must be implemented in RISC-V assembly language.</p>
<p>The <strong>CoLib</strong> is responsible for providing a friendly programming interface for the <strong>Control Logic</strong>, called <strong>Control API</strong>. This layer also must be implemented in assembly language, but its code must be executed in user mode.</p>
<p>The <strong>CoLo</strong> layer is responsible for the logic that controls the car and uses functions defined by the <strong>Control API</strong>, implemented by <strong>CoLib</strong>. An initial version of this layer is available <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch08-01/colo.c">in this file</a>. This version should work correctly if all the other layers have been fully and efficiently implemented, but you can also modify it in case it is necessary. It was implemented in C and must be executed in user mode.</p>
<h3 id="colo-layer"><a class="header" href="#colo-layer">CoLo Layer</a></h3>
<p>The <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch08-01/colo.c">code for the CoLo layer</a> is already implemented in C and uses the routines available in the Control API to send commands to the car. Your main function is to control the car, but it must also use the API to print timestamps of the arrival of the car on the checkpoints.</p>
<h4 id="control-logic-of-the-car"><a class="header" href="#control-logic-of-the-car">Control Logic of the Car</a></h4>
<p>The car must perform a set of 3 routes through the city, being that the route is determined by a linked list that contains the coordinates of the next checkpoint and the action that must be performed when arriving there. The actions can be:</p>
<ul>
<li>GoForward (0): the car remains in the same direction it was headed.</li>
<li>TurnLeft (1): the car must turn to the left.</li>
<li>Turn Right (2): the car must turn to the right.</li>
<li>GoBack (3): the car must perform a maneuver to head back where it came from.</li>
<li>End (4): no action is performed, and indicates the end of the route.</li>
</ul>
<p>The <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch08-01/linked_lists.s">linked_lists.s</a> file has 3 linked lists with head nodes <strong>A_0</strong>, <strong>B_0</strong> and <strong>C_0</strong>.</p>
<h3 id="colib-layer"><a class="header" href="#colib-layer">CoLib Layer</a></h3>
<p>The CoLib layer must implement the routines of the Control API in RISC-V assembly language. The API routines are listed in the header file <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch08-01/control_api.h">control_api.h</a> and must be implemented in the <strong>colib.s</strong> file. To interact with the hardware, the code must use <em>syscalls</em>, defined in the next section.</p>
<h3 id="acos-layer"><a class="header" href="#acos-layer">ACOS Layer</a></h3>
<p>The ACOS layer must be implemented in assembly language in the file named <strong>acos.s</strong>, and must provide the <em>syscalls</em> listed in the table below. You must not implement additional syscalls besides the ones in the table.</p>
<h4 id="syscalls"><a class="header" href="#syscalls"><em>Syscalls</em></a></h4>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><em>syscall</em></th><th style="text-align: left">Parameters</th><th style="text-align: left">Return Value</th><th style="text-align: left">Description</th></tr></thead><tbody>
<tr><td style="text-align: left">syscall_set_engine_and_steering</br>Code: 10</td><td style="text-align: left"><strong>a0</strong>: Movement direction</br><strong>a1</strong>: Steering wheel angle</td><td style="text-align: left">0 if successful and -1 if failed (invalid parameters)</td><td style="text-align: left">Start the engine to move the car.</br>a0's value can be -1 (go backward), 0 (off) or 1 (go forward).</br>a1's value can range from -127 to +127, where negative values turn the steering wheel to the left and positive values to the right.</td></tr>
<tr><td style="text-align: left">syscall_set_hand_brake</br>Code: 11</td><td style="text-align: left"><strong>a0</strong>: value stating if the hand brakes must be used</td><td style="text-align: left">-</td><td style="text-align: left">a0 must be 1 to use hand brakes.</td></tr>
<tr><td style="text-align: left">syscall_read_sensors</br>Code: 12</td><td style="text-align: left"><strong>a0</strong>: address of an array with 256 elements that will store the values read by the luminosity sensor.</td><td style="text-align: left">-</td><td style="text-align: left">Read values from the luminosity sensor.</td></tr>
<tr><td style="text-align: left">syscall_read_sensor_distance</br>Code: 13</td><td style="text-align: left">-</td><td style="text-align: left">Value obtained on the sensor reading; -1 in case no object has been detected in less than 20 meters.</td><td style="text-align: left">Read the value from the ultrasonic sensor that detects objects up to 20 meters in front of the car.</td></tr>
<tr><td style="text-align: left">syscall_get_position</br>Code: 15</td><td style="text-align: left"><strong>a0</strong>: address of the variable that will store the value of x position.</br><strong>a1</strong>: address of the variable that will store the value of y position.</br><strong>a2</strong>: address of the variable that will store the value of z position.</td><td style="text-align: left">-</td><td style="text-align: left">Read the car's approximate position using the GPS device.</td></tr>
<tr><td style="text-align: left">syscall_get_rotation</br>Code: 16</td><td style="text-align: left"><strong>a0</strong>: address of the variable that will store the value of the Euler angle in x.</br><strong>a1</strong>: address of the variable that will store the value of the Euler angle in y.</br><strong>a2</strong>: address of the variable that will store the value of the Euler angle in z.</td><td style="text-align: left">-</td><td style="text-align: left">Read the global rotation of the car's gyroscope. device.</td></tr>
<tr><td style="text-align: left">syscall_read_serial</br>Code: 17</td><td style="text-align: left"><strong>a0</strong>: buffer</br><strong>a1</strong>: size</td><td style="text-align: left">-</td><td style="text-align: left">Reads up to size bytes from Serial Port</td></tr>
<tr><td style="text-align: left">syscall_write_serial</br>Code: 18</td><td style="text-align: left"><strong>a0</strong>: buffer</br><strong>a1</strong>: size</td><td style="text-align: left">-</td><td style="text-align: left">Writes a buffer to Serial Port.</td></tr>
<tr><td style="text-align: left">syscall_get_position</br>Code: 20</td><td style="text-align: left">-</td><td style="text-align: left">Time since the system has been booted, in milliseconds.</td><td style="text-align: left">Returns the time since the system has been booted, in milliseconds.</td></tr>
</tbody></table>
</div>
<h4 id="booting-the-system"><a class="header" href="#booting-the-system">Booting the system</a></h4>
<p>When booting the system, ACOS must transfer the execution to the control application in user mode. To do so, ACOS must:</p>
<ul>
<li>Configure the user and system stacks;</li>
<li>Change to user mode;</li>
<li>Point the execution flow to the main function of the user program.</li>
</ul>
<h3 id="notes-and-tips-20"><a class="header" href="#notes-and-tips-20">Notes and Tips</a></h3>
<ul>
<li>We recommend using the Google Chrome browser (it was tested more extensively)</li>
<li>Check if the frames per second (FPS) shown in the car screen is around 60. If it is much lower than that, your simulator can be too slow and the tests may fail due to <strong>timeout</strong>.</li>
<li>The “<em>Enable Operating System</em>” option must be disabled.</li>
<li>The devices must be added to the simulator in the following order
<ol>
<li>GPT</li>
<li>Self-Driving Car</li>
<li>Serial Port</li>
</ol>
</li>
<li>You can enable the option “<em>Enable debug controls</em>” to get to know the road. To do so, use the arrow keys or WASD to move the car. This option must be disabled when testing/running your code.</li>
<li>The <em>syscall</em> operation code must be passed by the <strong>a7</strong> register.</li>
<li>To initialize the user stack, just set the <strong>sp</strong> register with the value <strong>0x07FFFFFC</strong>.</li>
<li>Allocate the system stack in the .bss section.</li>
<li>You can test your syscalls implementations using the <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15bUg4YWNWY2VBQlU2Q0FBakFDWWVWQUFQVWxRWUd3SjVSWGNWZFFZbVlIOGVIaGF5T2pzOHJnQUtBRW9ybUJ1Ymdqc3BPamZwbDhlS1FBQllrTXgyS0E4QUM4UEJ5QUhjZUVKUkJJLXM4QUFZQUhoQkFCWUFId0FVVzIwaG9KRlFQQUFIR1lBSXc4QUMwUEZVQUU5YUpGeEFSTVJaY1hqalA1K0FoeEJ3SURZZUZseEV6NUFCaEFEeXFqMFVFY1puUnIybTF5K2psNGV6SWNGUzVOaGhDWk1Cb1BEZ01MeGZIOGFxQm9QQndwc3pWc3FBeFZxK1pqMnV4ZE56TXlFRnEzRVBFZ3NFOUFlZ01Bd3dadTRpaHBHcHNnQUROc0FHTEp4Tng2bHh1TVJuaFJuZ1FBRHNzZ0FuTVhDOEc0RHNhTEY4bGs0RnJTT0hQa0N2Z1JWc0M0LUhuakhYc0hCUndFSEJZTHBZRkJHZzJtMTh2Tm1PSDJCekFod0ZHdWpaS1pBekF6TVVWWmFabzNyV0NDR1liS2hkQkFIRlFoNDRZQkF3SHJjLURvSnE5MlpNdXdGYWdIWWVBY0diZnZJV1pCY2hPMGZNZ2JBNE94U0FBSVRzWFJkR2tGVVRCM0w1dndoS0EtdzRBQ2tPQTZRNkVnNkRZSktlRHh5US04NEZBMGdFREF6OEVKdUlpME5uY2l6MWZBaEtQSEtCZEdlQUJDSkREMlBVODRIUGZZcjFRVjRlRG9WQlNEc09oUG1QZGxVRlZLamdVZkJCUk80MkJVSHRDQTZHUUk1WVFBYlZNT2s2VmdQWVZqeUtBQURkVUZNWmNRQU1rZ0lDc3ZvSUJvR3doekFINVRBQVhVQkp0V0k0NTRJRHZFY0ZQQkI1NEZHZVp4amVWNTNpekpEZjMtWjVUQUFPUTRlVkhCcUNSY2oyR3hURTNlVHFNZkJMa3RTLWlNc2NQSTFOeTd6eDFFOFRKTDBTSUNGazRNdEMzY2NOUnFKa3dGV0RoMlJoVzk3MkMtYzBDb0FndXA2OWxtS2JBTEJxUTBMWjJNcHo4Z3M1b3dCc0RFN0VvQlVlQVRBQVNZQXh1NjNxQ0Qwa0J5MjJTc21BS2VBNjA4dDBPRlVVZ0dCZ0FEcVFBTmxlTFJsV3E5VXhKNEJBYURnVllqeTRHOW5pUU9nbXNFU2gtTUNoOFFzMmhicENXOHkzeG9OYkVwQUtSVUFBYTMrbWhjdWluNmJobW9LNXNSb3prZE1sYjBmVzlFeUZpYjZleitnRzRBZ1hSalA2OEdOS2htSFNmaC1kNXNwa3psclJqSFRHeHZHQWNKdkxnMTgxbjJjNWhsV2VCM1JRWmhXRWNSaS1LaHVRMUNBTk1TVXNpZTNyYmtkSGdTRGhEaGVGZ0hnN0NhenBkVE1LcUNQSFhXaXBBSTNXbE56SkR3dG80WUd0aTNQbnQ2UUEwZFoyUURnMktnTWFmdHdvYUY0OHJka1N4SWtxVEd1YStUV3ZrakM0K29OZ3hpVDRuM2RvMGo2S21vRmF2VDRFSGl6b0VjNWREcm53UVY5K29OSTBUVE5DMXQzYXY3Zlp2ZEZnMjlYMS1WWFlmM1ZJTE5WekhOMmN3SWRzZHUyT1J3TWxBQVJBbEV4WHJONTlqSmVWLVh6ZnQ1MStmMW5qWmZWNDNyZndKM3FFQ0FBWm5QZytyK1BsUDU1eEotTDZQbStUN3ZnQldUK2g5cjYzeHFHOVFCTDhmNXZ6dmdXZmVYOWdHLXhxQlNjQjM4UUVFRUxNZytCVUNhanBnd2EtT2VkOXFSN3dUTS1GQk9zNEJBeEJxSldzVGg2eFpseUd5TE01REZiU0dvV1FXZTdWb3lMMklYQXZCSERnUjcycEZtVllPUWFpTDFJSXZjaGRZK0xRSEVFSWtSQkE5N2lOa0pJbWgwaUZSeVBKQVFNK2JabEdzTFBESWpSTlJINDZKTkhvdFJzaWRiQ00wUi1FeEtqdFRIblVaWStSQURiRm1JY1JZbE9WaWFnd0tVYVlxUjdqREVFQ1FhNC14QmluR2FQUVNFMVJBVHduWUxFUkl0eFlUUEh5TUliSVh4ZGo5R09KVHBPSmhITVdFMEJCTGtIR2pERWtLbllVMkhNTVo0d2xPWVhRWm9oU2FBNHd3T2lFdVNFN1R2aWRBUGF5cTUxeTVTM0YrUjgzRVR6aUFZaGVRUzdjNGE2eGJxK0RwbGRFS1BuaW1oUUM0SmdLa1J3akJPZzBkYzRMSlFnbFBPaDQ2RFlTZ2hzclpoRkNwbHpBaFhaT1RZYUxJRG9tQlBpakU1a2swbWVUTUtoY0lyRndHU3M4YXgwSm16VWZDTmFndnpKclhOM0NzLU9DZElwZ3ErTDVUaWd5anpETkdRSmE4d2xxNzFXa2sxRXU2TFBoUFRzUFhMNGpjRUpOeitxSk9JLVVFUThEQ0JFYUlzUktoektRaTBISXBrc2o3bklnUUVFend5V1ZCaFVoSlNha2p5cVhVcHBiU1BCVHEyVW9GVFVXRGw5S0dRSVBaWEFqbG5LdVhjaUFMeWJWNW5nbC1PMHVzbU4rQU8zRG43WWMrUkloUUFBRjROR3VnNUtSdXBaREFIY2VXRFM0b01DMTN4Vm9YbE95ekE2cG9aakkyTDRJcFdzVmRNeHdkcUhXb0NkVXlGMWVMVUR1cCtuRkZDM3F5Q1l5YWxRZll5QlZKc3dPTlFQWTBoWURJQjRMU1o0Nlp1eUtvd29FUnd3TFdUdEQwYzhZQUVBNHdZRmpCQWFramIxanRuekkydU1XaDR5eUUyaXBISU5oWkE2VHJUWUd3ZEFNQUptZ3RCT005OTFpeG1JR2ExQWphY0JtVWlJMjd0ZkE3VGpzblZPbWRiYWNBTHFYYkdWZDRoVzFkbzhrVEYwOGF2V2pwcmFZRk41WVhvWm9vUGFCbXVhWG84RTJFV3VNSmEwbEFYTFcrTWFWYnhBMXJyUTJwdExicVE0Z0FSMjlNRzZkMVRxbmIyZzRncUIxRHBIV09pZDJ4RU43dm5lYW85SzYxMWRydFZ1ckRPSFozdGtQY3VrOUU2dEFYbzlWcWhOdDdkWDNyRW5BRUVMN1ZnckJ4dVNJdDFKZjI2MXFBS1FETElhVWdkMVdCNWRzSHFRYnI3YWh0U3lIKzBLYkZSaDdkMkhkMnpyUGxSNDlhNlpQMGJqWjZ4TnBCTWFpV0ZOUWZZQkF1QkhDTGVzQVRaYjJBVnFBMkowRDlheU83dXBPc0d4c0gxaXlaUS1PWlR3N1NNSWQwSHVqKzJuQ09ucm5UNWtqbzYxUGtiZXBSLUQxRzEyRmdwQnUxVGJucDA0bldJLWNMTkcyM3BhQytwNmQ5ODB3SHFTenAwOTU3ME5GWnd4NXNMRldJc1lDaTRWMkxtV1F2dlVTNHU1THA3VXV0Y3c4RnVNNndjdmxlNjVWNXIxWFAwWmd6SmVoQzE2ak1tZkRhK2l6VFFiQktBb0pXSGdSYjc1MmYtUTVrVHdHWE41a2JmZkRkVVdhdHRjRy1mYWtOQlJ0TG8tdmxqei1XNHNhYUczZG5ydEdQS3lELXROMmI0S2Z4TWZ0Q3hrQVFMT0RFR3JKOEl0Zjlkc3JJQTVXNXpFblhPRFk4NHZadDdXMHllZGtCQWRZNk9QUEJOZzMtWHpTbkIwcWRxeHBuQlZHSHRycGF6RmdieFdRdlhZYTkxcW52VzB1MDVleVY2a1NES2ROWUsrejlIcFd1c0VabzVOd0xsMzZjWTZGeGdGbnpXbnY4K1I1am5uTkcrdnk0bDNqOTdNdUN0ZllMZE5uOURHQWMzcUJ6NjB3UUtERGtBaDF0OTZNUDl4Q2NjNkp0a0xtRzBLOVJ5MmhYWG1jY0steDhkOTZSUDVNazdGM1Q4amNZbWYzZDUzTHpkNHVnLWM2U3pMbFhFZkErdmNsQnIzbnhINDhjNFp4bWQ3NDNSY1plZDhueDcwVzArNDhWekhwcmNmYzlxLVdOSDVuS2U2T3lIVEw5LVhlc0Z1bUZNOHRoZ2tSNlNwMkZBV25ncXdtUjdFdDNtYTM2NDRkT1lkNGpwM2xlWGZMdHpON3ZNRzY5NEItVDNHSDd4aTh0cnArODk5SFAydE9OWkYzWDBua2YzUDdvMzZlcmYydUc4emFiOXE1anh1UUJ0LU14My0wREkyK2ZyN3dQcHdRK1IrMjRPd2puMWttZWV1WUxhMmlzR0MraW1mdUYyQ2UwNmErc2daK0dBVytxdU9HdStXZVRXT2VaTzA2S09xQk5HaUJSZUN1ZUdZMlRXRis5ZXV1ZjJtcUJ1TGVEK1MyVCtVQW5lcitTMld3N0FwQUVvcXd4eVljUmF3KzFxZTJ3bThPRStBQlNPMCtXT0lCV084KzhHVUJLK3NCTlErK1JHMitnMktCOEI2QngrbUJwKzBoVldoK1YrZXVCbWpHaHVkNklBOElEQWV3TkJkQlBBK2hJNDVJdEktZWcrUmFGSVArWSs5dTFhayt4ZU0rZThzR2JPZHNmbVFxNGhUaGNCcWhDQnFlRmV5Qm1lQ2hoK3krTytaVzhCeEJPdWplV2hGQmQrU2FwZ3BoaGhEc3RCTCtKaEJoNUltd2xoWCsxaHRoKzJ2QkRoLUJVK2RXKzZ3QnpXSWhqYWJoY20tbS11QVJKK2k4RVItaEdCSFdjNlBoaEJPQk1tU0J1NlAyVXUyZUlSdFJNQjRSdmhmOGVtSkJaQkJVMmhsQlFLUUcrUTE0VzJiYXVSUEI0K0JSU2FkYXgyZk9VUlhoeU93ZStldW1HWXNoYXVRUnZoazJWUm5oVVIxKzNrUkszd2RoaDJ1cW9rZHlzQTlFc2dPd1VnRlU5bzVjWUVzZ1lBWUFCUTl5cEFUeDJ3THgyVU9vM3hIQWFTYkFxQXBFMEliYU0ySHdWY2FjOVVIY3hvcG8wSWVJc0pOeWlreWtmdWJNSXEtVTRxaGtrcUlzcU1NcU5rY3FDcTFrVGtMa2JBcXE2cThrdmtYeFB4RHhZRTJzS2NVS1RRTFFKczdRMGc2NGJHUmtmRW9rQUFqdFFEU20rRkdOOGNadGRqQ2pjRG5DeEd4T3hMREFDZ2pPOG5VSjh2OE5GTXlXN05laDdDbEdsSm9wbEs4VlZESE9DRnFTVkczRTFPVk5sQWFUckhuRE9LeWFxU1hEY0RpZzFESkNYSmNVMk1HUHpMckVMQVNTakRUQmpPaUp0UGtQNkh0TUFCaENDaWRLWU9RcXJLREhvbmRJMEk5TTlLOUI5RjlMSUlMaitpWEdySjBNOEhjTHdIY2NIS25QY1RBUFJNSkdpZU9CNlc4a2pJU2I2WFRKd0R4aUpEd1B0SGNUb01HWGNiOFRwSGNSNVBkUEdYbWtXa21kOURjQzFNekRiQVNTZXYxSEdDWEhTU0NiOGVxZU9CWUJZSXlIOU1haWtUd0NldmlyNERyQm1WdGgxRkNMQ0dPUmJEd0ppQUdKT1l5WjRCZU1nS0NQaEZBQUFOU1huRmxaZzNEWmtCajlUMGtjQ3RsUUEwa3B6akg3aXNIN2pQbnJqakJPaGdDRzR5QUJpajZMcWZGbUFucVNtRXBaaXpsMndJQTJBTkRraTJ4M0gxQ2REQ3ducEhCWmpvV2Q2d2dwclF6R1FuclBESW1vbDNsNkJjQ2JrTG1qa1huN21Ia01tRmxnUi1ocHJua1d6WG0zazZ4QWdQbEdDd2pQbXZudmtmbWZsbURmbG1DLWxrQ2d6UENBVmJyZ1dIcmdXUVgyblFVNndicmRGUVhTblRTdktQaGVtTFRVeGl4MHdCbmJUQm1obEhUc2luUzVMR1QxSkZLeGtQUlBUZGxXN0prOENwbFFWbGxBU09DeENkamdta1JRVVRsMFZGa2xsTmh6RGhwMEQ0WFNDRVhZWGlES1dEbTVpckJRQm1XTkpjd1F5OHpHYU9XS2tWaytuYVdZeVN4MWt4Z3l6amxzUnJCUlVGSkZJYXc3VFRub25hRWV3cnlDREFnMElOU3ZnMkF1b0VCMGgzRktCaHlCeThEeW9XUTJDUnhRVUNXaVh4d2ZLSngybFppT21Zb0VvTnh5eHNUUEZaUnFRa1NYSmdROERzVFFpd2duRURyRlZBZ2RTaVEtQWpLeFU4eW9ENFh5bGt6cVVVemVsYVdyVHJRU3lvQzR4MW4xcFpWWVhqVUFtVFZ2RXpXOER6V3B3YldrQXJVbFVHNGV6UXlaQ0hKWlF2V25pZFZ5WGRXUXA5WFFwQTJweDFRWnpPbFpncVdqVzBtM1dBbFRYUG52VTNBYm5QQmJsVVY3a0hrVFd2SEFrRkNNVXZUTVZYazNrOXo4V2NYOVE0MUFuUGs2UnZuZzBQa2ptd2hJUkNXLW1DakNqaVZBVlNYNFpkV3dwc1FqblBXQVdRVStVcHlhbExMb2pmVmNDaVI1QThBQUN5MHRnZzBvYVJaaFpnUEFSSWlOdFY5WndBQXRrUU9nTVFsWXFNNnQrMEo2WDAzTi0yZjVOcG9OWHk3Rlh3UTFtYzROc05UWTl0VXAzeU51SU55cC1WenlwY2R5N3h4bVVGanAwYVAwV2dGeEdxN1NBOFdaam9zZ2w0cUtQbEhVQ0Y1QUZLcUFpSWl3T3dwQUJJUm9qby13cGdZRXVnZElGSXVVWmcrd29kQThNS0hVZm9IQXJZc0lsSzRFdm96d09rc2RFQTJ1SVpUSVVnTHFwZ0VBQ0FBb1VBRVFFT0ZnNFFld3BBZEk5dzRhWUFwZ3NhSkt2QXBVRmRDZFBBaVlyNE5kcGRxdzJ1a2RRa1AwdHBEbzNzbkpFd3JOOW9DSWp5amd6dy1FMXlPY1JLbEt5d2F3NndsRXVBSUFMUVE0eUFtQW9BZllFT0JBZDlWOVdRTjlBNDhxY2dtQTBhZUExOVVBOXg4cWtvWDlkY1A5cjlmOTc5RUFhOFFEK0tJRGM0WURka2lZVURxQU1EYjlka2dnaUR5RGNEOHEwdDZETDlzRC05RUFxZ09EdjkrRC1BT0RBa2ZvZ0dMNStWalNQVTJ3bUF3MWVBbG0yYVRrT01pQUhBd3NjQUs1NkFXQUNZZVlLWXlZZ0RlQXZKK2dxQWdwS3dMMDNESUE2d2Y4SUEzYUlBU3g3SWQ5Y2poNFprbmRUZ1NqV2dXZ1FBQQ==" target="_blank">Syscall Assistant</a> - in this case, you must upload only <strong>acos.s</strong>, <mark style="background:transparent;color:red">and the devices must not be added to the simulator</mark>.</li>
<li>You can test your control library implementation using the <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGg1aU1BY0lVaTQ0R2c1S0EzRkhPaDRkZlVNVGN5dGJCeWNMTUlpb3VtOWZFQUJ1ZjM4YWNWZDVCQ2dBRlNkZVZBQVBVbFFZR3dKNVJYY1ZkUVltWUg4ZUhsaVlNam83R2tLQUNnQktZWmhSMFlJN0tUb0Y4dVdWMGdBTEVqTTdLQjRBWGg0WVZBQjNIaUZSQ1EzWjB3QWVQWUFXQUQ0QVVSYnBHaEpVRHdBQnhtQUNNUEFBdER3QU1KeFVnSkhnQUdTZ0FDTTZCQTZBQlBaNFdkNGZZeitmZ0ljUWNDQTJHRWNaRW9uZ1VjbHlhRUFlVlVlaWdqZ0labE04MjJKaDJvMzJod1FkRlFObFF1bGd3cmdHT1EzWE9BRzFUQkNJU1FJS1paS1lJRFFiR0t3R3RUQUJkYmtyY1prQzUyTUFvNlJuSGo4OW5venF3VWl6VUVBQmxkT0FBcks3blZ5UmthNGdRT0k0ekNUa0xNWUdhTFhRZmJ5ZUk1ZURCYkU0cmZLWTN5RHV5MEpkMGUwNEFtUlFzY0w2VnRiMDJaTTlKSXFoYzRtQzBXZUFhNnphamxBekdTYkhCMm1RbmlCWWV4V1pFb0hGVlRTQ0ppWURRZUhBemg4K0JWVXlYRG0yNEsxVU93U1dHSTlKWkhtbk5IaTJuRGlMZEJBSEZReFk0WUJBd0lEemhBcnRCZUUzWW4zSERFYTN2OTAzanNHT0tHbTJRYkE0T3hTQUFJVHNYUmRHa0xrZVgzQmQyVy1FTlpuLVVnUlRvT2d3SWdxRFNoZy1jb0YwSkRTeVBFOXhEUFZrT2l2VkI1aDRJVlNEc09obG5oT3hVRU5Zc2FMbzVaajNFQWhtTHJMUlpHQVk5V1dYREZ4RXhEQnJTbVZBdEEtQTk0SmJKZE8wZFV4b1VJUUZuV0hmOUFsZlZBQUVjN0FnY1FvRklURU95YVdZQUFOMVA4Y3paRXNna1lITStZWkxHZjFlRW1VeVRYT0FCWlNJOWpNTzFBTEFCWXpDaVZSNFZnVU1BR1lBRFpuSy1lU2JIYlJUdXhVN2llRkJEVFN6Q1lrcTEwLVRET01qekhYTWpMLUFBRW1BZHpGSzBleWJKNGN5S3FxcG9hdXNweVdMZzV0VzBTb3FVdFVuZ0FDWk1zT2JMdEwwZ3lqSk01THpNRzZ6YklxOE56V2tGcUhMYXV0alhqVGM2SDZxMG13Q2gxWm1kSEFYUzlWMDR0TGI4RkxNNVMrc2lvYjJSRzNLeG9LeWF6UE0yN3l1QUJiSTM2NWE2b2F6N052NmtLT0RDaGdZRkRVRll0Ky1qbnlRSVU0RjBPeHgxSVFjWUhFMlpaZ2dIQVVTbzA0WndnWUhFUTRLNXBGUzFBRmpPYzRVVUo0blNkVWhaNW1rczdEZ3U3cmt1dXRLM2p1c3dIdVhKNkpwNjh5dVkrcHF5R2grckd2aElyZ3c2WkI5bCsxYVkzaXJxa3F1bnMrdmRibmVieThiQ3FtelhadnFnQTFBeW1KNEFCeElWSzJTZllLQjRLeUhOa1BnVWV2SURTQXdZNjNSYzlnTVNyUkhrZFI5R3NaeDZkWjNuTmo2SjRXWTRlNHdSS0V4cWlaMjlkcXRDWjlybGN1cnNPY0JhS3RhMHg3OG9GcWJjOE4tNmZQMmZ5Z002V1p5NzhnZ2RPNERkRnFqUm5hcWQ0QllkOWhHa1ptUU9vK0QzR1p5V1dEMXA0YVFER1NiemZOYkZFQ0dqakZZLWppQXFLaEdQVURqeDBjZWMwWThObUFCQ0VnQURrSUVQMlp4NjRLaUFESkw3SHRDdUI0WjUwdTlhalVGb3lQR0o0OFBYLVl2UURPNGxPMDZObk9nbFZXV2QxWnBRQU94NXpYQVhYV0wwdXptU2dhWENxVFliQktBb0RRY21PNENDeW1kSHFiY2lZY0dnajFLM1EyZkJPN3czOXIzT0lRZHNhRHpEaVBWeXQ4SjVXbHJqUE9lYThONEowaER3VGg4Y3Q3dFIzdmhBK0JCajZuM1BsR0hnMTltSDMwZmk2S2lFY0dLU1VFUy1OK0hFLTZmMkxLblJXeFlNNXN6Vm1UWUUwQ2NwODBMbnJWNlFJMjRTMCtvUTNCZW96QXRDMEFBSDNtcll2QlpoTVRPTmNTS0hCN2lBQmVYaWJFK0xzYTJPQWppWEZCS2NDRWlBY0JQRVJPd2RFdUFBVDRsdVBzUnFGR2NSbkdsUldzek9TS3Nlclp4NEFBVG1NYU5NeDhEaW9sT1FaRW9oOWp3bmVLaWNRanhnU0VsTk9TUTAycG9UNmsxTmxFMG1KY1NPbTlMU1VrbHB0aStuVUpnTTRoMmpsb3gxam5LTUdxTUJmUm9MNkpnc01pWTRDSFF1QnMwRWl3NnlLSjRHd2d3U01iQTEybnZYUnViRE9CWEhXU0tUWkRpZUU3amdLQ0J4c2grcFVRQU5TSE9udGMyNVZablFlTWVUc2p4YnpQbmZJcnI4cDVBSy1GQXJ1Uzh2eG9LZEVwSG1Ud2NzMllxdzdnV01QRllCenNYRmhhT0pYYXRKOW9RamVGN01sM3BDenpqRWgxUGE4ZFNYa3RPbFMyQ2ZqQ1dsanBZNkJsV3lLWHpHWmZ1R0pCTGFYRXZqbHN5SzdvaW04cnJLTWZwYkxEZ2NvT3JJTVZFcStYRmhpYXlvVjlvUldLdkZaSytjNlMrNUVzMVk2Ymx1cXRHK2tXZEs3cUs0MXdjQ2JwR0FoUGk5a3hqakRTQ1pNb2VBcGxncVljMkhBQUJpWEI3eDBCc0txS1ZHUjZqc1VSS0tVZ0liNXltSERmUkFBU2xBWkFleG8yNEZEZDZqZ0lFTlFBR3NZMWVwQUY4VG8rYVZoNmpXa3cySUlvclRtVHJBQVlpUE9LSGdoOStDSWtSUGJGRmZKTVJTQ1BHUEJhOGdKa2hCOWY2dWdnYWJDeUhqVEFTTnVoU0RqdllrbWxOTTZMWlp0emJJSXQ1SWRCeUFtZHNSc1hiaFNpbENJeEdZVGJFd01OZ2p3QjBQQVdpeUV4TElQeDJFTEFXQXRnQUJXWkxFTGdhREx5ZGxEVHZTZ05Jd215SDZRQnBKOTdIMWZCeU1rT1E0TTJSNkh2bVNMd2RneURYa29MNGVjb3hOMFpPV1BxdUlJSCswWWU2RkVYaDBoZEJjREFOK2c5VXdqMkh4UFFBS2t1RzBIRGg5V2p4a1RMeFk5SXB0MHhnQUc0Y0NnT1NCQXdGdWl6QmNoTVhnTkE5Z1loNE5SOGpQQm5KaVlrMUp0QXBCQk5qSEU4a0tUa3daUHRRdlpFSGpVZFI1eWJVK1IyVHFuSk03eWlCQUtPNTdmMmNkTnFnV1FCblRPVEZrQmVsRWZWbkpJMklNZ1M0NUlMMktZN0d3Y20zSGVQT1cwd2dRVUhBV2pVQWJvNkM5VjZyTzhDTWhXUERJWGYxK1pXY29OWnNXWWpPZC1TWkdnT1hlQitPeS1GeTlIWUNzOEVtdVZvcnBBVXR1WGhCZUdJQ0dvaEdDRS1wa3oxR05QT1NvMVc2ajU1eENTazZJZ0RnQ0JaamRjQk5SdllxQXlTeURHNUp2cnN5bGt4Z2N5aWNDa0U2QzlOZEEyR01GNnZxV25PUE5UYVdnY00yWVlCQUZFamdEMERob0FaVEVvUlg0OEJSTGQtWWdKWERvTW9IV1diVUxqc1lpZ0dkaTc3Z1ViWGRFbmQzZ2oyU3d2ZDZNb2FOTVpQczdPKzZkODdnSUFkUUNCN2Q3aW9PbnVUWkhHNEtISGFlQkJiNDJES2dtTFp1MGNUUFo5cjdsT0FPaWduaTNDdjdIQnl6MkxJY1RCQmN4TWF0TTZGUnF3cGJVOG9IdDg5NW0ta1FnK0hGcW5QSCtjeUNmdHZGWWpQOWhXa21BMW1nVFhEQ3pIRnpUcU0zUHlORFkxN0tPWGV3OVJXZ0FPUk9LTjFyb3lwSmhjZkJ2Vkk5WGt1OWVvQ1p6d0w1eERaRHlLMS1yaFg5V09pTmJJS3J1MzdSTmRrWUQ5SUIzVFBEZm5CTjJic2pGdUlCVzRSYmIzbkV2QTloLWx5Ny1CMHVQZU8tbCtjUlhQdmxkKzZDaUhvUHFIdGQ4NVQtcmlQUEFvLW02Rnp1RVhBclpDWDJMNm52WXp2MG9aLWQyUnozdWZ2ZndBTDgxdFhTZU5jeTU1M1FIWDl2Sy1HOU43WHkzOWVQaUFjVCtQOHZvZlBmcDdkOG5idjJlMis5N29FcmxYUmZoK1M5SDJYNVBxLXQ5VjVyekh1dmlZRzlKS2J5M3RmSGVOOG41NytSLWZoZWgtTDdQeVhzOXAtZGRUNlI0ejdYNlc2ekFPaFVUejVZWXdBUDVINFY3Yjd0NnU2WjViNU82NzRmNkQ3RjRuNlA0WDdUN1I2bDU0UlJ6ejRYQWM1N3puRE5xdHBPcC03RmlzN3M1dEJXaWdoYTRXcG5xeDZ6RFVGMGFMck42d0huNU83cjdwU3hSYTc4WktaZjRUNkI3T1NMSjFnRTdVUkl4d0REWkphb3hnRy1yRFlVRk1HLXFrQmJLa0Nnak9aYTVRb1BMN1k5THVLT0xZVGFHM2E2RUpMdUtlS0dFYkxRcFdpREwrSkhiYkozSUFvQ3JXRjZIRElHSDJILUtoTEdFOEEySERMbUh1SDNKcXJPR21IRElCSVdFT0d0Z0RxNkZRRTRMQkVSRVlaNmgySGFGc0ZXaVh4UEwwRmtacEU2SGVFOUpOSnVHWkZlR0RKTkorR1pFd29tRmpMMktoSCtFdkpPRmxIQko5SmhLSkhBcjlKQkhsR2VHTkZ3cWhLbEhaR3RJaEh0RlZqVkdSSFpIUkd5ZzlGeEdvd0pGaEg5Rm1ESkdrRXRxSWhhNWthelo5YXlEVWFHUXdBNW9TaUdTZVJTSmZiQjVYQkdSaVpSeUtGMDUtN1hacFRPZ1lCa1otNENGendyYVlTLTZVR3dSb2hUWTVvY2FQR2pCbkdBaWdpWEdsNS02S2EzR3JaWVJYRm5vM0d6QjNGclluNS03UEVRQ3ZIQWtmRjlUOVEtSHZIN2lnbk1HN1pTN2dsYmpTNlFsbnJRbXdtLUZHZzNSSW5Ja3JDb2xDNDZaUUN6RC1GZ21Ba3R5eUNZbFM2UXhJb2trUFpXejRuSW1mRThCdkRFa3NuVWtNazRtd1JrbVc1NTc5NEg0MG4zRzhvUGEwa3Y0Q243aDRsYTdGaWNudWc4a2ttcUZXaCtZdXpreXltNkxnam5BYWtCWmJCd2tva0NaZ0ZDN3FFUWlxSDBuU25Za0ttNGxzbTJud2xwVFJRcW5JbENseDRRQmhZR0NSWVhLT2pvbXlCa3FTa01reWtPbHluMmxHbWNrUUl1bnZGdWxVbXZ4d0RwWVlKWUtXR3ZMK0VBbzI3YUVKNlpGeGI1RU9wVEYrS0JuV255TGFrckR5bmhsOVJBaFJtUEY5WURidGljQWpackViSHRoYkhzSHpZaG5GaUNnT2pWajVpWHpMRlNrU2x0a2xsaGtFbU9tQWhGS1ZtVUVObWJGS0JXalZtMGhEYjFtd0NObHdETmxONnRsR250bEU1ZG5reVRsTmxLQlduOW5ybURrdkVobEVTbmpqbFFsRGwtNk1FTEo0NFhxUUN3QllveDRLRWJBRGh4QldnVW14bUNIOGtuNVREd0F5SFpoeUgtbXZrd0FuNVhBSENPQk9nLW5meVJ4YzZzWTRTakExck9yM1kyQ1JBV2JuQ1hBM0NOQnRCRnFWclNEZGpBUzZBUWlXSWdEekJtQWRDNFd6QzRYT1F1cm5ZY0RVam9YWEE4QWdRa2dvaXpDeWdvWGtBWjdBREdSU0RpVHFoaGFHVFhZWVlXQWNBekN2d1FpVEJUYWtZZ0RTVHRRdXJuZzNoRUUzQytwa1JzVzBVb2daNm1EM2t3Qm1BMENjanRUNURWQ0ZCdmp4Q0JoSkEtaGtqczVYQUl5cVVLVWZoaUdMYWpEeXBnQ3dDeUNRQXRCVVIwNHVYTEJUd1Z5WUtzaXpEZVhPVHVXc0xUeTZBa2hjQ0JVUUFlWHRRSEpzTGhVY0NSVkhLMGlxNVVSU1pSVXRBOExlVUlGT1R0N2VXR2dPWCtBT1VZVzFBTkJtVFJpNEFnRGpCaWpJQ1lDZ0REWjRaMVZWVnhBMVZ3REtoeUNZQWZ4NERWWEpwdFVFQVFEUWlkV1NUZFV0VzlYS2dBQWlRMVRFSTFNQXJWeW92cVUxZG16VnMxWTEtVmdnaTFNMWMxLVZYa0cxeTFXMUVBcWd1MVBWeUFmVkVBLUF1MTVFaU8xQUhBTVFrMk5BT2FLSUVXbUFuRTNFZUFBWTFBNUE5MXdoMGdjQU5tNGdURUxBem9MUUVDdnFvTm9OZzFlQW5aK2d1a2NBZG9hQUxBLVU3b01sYjFtSXRBQmtYRWRWZkVJQUlvbkdLT1RnVFZhS0JraUFkRW5BM0UtbTE0UlFQZ1RWQkFKSXpBR0FpTjBVV04zRTRndWc4WkRBdU40TU1RR0l4UTFOdE5tQUVDMFVRSVROMGd2Mi1XUVFuZ1ZOR0FvQU5OSEFkTm9JLVVRSXpvcWNxY1FBQQ==" target="_blank">Control Library Assistant</a> - in this case, you must upload only <strong>acos.s</strong> and <strong>colib.s</strong>. <a href="https://github.com/discovery-unicamp/ale-exercise-book/blob/main/reference_code/ch08-01/api_test.c">This file</a> shows how the functions are being tested.</li>
<li>You can test your solution using the links <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15Z1BaS25nak9ucVQrMUFBUFVsUVlZaXpuRzFRQU55Z2FZWUlKWFRnYkJrT1laR2FJQ1o4LUdIOGFjVmNlS0k0N0RZSWVOWTJZRFpmZ28zTW9xT29HRXhnUDRlUE1kcVE2SFk4bHdBQlFBU21oTUZoc0lJZGlrZEhSMDJ4UEVjdkFNMzFRY0NnTmg0QUY0ZUFBR0VvOEN3V0hnQVlRQUZoUTBEeFNKeVNIeU9Ed09QenBEeHlUOFlkalNSS3ZoczREQUlHQW5IU2VBQnRVeHlVeXlVd0FJUjFmWFpwZ0F1aVlzVExVR1Q1WlR5SFEwS1JmdlROUmJpUzdpY1RnS3NNRHdBTFFBUmdBYkxJQUo0Ky0yeUFCZVBvQTdGb2NOS1BYeHZUeC1RQVdZTThNT3BxTStnUHh4TWVyM2h3TU0wUGgzTThBQk1ESUFyQVhYVVdVMVdBQnkxOHM1bmpSNnYraGtOcE93NHZWdHNkaU5kbjB0LXNlazBKeHV3OTBEb2NCelBac2ZkdU96Z2ZKOE1BWm5iV1lyNDc5LXFuU2FIcmJUbzhydnNEcDZiNGJUTGF2Ujk3ZDg5S1lEWTlYbGY5azgzMC0tTjFDM2ZQTWcyZmRjMzJ4SWQtVDNjRFFNZ3dkbXhiUzhEMDdic2J3UTdkVTFMT0RVelRURG9KdzFDMXg5R3Nkd0lsTi1RQVRsd3FzWU1nbWRDeE5RdCtSSU13N0NnTlVjZ0FkeDRJUlJBa2ZFVVFBQXdBSGs1Tk1BRDRBRkZWbWtHZ1NGUUhnV3pNZjAtUStHMGVBQUVtQVNWS1NWRlVDSFZQU3FSc0UwdEZFaXdKTWswU0FDTTZFa3dzN08rUm9zVklFTXBGcFV4YkpjckpUQjRha3ZKQUJZcVFDUkFPR0tlWTNpSUlMYk5JTEU0cGdYMEVBWVNBNkJEVXhKTlVLMTVudUlVQW9DZkpJaDRUaGlIeUxKTEo4MGhYTWN4dG5PcXJJK1E4MUJZdDg1NFFBQ213Z3J4R3dHa3BFTFN2ODE1WEZpK0tlRVM1TFV2dURLUUVrZ0J4SEtGbm1PdzZEb1RaZUZLcUJ5cGdTcTJ0cTRrN0ljd3NRa0lYZ2xzMjdhZlZFZ2drQ3hRTFRCQ21nVnJXbFJCdG15eWJvb1NUaExSYVpDeHNjSTdCVlNnekFkYVRIR0IwZzlSRFFRYkJSVXdlcjZ1NDZIQzRvMFRNTEpYaU9BQnJOVTREcFNTK0FXZGpDcERBQlpRWkhETWJMQVRKcHdDQlFWQjRlQys1RFZNQjFWSElVZzdEUmtvdEgrd0hJZEJxMXdkUVNIb2RoNW1RdGdLQlVkTWRITWZFSEc4WUpvbjdqTVU0cUhjRFlVU1hNRGlNckRjc0xMVkNxSjNTc0dUTVB0ZnY1NTQ3ZUpUWEJFb2FSOWtpRkYwVlZ6RWt5Z1hRVVdKaTZDbmdjUU9HUU14SEJ1ZmtlRUpoa01XQTdFQWFlb1d3WWg5YUpiaGg3N21hWjcxcmxrQjBkZ0hJNkJFQUFWTW1RalZBQXBWUUFIa0FEa05ZUldCa0I5a00tZlZnT3NqZ1lQa0hWZjJJcTJ3T3U1RHNQTm1RU1BmVlRFMWZyajIzaVhqSGhhd1pHT2lVdFhnZmlvUFMxVUlFTVlCb0hoOGRwUW12WTlWaUNBMXExUXEydFJpNEFFVUVXdVJKMGt6cVg1LXdmcFg0bGljMTZndWFadldWMFBCQldRUTRUYlpqTmhiSzJXaHA1emx5aE1EdVFjUTVxblZDYUQrMkpUNW1CU3FnUFl1aFlCWUxnUGNaQVRvTlNtRjlMNkVnRUEyYjRCb0RZSEJZQmNTbWxRYkNIMktJQUNFS0lJRGNXZ0d2QVVaOUVUd0ZHRzhjWTZJMFN4eGdiQ2RCSEV3NGgyWnJYWVVPREhBMUFrTGtEWU5oNWFNTFFUd3FSeUFaRnlLZ0FvMDRqZzhoWUxVWEhXRWExdVowQ3hMb1NJcHgxR3p3OUMwTWdmSUNGV2lJU1pPMERvakxQek1uSFdVSGljcjBuOFk2RFdBcGRDa0VKSEhYUVhBZUFvajhXcUprZkllQ2lWVEMyQkpwQUFEVTZTMFI4Rk1iQWttVzF5YVUxUU5UVFlOZzZaRUVabExWbXVBK2djeTVqekV4WWllQWNLNFh5VFJCQkhDeEJSTDJKZTBDdHk1TWNSd0ttM2RtWUFDcHhrVE1tWFhhU1BCaTZDREp0SlZReGRwSUFBVkpuckltWTBnWjhJU29SVFZIM01xZzl1NjkzYnYzYmFROVE3aHpIcHlkUy1vVUhiSzJMd0d3U2cxUmt3YUp5RFdBQkhiZzdzZ2xtRldPcFVxLXkwVGpLckR3ZEpNUy1raGtCUkZNd0lZUVdqTEJSQ2xFZnpJd3dyUHBHQkZWWTBRUElJRU00cEl6aEliUEdSeVBLOERtbHIxcERwYlFQb1VRNlNCYXNlZTlMWVVoaVpjQUlGa1lvRm1CNERmSlFGQmpnSkY2RUVpbE1UcVV1TThJeTJRWXI3UldqaFd5MUZVQ2ZRNldlV1FMUTc5Y25NSlZid1VTOUotUzFsRVZ1V0V1U21HNkVoZUtzK1Z6STYwbnBESFkraHJtbWNLMm0wdGlIVFVCZEozRXZaZXhxTkZzUkdjVFRJN1FTQkhKRG4wKzF6cUxYU0lPUVBUdTNkUTMydlFXUURnQ0JxQnNER0tpT05ocnpFclRjb2lWQTNxZERldUZZRTgxSVNmYmhJelhQR2VjY0UyTkdUUUlobzZiMUhvTzduQWVVQ0J2Z1JKZ1ZteXhlZ2JHb0daSVdleFJyR3lGbGxHdE9JWEZVQzhUQ0JFYUlzUktpZHVKT2dsb09ROGlCelB1MmdnbklVVGpzcUJtbGltakpFUUJzRFlPQTY5NFl3Tk1PeVF3Q0E5RU5FRGpxT09COGo2NU4zZHdNd2ExM0EtSXJUNnMreDdUMlpEMkNKYjFzSlFiQjFzdUllUWNBR1FnWjRHQmpnRUdlQjZtZzdCK0RpSDJRb2Z0bUdzd3ZWeUN3YmtOQm4wc0hpUm1HNGx3R2t5NGVBQUdJZUNyR0k5aVVqNUhVellobzlDK2pvR3lOMEJwREdGalhaMk53YzR6U0JrdkdJQndEbzAwcmNqR3VNOEROckNHam9tTW9TWUhGSm9USW00Q1JuNHlweGtJbTExK1NVMG1MVEJHMUkwZEdUa2RZcUdDRFkwWUttR0QrbW9QK2lJM1pramdtOEtCbW83UnpUTG0xSnlhek9hTU5Ib3RNQmg4eHBwekRHWFBDWjg2SjhULW5uTk1kays1aFRubW1NUllTK3BwTDBudk1KZDAxaG1MQW1tTUViQlNac3pwQUxOV1lRQXZmRGNBZHdZSFN6U1ZzdFozUFJkeTNsakx2RzJPaFk0MHh1aXdtYU1oZWF5MTFUa1d4TzFaazVsK1RjQkZQOWEweWw4YmZYbXRhYkJaRjdMSTJDTnBuYzZaLTRsV3F3MVk2d043Q1BXUE83YTAyTjN6STJhd05kNnlObWJ6VGh0SFpjNHQ4YmszNXZoYlUzTjNMQzJkUGJSVzFWOWJ4WEt0cGgyMU4rN2JaR3NqWk8rMW9IVEdXekJhdTJwcHI3MnZNdG1NemRwN0NQa3V2WkcydHBiWDI3dm81OHh0OHpPWERYSVlaSTV5SDBuS00wZmh6RjQ3YlctUFBhWXp4bUh1UHBQWGFpeU4rTGozWWREYmV6VGw3Mk9IMHM1cE1oNUhCT1N0MlkxbVZpcmRtUmRrNFp4bHZjb09oZk1aOHhEK1hGSHZPWGVWMnoyNzVPYVNjNVI5ejFMdlAtUFRjKzRMdlhTRzRDRlo0R0wwcjFuZXl3ZVE5VnNIajRsZVctQi1UdEhHV0l0YTh0enI2bnB2N3N4Z2U0YjdYR1B3OEM3MDViNURhMml1YllsNVo2emFZbmZXOEIrcjRjY2ZEc2U3cHlObTh6UC1kdzQ1enVJYnFPK2Q0K055Tmt2VWVpZEI2WTg3MzdDZi1PeC1UOTdqWHlQQS1ZYTg3bjVYdjRDOFo0RDJka1BwZWplemN4K2I2UEEtZU4yOXJ3T0REcE84OUJuZHhuejNJMm1mdVpOMTNpdjQzTy0ycTB3YnhMa2ZLOUgtazh0NVhHSFJkLWNUMUxsUGRtTDl5N2I2bVJYVk93Yzk4dDBGamZvK2J1NzhOZnY2dlhPVDhidE44OTkrY3NzY2RMY01NYmNaOVRjazl5dGF4WU5JRFc5eTlwTUx4bDlIOVY5bGQ4OVA5QUQyZGxjRDhKc3Y5Uk5nRGY4WE5xOHdDTGNNOE1NUzk0OUNjWUNwZC1SLVFFQ3Fza0M2OE10U3cwRGtDYVFNQ1Bjc2MtY3A4aHNmOUpOZzlROUQ5QzhlY3pzSjlaOFFDbU1NTXM5b0N3MVpDV0N0ODJDRHRCRGxOdTlWY3ZkT0Rxd0dReUMrREg5QjlsY1JDQ0NjQzB0ZTlKQ1JzTU1MdGJjcjktTXJDbERwQ01zcUlmTTFDRE1ORDNNMWRIODZKcUMrTlREWENBdGc5TmN3OHhEajlMY3NkeURKOEREcDlpdGhKZFFRQWxZWUJzWThFbFl5QXo1ZVpYMHJSczF3MWhaQzRqaG1nYjA5RmJRbkJ5MUYwUFFkQmRRWUZxaHJFOUU0QlVCN2h4QnN3RVE3QWxJaDBlQU0wSkVvQXpCLTB6MWlqbVliNHJnbEorUnlSa0FiazlKRFIxNDRBOUpvRi1BWmpHd09pekFjRWxSeEJKaW5BSEJlQjZSbjBja3UxNTEzMDMxU0JOUVFBSmpQMDFqaWd6UkFsRDFPaWpqVmp4QkhSMUZaUmtBNkJqMGxJYlYxRWZaSVVMaXpBcmpjUWJpaklHUXpRV0ViVnNrN1VQUlpSNEIxNGlGNWl2aVRpUjRJNU9SY2tvbE9oWWtjcE9KZFZtUk9Ka2t3VGlpQ0EwVE1rZ1R2VUhpbmp3VnppMkpKRW9TZmoxUW9CN2ttbFdqaVFDUzlnMVFVUTZTbEpSa2JOc2syUVVSTVRVaUF3ZjBhU0pRZGpQQTlpRGpGaklnNEFtVFRRMVFtUy1vWUZaUUlNRU0xUTlpY2pwQWtZOWpTamlSdTBzUmhJNXBIaTlnbFZnQW1TdEJ1VWI0T0J1SVlCZzVqMHN3dmhPaDE0K1NKMGxoNUJGQjNCS0EtZzVJbnB0b2trSUFlQk9RMXBkQXFWZ0J1SllBQVp1SXpCK0FvZ1FnekI2QTZpTmhxNWJJdkJsRVF5UWdVUlpUYkkwUWRCQXpUU09CajBnb1RJbjRiUkZSbFFuQmpKY3pxUnpJUDErVE1vLVlsWWFCY1pPUnBCVUEwUkxJSUJKSXpCaEpCMXBSYlpwUnVqQU1tWXV6WkFESTZ6Z1RaUmNNUFQ2UWVKWmwtaHBKZDViQnBCbVp2aGRCZlFXeDVZekJOZ3V5LVlweU0wWlR3TkoxZUk5UndNVVIxUWh5WncrQjNJcEFpTjhBRUFFQkt6NzBzZ0xCd2dOaFNCZlF5QTFwbFJUQW9GVUZaUjVGbmllQlJ5QUF4UW92Y3BNdzh2c2pOZXRjWWZJMW9JWkRvS1JZOVJVS2RPQUQ4bEVEODBOVzJkczdJS2REU0NrQWdUdFhBWUtMSUhCWkFUQVVBSk5iYUFnQWluQ21BUENxa0JtT1FUQUpvMUFQQUZvQ2k4aGRrR2kzTmVpM0NxQVc0Y2hHK0ZpNW90aThpaml5aWlBYjhuaXVpc2l4aWhtUVFFU3ZpOFNpQU1tS1NzU2dTOGhWUWVTaGl4U2htZmdlU3pZQ0FDRFNrUEZab0dzcXMyeURnVllUQWF4Y1FVNFBBUFM5d0tzOEtXQURZRkdWMmNRWm9sZ0JrVllHTWI4anlqeTVpdkFPeXVDdGFUNVNZbmtkQUxBS3NXc0VBZU1FQUFnRU1XZ1NJY3lnaWlLdllRNFk0RWlqQVVBTkFRdUVVOXRPZ1VxVzBOZ2FRSW9VaWpwVVVUQVVLMjhTeXM0QzRLNEp1WkdBcTFLeUs0T1pnREFHTVFNUDhTSzZRS0FUS3lvV3EwQUlxeHEtMFZzUHNMUUlhb0FB" target="_blank">Route A</a>, <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15Z1BaS25nak9ucVQrMUFBUFVsUVlZaXpuRzFRQU55Z2FZWUlKWFRnYkJrT1laR2FJQ1o4LUdIOGFjVmNlS0k0N0RZSWVOWTJZRFpmZ28zTW9xT29HRXhnUDRlUE1kcVE2SFk4bHdBQlFBU21oTUZoc0lJZGlrZEhSMDJ4UEVjdkFNMzFRY0NnTmg0QUY0ZUFCR0VvOEN3V0hnQVlRQUZoUTBEeFNKeVNIeU9Ed09QenBEeHlUOFlkalNSS3ZoczREQUlHQW5IU2VBQnRVeHlVeXlVd0FJUjFmWFpwZ0F1aVlzVExVR1Q1WlR5SFEwS1JmdlROUmJpUzdpY1RnS3NNRHdBTFFNZ0Jzc2dBbmo2R2JJQUY0K2dEc1dodzBvOWZHOWpJQUxFR2VLSEdaR2ZmNjR3bVBWNnd3R0FBd2hzUFpuZ0FKbUxBRlk4NjZDOG5Ld0FPR3Rsck04S05WaG5GK3VKMkdGcXV0OXZoenMrNXQ5ajBtK01OMkh1LXVELTNwek9qcnV4bWY5cE5oZ0RNYll6NWJIZm9aazhUZzViS1pIRmQ5QVpQamJES2VibDhQUGR2bnVULXRISzRyREluRzZuZjdkZk0zeHpRTW56WFY5c1VIQmxkekFrQ0lJSEp0bXd2ZmNPeTdhOTRLM1JrUzFnMU1NS2c3Q1VOWEgxcTIzUERrd1pBQk9IREsyZ2lEcDN6RTE4MzVFZ3pEc0tBMVJ5QUIzSGdoRkVDUjhSUkFBREFBZVRrVXdBUGdBVVZXYVFhQklWQWVHYk13R1Q5RDRiUjRBQVNZQkpVcEpVVlFJZFVkS3BHd1RTMFlTTERFOFRoSUFJem9jVDh4czc1R2l4VWhneWtXbFRHc3B5c2xNSGhxUThrQUZpcEFKRUE0WXA1amVJZ0F1czBnc1JpbUJmUVFCaElEb1lOVEhFMVFyWG1lNGhUOGdKOGtpSGhPR0lmSXNuTXJ6U0djK3lHMGN5cXNqNU56VUdpN3puaEFQeWJBQ3ZFYkFhU2tndUszelhsY2FMWXA0ZUxFdVMrNDBwQWNTQUhFc29XZVk3RG9PaE5sNFlxb0ZLbUJ5cGE2cmlSc3V6OHhDUWhlQVc5Yk5wOVlTQ0NRTEYtTk1JS2FDV2xhVkg2NmJ6S3VpaHhNRXRGcG56R3h3anNGVktETUIxSk1jUUhTRDFZTkJCc0ZGVEM2bnE3am9VTGlqUk13c2xlSTRBR3MxVGdPbHhMNEJaV1B5NE1BRmxCa2NNeE1zQkVtbkFJRkJVRmh3TDdrTlV3SFZVY2hTRHNGR1NpMFg3LXZCNEdyVkIxQndjaDZIR2FDMkFvR1IweFVmUjhRc1p4dkdDZnVNeFRpb2R3TmhSUmRRTUlpdDEwdzBzVUlvN2NLMkxNeGUyKzNubmh0NGwxY0VTaHBIMlNJVVhSWlhNVVRLQmRCUlFtem9LZUJ4QTRaQXpFY0c1K1I0Zkhpd3hJRHNUK2g2QlpCc0hWckZtRzd2dVpwSHRXbVdRRlIyQWNqb0VRQUJVU1pDTlVBQ2xWQUFlUUFPVFZoRllHUUwzZ3g5MVctYXlPQkErUWRWZmJDamItWTdvT1E4MlpCdzk5UmtUVyttUHJlSk9NZUJyWXNvNkpTMWVCK0tnZExWUWhneGdHZ2VGeDJsOFk5ajFtSUlOV3JXQ2phMUVMZ0FSUVJxNkVyU2pPcFhuLUMrcGZpVUo5WHFBNWhtZGVYQTl3TmtJT0kybVlUWm13dGxvU2VzNXNvVERiZ0hJT2FwMVFtamZ0aVkrWmdrcW9EMkxvV0FHQzREM0dRRTZEVXBoZlMraElCQUZtK0FhQTJDd1dBWEVwcGtHd2k5aWlBQWhDaUNBbkZvQXJ3RkNmUkU4QlJodkhHT2lORTBjb0d3bFFXeEVPUWRHYlYyRkZneHdOUUpDNUEyRFlXVzlDVUZjSWtjZ0tSTWlvQnlOT0k0UElHQ1ZFeDFoQ3RUbWRBc1M2RWlLY1ZSMDhQUXRESUh5UEJWb0NGR1R0QTZBeWo4VEl4MWxHNHJLOUpmR09qVmdLWFFwQkNReDEwRndIZ0tJZkZxbUxNeVhnd2xHVE5qaVh5QUExS2t0RWZCakhRS0podFVtNU5VQ1UwMkRZR21SQjZZUzJacmdQb2JNT1pjeU1TSW5nYkNPRjhuVVFRUndzUVVROWdYcEF6YzJUN0VjQXBwM1JtQUFxVVpZenhrMTBrandRdWdnU2FTVlVJWFNTQUFGY1pxeXhuMUw2ZkNJcVlVMVE5eEt2M1R1M2RXNjkwMmdQWU9vY1I2Y2xVZ3lKQm15dGk4QnNFb05VSk1HaWNqVmdBUjI0SzdBSlpoVmlxV0tyOHRFb3pLdzhGU1ZFbjV3Wi1saFRNTUdJRnd5UVZncFJEOGlNVUtUNFJqaFpXTkVkeUNBRE1LVU13U2F6UmtjaHlyQXhwSzlhUmFXMEQ2RkVXa0FXckZuclM2RndZR1hBQUJSR0NCWmdlQlh5VUJRWTRDUmVnQkxKVkV5bFRqUEQwdGtDSyswVm9ZVXN1UlJBbjBXbEhsa0MwSy1iSmpDbFVKUHBBeUdzd2pOeXdteVF3M1E0TFJVbnd1ZUhXazlJbzZIejFZMDloRzBXa3NUYWFnRHAyNEY2THdOV29saVF6Q2FaSGFDUUE1UWNlazJvZGFheVJleSs3dDA3a0dtMXFDeUFjQVFOUU5nWXhVVFJyMWFZcGFMbEVTb0E5VG9EMWdyLUVtcUNWN1VKcWFaNVR4anJHeG9DYStFTkJUYW8xQm5jNER5Z1FOOE1KVUQwM21MMEZZMUF6Sjh5MlAxUTJmTXNvVnB4QTRxZ2JpWVFJalJGaUpVTnR4SlVFdEJ5SGtmMko4VzBFRTVDaUVkbFJVMU1YVWVJaUFOZ2JCd0ZYckRLQnBoMlNHQVFEb2hvLXNkUXh6M2dmYkpXN3VCbUJXdTRMNXBiUFVud1BVZXpJZXdoSWV0aE1EUU8xbHhEeURnTVdRRFBCZ01jRkF6d1BVRUdvTXdiZyt5UkR0dGcxbUc2dVFLRGNnSU0raWc4U013bkV1QTBpWER3QUF4RHdWWUJIc1JFWkk0eWJFbEhJVTBhQThSdWdOSm95TWM3Q3g2RGJHYVRGaTR4QU9BMUdHbWJqbyt4bmdKdFlTVWFFMmxVVC1aeFA4Y0UzQUNNUEhGTThBRTlKeHB5NmZMeWNUT3AzREtsS1BESnlPc0pEQkJNYU1FWkpCdlQ0R0dUNGRzNFJ2anFZQXdVYW8ycDV6S2t0UE1jYzdSNXotb3RPcWQ4Nngram1tM05DWkU4R2owNm1wUGhiZ0hKcUxUblF2S2FDNGx2ejlHdlBoWjAraHRMQm00QWd1TTZaMGc1bkxNSURuamh1QTI0TUFlZm95MkdzYm5JdHBkNHhscmpQbW12TllrelJBVGxIVXROZlUyRm1Ud21hc1NZb3Bsd2JDVyt2T1lHNDBsVHcyYVFncTB4QWJMYzN3TXBqY3laLTRGWEt6VmVDeDFta2dadXZ1ZDIrcHNiR1p6VHRmVTlXZXJQV1Z2VFlpeXRoYjQzYnNwWWU0SjVieDNuTzRlM090b3JGV1V3N1l1ODV1ckRXVnVuYmE1TitqelpBdlBjVzBOajdHWG14R1pteE4zTFUyWHZ3NGsydHhiNzNBZkphMHh0c3pPVzlVSWVMQTUzSEVteU9VY2E2amxyM256c1E0azV4NkhHT2xPdytwNGxtTDMyNHNvNDUyajJIdldhY1NidXpqaG5OSUVOSTRKOFYyemF0U3ZsZHMrTHNub3ZHUzdoQnl6aGpkT1ZzQmJjd0wzbmVPNHZzNmk1ejJIUFBEZDg3aXpyMDNldVpNaThGMkwtTFAzTnZTNHMxWm5zVUdFTlZkQncrVlg1UDl1dGZwN2I2enpPZmNhZVV3YmpEUVBveVBlUnpEODNNZnJlYlJXd2h0YmhYSGVHK2QyVmxNYnY4c0E2VitlYjNTdXdmKzkxeFQxejJ1NDh6YkR6YW8zM1B5OUNZdCtIK2pYT3NzSjdWKzdoM2hPb3RKNXp3SGo4K2VBK0Y5QjFEc3ZhdTd0dytENVdTUHh2YSt6YlYxajV2dDZSOWNjbC00S0RxSFNlYThESDM0dnZ1TmRxNlo4UDRQby1LOTZ1cjA5eGYtUGE4MiszeHlPQUV2ZnRPOWw1bjJ6cUg3TkY4dHhKNkMxMmp2QjRIMnJyWE4zejk5Y1Z0WXN6OUQ5MGN3RHNjVzlnOVVNQ3NlQmw4SDhyTWF4VjlzOEhza0l0OTM4ZDgzTndjZTlTOEFDSUNnQzFjUURvOUFEQnQ2OHE5bk1tOTQ4RjlvREt0MjhwYzA5WmNHUUdSa0NQYzFjRHQwQ0c4UDgtZFBjZzhsY2o4SHRKOGE4U0Nac3lDVDhnYzNzb0NsZFVOazg0RDc4b3RwRHU5cjkyQ3FkUWR1QzFjU0l1TlJDeE16ZEJ0ajl0RGFzcDloQzY5VkRJRHFDcEM0QXY5NEQ1Q0xERkNNREdRS0l0TTlDRk5QTTFEeDlvSUQ4K0RROEJDdk5RRFBDTDlaOEpDekNBOXB0SmRCSmRRUUFGWVlCTVljRUZZeUFUNXVZbjByUU0wUTFCWjg0amhtaEwwZEZiUW5BUzA1MFBRZEJkUW9GcWhMRWRFNEJVQjdoeEJNd0VRN0FGSiswZUJVMHhFb0F6QWYxajBjakdZcjRyZ0ZKK1J5UmtBcmtkSkRSVjQ0QWRKSUVWOGlkR2l6QXNFbFJ4QWhpbkFIQmVCNlFIMHNsMjBaMFgxbjFTQk5RUUJCaTMwNWppZ3pSLUU5MG1pdGpaanhCSFJWRlpSa0E2QUQwRkpMVlZFdlp3VURpekFqamNRVGlESml3elFtRkxWTWxyVVBSWlI0QlY0Q0Z4aW5pZGloNHc1T1Jza0lsT2hva3NwMkl0Vm1SMkpFay1pY2lDQTRUMGt2aVBVTGlyalFWOWlXSnhFZ1NYajFRb0Jia0drNmppUU1TOWcxUVVReVNGSmhsck5NazJRVVJFUzRqLVJQMFNTSlFWalBBMWlOakpqSWc0QXFUVFExUXFTZm9vRlpSUU5ZTTFRMWpVanBBRVkxaThqaVFPMHNSQklacExpOWdGVmdBcVN0Qk9VcjRPQk9JWUJBNEQwTXd2aE9oVjQyVFIwbGg1QkZCM0JLQS1nWklIcE5vZUJoSUlBZUJPUVZwZEFLVmdCT0pZQS1wT0l6QitBb2dRZ3pCNkJ5aU5oSzVySXZCRkZmU1FnVVJSVHJJMFFkQXZUZFNPQUQwQW9qSUg0YlJGUmxRbkJESTB6cVJUSlgxMlQwb2ZZRllhQnNaT1JwQlVBMFJ6SUlCeEl6QkJJKzFwUnJacFFXaS0wR1ptelpBOUp5enZqWlFzTkhUNlF1SnBsLWhKSnQ1YkJwQkdadmhkQmZSbXhaWXpCTmhteWZaaHpVMFJTUU14MXVJOVFRTVVSMVJ1enB3K0JYSXBCOE44QUVBRUFpeWIwc2dMQndnTmhTQmZReUFWcGxSVEFJRmtGWlJaRnJpZUEreUFBeExJOWM2TXJjOXMxTkd0Y1lESTFvQVpEb0NSQTlSVWNkT0FSOGxFUjhvTmEyQnM3SWNkTlNDa0FnTnRYQVFLTElMQlpBVEFVQWVOVGFBZ1RDMUNtQWRDcWtPbU9RVEFhbzFBUEFGb1FpMGhka1Vpck5DaXRDcUFXNFVoSytXaW1vK2lnaXhpb2lpQUY4MWk4aS1DcWl1bVFRWGk5aWdTaUFFbVlTLWl6aTBoVlFDU3lpcVN1bWZnQ1N6WUNBVURTa0hGWm9VczRzNnlEZ1ZZVEFTeGNRVTRQQWRTOXdZczBLV0FEWUpHWjJjUUdvbGdZc1ZZYU1GOHh5eHltaXZBY3k4Q2xhZDVJWW5rZEFMQVNzR3NFQU9NRUFBZ1lNV2dTSUF5ekN3S3ZZUTRZNFhDakFVQU5BZk9Ia2x0T2dZcVcwTmdhUUlvUEN0cFVVVEFQeW04SXlzNEM0SzRCdVJHVEt1S29Ld09aZ0RBYU1BTVg4SUs2UUtBSkt5b01xMEFiS3FxaGtGc1hzTFFicW9BQQ==" target="_blank">Route B</a>, and <a href="https://riscv-programming.org/ale/#select_url_content=TjRJZ3RnaGdsZ2RnK2dCd2djd0tZZ0Z3aEFHaEJBWndLZ0lCY0laUzRDQmpBSnlnVk14Q2pBUUhzN1NBQ1lBVlFDU2NBQktvQU5nbFIwY1BBSUpFUzVTbkFESzlScVFDK1BBR1owT1lIZ0IwUUFPZ0QwWURnQk1BcnVOUUVMaFltUXFrekFLd0tuak1OazV1UGdBWkRob0ljUUFsVkNEdFBRTWpVMHRyZTBkbkdnNFlHRlFhVWlnczcxOFFBRzUtUUs1ZVlCNWlNQWNJVWk0NFRNb0RjVWM2SGgxOVF4TnpLMXNISnd0YStzYTZJdE15Z1BaS25nak9ucVQrMUFBUFVsUVlZaXpuRzFRQU55Z2FZWUlKWFRnYkJrT1laR2FJQ1o4LUdIOGFjVmNlS0k0N0RZSWVOWTJZRFpmZ28zTW9xT29HRXhnUDRlUE1kcVE2SFk4bHdBQlFBU21oTUZoc0lJZGlrZEhSMDJ4UEVjdkFNMzFRY0NnTmg0QUY0ZUFBbUVvOEN3V0hnQVlRQUZoUTBEeFNKeVNIeU9Ed09QenBEeHlUOFlkalNSS3ZoczREQUlHQW5IU2VBQnRVeHlVeXlVd0FJUjFmWFpwZ0F1aVlzVExVR1Q1WlR5SFEwS1JmdlROUmJpUzdpY1RnS3NNRHdBTFFBUmdBYkxJQUo0Ky0yeUFCZVBvQTdGb2NOS1BYeHZUeC1RQVdZTThNT3BxTStnUHh4TWVyM2h3TUFCbEQ0ZHpqTkxBRllDNjZpeW1HUUFPR3NWbk04YU9NLTJsK3RKMkhGeG10OXNSenMrNXQ5ajBtaE1OMkh1LXVEZ09aN09qcnR4bWY5NVBoZ0RNYmF6bGJIZnY5azZUZzViYVpIVmQ5Z1pQamZEYWVibDhQUGR2bnBUQWRISzZyLW9uRzZuZjdkUXMzenpJTW56WFY5c1VIZjFkekFrQ0lJSEp0bXd2ZmNPeTdhOTRLM1ZNeTFnMU0wd3dxRHNKUTFjZlFaVXR0M3dsTi1RQVRod2hsb0lnNmRDeE5RdCtSSU13N0NnTlVjZ0FkeDRJUlJBa2ZFVVFBQXdBSGs1Tk1BRDRBRkZWbWtHZ1NGUUhobXpNZjAtUStHMGVBQUVtQVNWS1NWRlVDSFZQU3FSc0UwdEZFaXdKTWswU0FDTTZFa3dzN08rUm9zVklFTXBGcFV4YkpjckpUQjRha3ZKQUJZcVFDUkFPR0tlWTNpSUlMYk5JTEU0cGdYMEVBWVNBNkJEVXhKTlVLMTVudUlVQW9DZkpJaDRUaGlIeUxKTEo4MGhYTWNodG5PcXJJK1E4MUJZdDg1NFFBQ213Z3J4R3dHa3BFTFN2ODE1WEZpK0tlRVM1TFV2dURLUUVrZ0J4SEtGbm1PdzZEb1RaZUZLcUJ5cGdTcTJ0cTRrN0ljd3NRa0lYZ2xzMjdhZlZFZ2drQ3hRTFRCQ21nVnJXbFJCdG15eWJvb1NUaExSYVpDeHNjSTdCVlNnekFkYVRIR0IwZzlSRFFRYkJSVXdlcjZ1NDZIQzRvMFRNTEpYaU9BQnJOVTREcFNTK0FXZGpDcERBQlpRWkhETWJMQVRKcHdDQlFWQjRlQys1RFZNQjFWSElVZzdEUmtvdEgrd0hJZEJxMXdkUVNIb2RoNW1RdGdLQlVkTWRITWZFSEc4WUpvbjdqTVU0cUhjRFlVVVhVQ2lLcmRkTVBMRkNxTzNLdFN6TVh0ZnY1NTQ3ZUpUWEJFb2FSOWtpRkYwVlZ6RWt5Z1hRVVdKaTZDbmdjUU9HUU14SEJ1ZmtlRUowc01TQTdFQWFlb1d3WWg5YUpiaGg3N21hWjcxcmxrQjBkZ0hJNkJFQUFWTW1RalZBQXBWUUFIa0FEa05ZUldCa0I5a00tZlZnT3NqZ1lQa0hWZjJJcTJ3T3U1RHNQTm1RU1BmVlRFMWZyajIzaVhqSGdhMUxHT2lVdFhnZmlvUFMxVUlFTVlCb0hoOGRwUW12WTlWaUNBMXExUXEydFJpNEFFVUVXdVJKMGt6cVg1LXdmcFg0bGljMTZndWFadlhsd1BPQldRZzRUYlpqTmhiSzJXaHA2emx5aE1EdVFjUTVxblZDYUQrMkpUNW1CU3FnUFl1aFlCWUxnUGNaQVRvTlNtRjlMNkVnRUEyYjRCb0RZSEJZQmNTbWxRYkNIMktJQUNFS0lJRGNXZ0d2QVVaOUVUd0ZHRzhjWTZJMFN4eGdiQ2RCSEV3NGgyWnJYWVVPREhBMUFrTGtEWU5oNWFNTFFUd3FSeUFaRnlLZ0FvMDRqZzhoWUxVWEhXRWExdVowQ3hMb1NJcHgxR3p3OUMwTWdmSUNGV2lJU1pPMERvakxQek1uSFdVSGljcjBuOFk2RFdBcGRDa0VKSEhYUVhBZUFvajhXcVVzekplQ2lWVE0yQkpmSUFEVTZTMFI4Rk1iQWttVzF5YVUxUU5UVFlOZzZaRUVabExWbXVBK2djeTVqekV4WWllQWNLNFh5VFJCQkhDeEJSRDJKZTBETnk1TWNSd0ttM2RtWUFDcHhrVE1tWFhhU1BCaTZDREp0SlZReGRwSUFBVkpuckltWTBnWjhJU29SVFZIM01xZzl1NjkzYnYzYmFROVE3aHpIcHlkUy1vVUhiSzJMd0d3U2cxUmt3YUp5RFdBQkhiZzdzZ2xtRldPcFVxLXkwVGpJWkR3ZEpNUy1raGtCUkZNd0lZUVdqTEJSQ2xFZnpJd3dyUHBHQkZESTBRUElJRU00cEl6aEliUEdSeVBLOERtbHIxcERwYlFQb1VRNlNCYXNlZTlMWVVoaVpjQUlGa1lvRm1CNERmSlFGQmpnSkY2RUVpbE1UcVV1TThJeTJRWXI3UldqaFd5MUZVQ2ZRNldlV1FMUTc5Y25NSlZVaytrLW9heWlNM0xDWEpURGRDUXZGV2ZLNWtkYVQwaGpzZkExelRPRmJUYVd4RHBxQXVuYmlYc3ZJMUdpMklqT0pwa2RvSkFqa2h6NlhhcDE1cnBFSElIcDNidUlhN1hvTElCd0JBMUEyQmpGUkxHZzE1aVZwdVVSS2dMMU9ndlhDc0NXYWtKUHR3bnBybmpQT084YkdoSm9FUTBOTjZqMEhkemdQS0JBM3dJa3dNelpZdlFOalVETWtMUFl3MURaQ3l5alduRUxpcUJlSmhBaU5FV0lsUU8zRW5RUzBISWVSQTVuemJRUVRrS0l4MlZIVFN4VFJraUlBMkJzSEFkZThNWUdtSFpJWUJBZWlHaUJ4MUhIQStSOWNrN3U0R1lOYTdnZm5sdTlXZkk5SjdNaDdCRWw2MkVvTmc2MlhFUElPQXBaZ004RkF4d2NEUEE5UlFaZzNCaEQ3SmtQMjFEV1lYcTVBWU55Q2d6NkdEeEl6RGNTNERTSmNQQUFERVBCVmhFZXhDUnNqcVpzVFVlaFhSa0RwRzZBMGhqTXh6c2JIWU1jWnBLV0hqRUE0QzBhYVp1QmpuR2VCbTFoTlJrVEdWeFA5a2s0SjRUY0JJeDhlVXp3SVRzbm1tcnI4b3BwTW1uOE5xV282TW5JNndVTUVHeG93Vk0wR0RPUWY5SVIrenhHQk80VURGUm1qR25YTnFSMDZ4NXo5SFhNQmgwK3AtejdIR1BhWTh5SnNUb2FQU2FaazVGdUFDbVlzdWZDNnBrTHlXQXVNWjg1RnZUbUdNdEdiZ0dDMHo1blNDV2Vzd2dCZWVHNERiZ3dGNXhqTFlhd2VlaXhsLWpXV2VOK1phNjFxVGRFaFBVZlN5MXpURVc1T2licTFKcWkyWGh0SllHNjVvYnpTMU9qWnBHQ25URUJjc0xjZzJtRHpabi1oVllaTFYwTFhXYVJCbDY1NS1ibW1KdFpuTkoxelRwRkd0OWJXN05xTGEybHVUZnUybHA3d25WdW5kYy1oN2NtMlN0VmJUSHRxN3JtR3ROYlcrZGpyMDNHUE5tQzY5NWJJMnZ0WmViQ1p1YlUzOHN6YmU0anFURzNsdWZlQjZsblRXMkxONVlOVWgwc1RuOGRTWW85UjVyNk8ydStjdTFEcVQzSFlkWTVVLUQybnlXNHUtWVMyanJuR1A0ZjlicDFKaDdlT21jMGlReWpvbnBYN01hM0s1Vit6a3VLZmk5VEx1TUhiT21NTTdXMEZqelF2K2NFNFM1em1MM1A0ZDgrTndMaExldnpjRzdrMkw0WEV2Q3QtZTI3THF6Tm1ld3dhUXpWOEhENTFlVThPKzF4bjl2Yk9zNzkxcDFUUnVzTWc1ak05MUhjUExkeDl0OXROYlNHTnZGZWQ4YjEzRlcwd2U4SzBEbFg1NWZjcTRoNEgtWFZQM082NFQzTmlQZHFUZTg4cnlKcTNrZkdNODV5MG5qWG51bmZFNWl5bnZQUWVQeUY2RDhYOEhNT0s4YTRld2owUERKbyttLXItTmpYT1BXLTNySHp4NlgtZ1lQb2ZKOXJvTUEtUy0rNjF4cmxuby1RLWorcndhMnZMM2wrQy1yM2IzZkhJNEJTLSt5NytYMmY3UG9jY3lYNjNVbm9LM1pPNkhvZkd1ZGM3dEw5RGMxdDRzTDlqOU1jSURjYzI5UTkwTWlzZUJWOG44Yk1heDE5Yzhuc2tJZDlQODk4UE5JYys5eThnQ29DUUNOY3dEWTlnRGh0RzhhOVhNVzlFOGw5WURxdE84WmNNOTVkLVItUlVDdmNOY2p0TUNtOHY4QTl2Y1E4VmNUOG50cDg2OHlDNXNLQ3o4UWNQc1lDVmQwTlU4RURIOFl0WkRlOWI5T0NhZHdkZUNOZFNKcURlTlJESHROQ1o5ZEM1OC04cERhQ1pDNEFmOUVERkR6RGxDc0RVd3FJZE5UOEpOdk1OREo5b0lqOEJEdzhoQ2ZOd0NQQ3I5NThURDlOQ0MwOTFoaEpkUVFBbFlZQnNZOEVsWXlBejVlWVgwclFzMHcxaFpDNGpobWhyMDlGYlFuQXkwRjBQUWRCZFFZRnFockU5RTRCVUI3aHhCc3dFUTdBbEpCMGVCMDBKRW9BekEtMVQxc2ptWWI0cmdsSitSeVJrQWJrOUpEUjE0NEE5Sm9FMThTY0dpekFjRWxSeEJCaW5BSEJlQjZRbjBjbE8wNTAzMVgxU0JOUVFBQmlQMVpqaWd6UkFrRDFHak5pWmp4QkhSMUZaUmtBNkFqMGxKclYxRWZaSVY5aXpCRGpjUmppakpTd3pRV0ZyVnNsYlVQUlpSNEIxNGlFeGpIanRpUjRJNU9SY2tvbE9oWWtjcE9JZFZtUk9Ka2xmanNpQ0JZVE1sUGl2VnpqTGp3VTlpMkpKRkFUbmoxUW9CN2ttbGFqaVIwUzlnMVFVUlNTbEpSbGJOc2syUVVRRVRZaUF4djFpU0pSbGpQQlZqMWlKaklnNEJLVFRRMVJLUy1vWUZaUndONE0xUlZpVWpwQWtaVmpjamlRdTBzUmhJNW9MaTlnbFZnQktTdEJ1VWI0T0J1SVlCZzRqMHN3dmhPaDE1V1R4MGxoNUJGQjNCS0EtZzVJbnB0b2VCUklJQWVCT1ExcGRBcVZnQnVKWUFBWnVJekIrQW9nUWd6QjZBeWlOaHE1Ykl2QmxFZlNRZ1VRUlRiSTBRZEJQU2RTT0FqMGdvVEluNGJSRlJsUW5CakpVenFSekozMDJUTW8tWWxZYUJjWk9ScEJVQTBSTElJQkpJekJoSUIxcFJiWnBSbWlBTW1ZbXpaQURJeXl2alpRY01IVDZRZUpabC1ocEpkNWJCcEJtWnZoZEJmUm14NVl6Qk5nbXktWWh6MDFoU3dNSjFlSTlRd01VUjFRdXpwdytCM0lwQkNOOEFFQUVCQ3k3MHNnTEJ3Z05oU0JmUXlBMXBsUlRBb0ZVRlpSNUVyaWVCZXlBQXhUSXRjcU16Y3RzOU5PdGNZZEkxb0laRG9LUkk5UlVTZE9BQjhsRUI4a05XMmVzN0lTZERTQ2tBZ0R0WEFZS0xJSEJaQVRBVUFSTmJhQWdEQ2xDbUFOQ3FrQm1PUVRBS28xQVBBRm9BaThoZGtFaW5OY2kxQ3FBVzRjaEcrR2k2b3VpLUNoaXdpaUFaOGxpc2l2Q3lpaG1RUUhpdGktaWlBTW1JU3Zpamk4aFZRY1NpaXlTaG1mZ2NTellDQWNEU2tQRlpvRXNvczJ5RGdWWVRBYXhjUVU0UEFOUzl3SXM4S1dBRFlGR1YyY1Fhb2xnVXNWWUdNWjhoeWh5Nml2QU15c0N0YVQ1UVlua2RBTEFCa0dzRUFlTUVBQWdFTVdnU0lmU2pDZ0t2WVE0WTRIQ2pBVUFOQVF1Ymt0dE9nVXFXME5nYVFJb1hDanBVVVRBWHltOFF5czRDNEs0SnVaR0RLMkt3SzRPWmdEQUdNUU1YOFFLNlFLQVJLeW9VcTBBTEt5cS0wRnNYc0xRTHFvQUE=" target="_blank">Route C</a> - In this case, you must upload <strong>acos.s</strong>, <strong>colib.s</strong>, <strong>control_api.h</strong>, and <strong>colo.c</strong> files.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix"><a class="header" href="#appendix">Appendix</a></h1>
<ul>
<li><a href="appendix_ale-peripherals-mmio-manual.html">ALE Peripherals MMIO Manual</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="ale-peripherals-mmio-manual"><a class="header" href="#ale-peripherals-mmio-manual">ALE Peripherals MMIO Manual</a></h2>
<h3 id="canvas"><a class="header" href="#canvas">Canvas</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><strong>Address</strong></th><th style="text-align: left"><strong>Size</strong></th><th style="text-align: left"><strong>Description</strong></th></tr></thead><tbody>
<tr><td style="text-align: left">base+0x00</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the canvas to write an array of up to 504 bytes representing up to 126 pixels to the screen. The register is set to 0 when writing is completed.</td></tr>
<tr><td style="text-align: left">base+0x02</td><td style="text-align: left">half</td><td style="text-align: left">Array size (in bytes).</td></tr>
<tr><td style="text-align: left">base+0x04</td><td style="text-align: left">word</td><td style="text-align: left">The initial position to write the array on the canvas. The canvas is represented as a 512x512x4-byte one-dimensional array representing 512x512 pixels.</td></tr>
<tr><td style="text-align: left">base+0x08</br>to</br>base+0x200</td><td style="text-align: left">word</td><td style="text-align: left">504-byte array representing up to 126 pixels. Each pixel takes 4 bytes, one byte for each value: Red, Green, Blue, and Alpha (in this order).</td></tr>
</tbody></table>
</div>
<h3 id="general-purpose-timer"><a class="header" href="#general-purpose-timer">General Purpose Timer</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><strong>Address</strong></th><th style="text-align: left"><strong>Size</strong></th><th style="text-align: left"><strong>Description</strong></th></tr></thead><tbody>
<tr><td style="text-align: left">base+0x00</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the GPT device to start reading the current system time. The register is set to 0 when the reading is completed.</td></tr>
<tr><td style="text-align: left">base+0x04</td><td style="text-align: left">word</td><td style="text-align: left">Stores the time (in milliseconds) at the moment of the last reading by the GPT.</td></tr>
<tr><td style="text-align: left">base+0x08</td><td style="text-align: left">word</td><td style="text-align: left">Storing <em>v</em> &gt; 0 programs the GPT to generate an external interruption after v milliseconds. It also sets this register to 0 after <em>v</em> milliseconds (immediately before generating the interruption).</td></tr>
</tbody></table>
</div>
<h3 id="midi-synthesizer"><a class="header" href="#midi-synthesizer">MIDI Synthesizer</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><strong>Address</strong></th><th style="text-align: left"><strong>Size</strong></th><th style="text-align: left"><strong>Description</strong></th></tr></thead><tbody>
<tr><td style="text-align: left">base+0x00</td><td style="text-align: left">byte</td><td style="text-align: left">Storing <em>ch</em> ≥ 0 triggers the synthesizer to start playing a MIDI note in the channel <em>ch</em>.</td></tr>
<tr><td style="text-align: left">base+0x02</td><td style="text-align: left">short</td><td style="text-align: left">Instrument ID.</td></tr>
<tr><td style="text-align: left">base+0x04</td><td style="text-align: left">byte</td><td style="text-align: left">Note.</td></tr>
<tr><td style="text-align: left">base+0x05</td><td style="text-align: left">byte</td><td style="text-align: left">Note velocity.</td></tr>
<tr><td style="text-align: left">base+0x06</td><td style="text-align: left">short</td><td style="text-align: left">Note duration.</td></tr>
</tbody></table>
</div>
<h3 id="self-driving-car"><a class="header" href="#self-driving-car">Self Driving Car</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><strong>Address</strong></th><th style="text-align: left"><strong>Size</strong></th><th style="text-align: left"><strong>Description</strong></th></tr></thead><tbody>
<tr><td style="text-align: left">base+0x00</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the GPS device to start reading the coordinates and rotation of the car. The register is set to 0 when the reading is completed.</td></tr>
<tr><td style="text-align: left">base+0x01</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the Line Camera device to capture an image. The register is set to 0 when the capture is completed.</td></tr>
<tr><td style="text-align: left">base+0x02</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the Ultrasonic Sensor device to measure the distance in front of the car. The register is set to 0 when the measurement is completed.</td></tr>
<tr><td style="text-align: left">base+0x04</td><td style="text-align: left">word</td><td style="text-align: left">Stores the Euler angle X of the car rotation at the moment of the last reading by the GPS.</td></tr>
<tr><td style="text-align: left">base+0x08</td><td style="text-align: left">word</td><td style="text-align: left">Stores the Euler angle Y of the car rotation at the moment of the last reading by the GPS.</td></tr>
<tr><td style="text-align: left">base+0x0C</td><td style="text-align: left">word</td><td style="text-align: left">Stores the Euler angle Z of the car rotation at the moment of the last reading by the GPS.</td></tr>
<tr><td style="text-align: left">base+0x10</td><td style="text-align: left">word</td><td style="text-align: left">Stores the X-axis of the car position at the moment of the last reading by the GPS.</td></tr>
<tr><td style="text-align: left">base+0x14</td><td style="text-align: left">word</td><td style="text-align: left">Stores the Y-axis of the car position at the moment of the last reading by the GPS.</td></tr>
<tr><td style="text-align: left">base+0x18</td><td style="text-align: left">word</td><td style="text-align: left">Stores the Z-axis of the car position at the moment of the last reading by the GPS.</td></tr>
<tr><td style="text-align: left">base+0x1C</td><td style="text-align: left">word</td><td style="text-align: left">Stores the distance (in centimeters) between the Ultrasonic sensor and the nearest obstacle. Returns -1 if there’s no obstacle within 20m.</td></tr>
<tr><td style="text-align: left">base+0x20</td><td style="text-align: left">byte</td><td style="text-align: left">Sets the steering wheel direction. Negative values indicate steering to the left, positive values indicate steering to the right.</td></tr>
<tr><td style="text-align: left">base+0x21</td><td style="text-align: left">byte</td><td style="text-align: left">Sets the engine direction.</br>1: forward.</br>0: off.</br>-1: backward.</td></tr>
<tr><td style="text-align: left">base+0x22</td><td style="text-align: left">byte</td><td style="text-align: left">Sets the hand break. (1 = enabled)</td></tr>
<tr><td style="text-align: left">base+0x24</td><td style="text-align: left">256-byte array</td><td style="text-align: left">Stores the image captured by the Line Camera. Each byte represents the luminance of a pixel.</td></tr>
</tbody></table>
</div>
<h3 id="serial-port"><a class="header" href="#serial-port">Serial Port</a></h3>
<p>The serial port is connected to the terminal (stdout and stdin).</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><strong>Address</strong></th><th style="text-align: left"><strong>Size</strong></th><th style="text-align: left"><strong>Description</strong></th></tr></thead><tbody>
<tr><td style="text-align: left">base+0x00</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the serial port to write (to the stdout) the byte stored at base+0x01. The register is set to 0 when writing is completed.</td></tr>
<tr><td style="text-align: left">base+0x01</td><td style="text-align: left">byte</td><td style="text-align: left">Byte to be written. ID</td></tr>
<tr><td style="text-align: left">base+0x02</td><td style="text-align: left">byte</td><td style="text-align: left">Storing “1” triggers the serial port to read (from the stdin) a byte and store it at base+0x03. The register is set to 0 when reading is completed.</td></tr>
<tr><td style="text-align: left">base+0x03</td><td style="text-align: left">byte</td><td style="text-align: left">Byte read. Null when stdin is empty.</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
